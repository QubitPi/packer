{"pageProps":{"metadata":{"title":"UpCloud Builder | Integrations"},"product":{"name":"Packer","slug":"packer","algoliaConfig":{"indexName":"product_PACKER","searchOnlyApiKey":"4e1ea7f4bf4335ac43d9f28463e42148"},"analyticsConfig":{"includedDomains":"packer.io www.packer.io","segmentWriteKey":"AjXdfmTTk1I9q9dfyePuDFHBrz1tCO3l"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Packer by HashiCorp","description":"Packer helps you create golden images for multiple platforms from a single source configuration.","image":"https://www.packer.io/packer-public/img/og-image.png","icon":[{"href":"/packer-public/_favicon.ico"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiConf","url":"https://hashiconf.com/2023?utm_source=direct&utm_medium=banner&utm_campaign=23Q3_HASHICONFGLOBAL_EVENT&utm_content=&utm_offer=event","text":"Our community conference is taking place in San Francisco and online October 10-12.","linkText":"Register now","expirationDate":""},"version":"1.7.10","basePaths":["docs","guides","intro","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"guide","name":"Guides","path":"guides"},{"iconName":"plug","name":"Plugins","path":"plugins"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Packer Integrations."}},"integration":{"id":"43a15779-1257-4553-b2d7-271afac6361a","slug":"upcloud","name":"UpCloud","description":"A builder plugin for Packer which can be used to generate storage templates on UpCloud.","license_type":null,"license_url":null,"external_only":false,"external_url":null,"tier":"partner","repo_url":"https://github.com/UpCloudLtd/packer-plugin-upcloud","subdirectory":"/.web-docs","created_at":"2023-08-14T20:21:38.845Z","updated_at":"2023-12-07T17:23:55.174Z","hide_versions":false,"organization":{"id":"ce9006a0-61e8-490e-9f72-365183a55f4a","slug":"UpCloudLtd","created_at":"2023-08-14T20:21:38.611Z","updated_at":"2023-08-14T20:21:38.611Z"},"product":{"id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","slug":"packer","name":"Packer","created_at":"2022-11-09T22:56:29.896Z","updated_at":"2022-11-09T22:56:29.896Z"},"versions":["1.5.3","1.5.2","0.0.0"],"components":[{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders"},{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors"}],"flags":[],"integration_type":null},"activeRelease":{"id":"906b8792-e8c0-4dbb-a213-e43eda8084ac","integration_id":"43a15779-1257-4553-b2d7-271afac6361a","version":"1.5.3","readme":"This is a plugin for Packer which can be used to generate storage templates on UpCloud. \nIt utilises the [UpCloud Go API](https://github.com/UpCloudLtd/upcloud-go-api) to interface with the UpCloud API.\n\n### Installation\n\nTo install this plugin, copy and paste this code into your Packer configuration, then run [`packer init`](https://www.packer.io/docs/commands/init).\n\n\n```hcl\npacker {\n  required_plugins {\n    upcloud = {\n      version = \">=v1.0.0\"\n      source  = \"github.com/UpCloudLtd/upcloud\"\n    }\n  }\n}\n\n```\n\nAlternatively, you can use `packer plugins install` to manage installation of this plugin.\n\n```sh\n$ packer plugins install github.com/UpCloudLtd/upcloud\n```\n\n\n### Components\n\n#### Builders\n\n\n- [upcloud](/packer/integrations/upcloudltd/upcloud/latest/components/builder/upcloud) - The upcloud builder is used to generate storage templates on UpCloud.\n\n#### Post-processors\n\n- [upcloud-import](/packer/integrations/upcloudltd/upcloud/latest/components/post-processor/import) - The upcloud import post-processors is used to import disk images to UpCloud.\n\n### JSON Templates\nFrom Packer version 1.7.0, template HCL2 becomes officially the preferred way to write Packer configuration. While the `json` format is still supported, but certain new features, such as `packer init` works only in newer HCL2 format.\nIf you are using `json` config templates, please consider upgrading them using the packer built-in command:\n\n```sh\n$ packer hcl2_upgrade example.json\nSuccessfully created example.json.pkr.hcl\n```\n","created_at":"2024-01-02T13:27:38.097Z","updated_at":"2024-01-02T13:27:38.097Z","components":[{"id":"4d3c1c34-6a2e-4324-b311-c366a3873f2c","integration_release_id":"906b8792-e8c0-4dbb-a213-e43eda8084ac","component_id":"36076511-3ced-4faf-addf-101fce0405ff","readme":"\nType: `upcloud`\n\nThe upcloud builder is used to generate storage templates on UpCloud.\n\n<!-- Builder Configuration Fields -->\n\n### Required\n\n<!-- Code generated from the comments of the Config struct in builder/upcloud/config.go; DO NOT EDIT MANUALLY -->\n\n- `username` (string) - The username to use when interfacing with the UpCloud API.\n\n- `password` (string) - The password to use when interfacing with the UpCloud API.\n\n- `zone` (string) - The zone in which the server and template should be created (e.g. nl-ams1).\n\n- `storage_uuid` (string) - The UUID of the storage you want to use as a template when creating the server.\n  \n  Optionally use `storage_name` parameter to find matching storage\n\n<!-- End of code generated from the comments of the Config struct in builder/upcloud/config.go; -->\n\n\n<!--\n  Optional Configuration Fields\n\n  Configuration options that are not required or have reasonable defaults\n  should be listed under the optionals section. Defaults values should be\n  noted in the description of the field\n-->\n\n### Optional\n\n<!-- Code generated from the comments of the Config struct in builder/upcloud/config.go; DO NOT EDIT MANUALLY -->\n\n- `storage_name` (string) - The name of the storage that will be used to find the first matching storage in the list of existing templates.\n  \n  Note that `storage_uuid` parameter has higher priority. You should use either `storage_uuid` or `storage_name` for not strict matching (e.g \"ubuntu server 20.04\").\n\n- `template_prefix` (string) - The prefix to use for the generated template title. Defaults to `custom-image`.\n  You can use this option to easily differentiate between different templates.\n\n- `template_name` (string) - Similarly to `template_prefix`, but this will allow you to set the full template name and not just the prefix.\n  Defaults to an empty string, meaning the name will be the storage title.\n  You can use this option to easily differentiate between different templates.\n  It cannot be used in conjunction with the prefix setting.\n\n- `storage_size` (int) - The storage size in gigabytes. Defaults to `25`.\n  Changing this value is useful if you aim to build a template for larger server configurations where the preconfigured server disk is larger than 25 GB.\n  The operating system disk can also be later extended if needed. Note that Windows templates require large storage size, than default 25 Gb.\n\n- `state_timeout_duration` (duration string | ex: \"1h5m2s\") - The amount of time to wait for resource state changes. Defaults to `5m`.\n\n- `boot_wait` (duration string | ex: \"1h5m2s\") - The amount of time to wait after booting the server. Defaults to '0s'\n\n- `clone_zones` ([]string) - The array of extra zones (locations) where created templates should be cloned.\n  Note that default `state_timeout_duration` is not enough for cloning, better to increase a value depending on storage size.\n\n- `network_interfaces` ([]NetworkInterface) - The array of network interfaces to request during the creation of the server for building the packer image.\n\n- `ssh_private_key_path` (string) - Path to SSH Private Key that will be used for provisioning and stored in the template.\n\n- `ssh_public_key_path` (string) - Path to SSH Public Key that will be used for provisioning.\n\n<!-- End of code generated from the comments of the Config struct in builder/upcloud/config.go; -->\n\n\n#### Network Interfaces object (NetworkInterface)\n\n<!-- Code generated from the comments of the NetworkInterface struct in builder/upcloud/config.go; DO NOT EDIT MANUALLY -->\n\n- `ip_addresses` ([]IPAddress) - List of IP Addresses\n\n- `type` (InterfaceType) - Network type (e.g. public, utility, private)\n\n- `network` (string) - Network UUID when connecting private network\n\n<!-- End of code generated from the comments of the NetworkInterface struct in builder/upcloud/config.go; -->\n\n\n#### IP Address object (IPAddress)\n\n<!-- Code generated from the comments of the IPAddress struct in builder/upcloud/config.go; DO NOT EDIT MANUALLY -->\n\n- `default` (bool) - Default IP address. When set to `true` SSH communicator will connect to this IP after boot.\n\n- `family` (string) - IP address family (IPv4 or IPv6)\n\n- `address` (string) - IP address. Note that at the moment using floating IPs is not supported.\n\n<!-- End of code generated from the comments of the IPAddress struct in builder/upcloud/config.go; -->\n\n\n\n<!--\n  A basic example on the usage of the builder. Multiple examples\n  can be provided to highlight various build configurations.\n\n-->\n### Example Usage\n\nHere is a sample template, which you can also find in the [example](https://github.com/UpCloudLtd/packer-plugin-upcloud/tree/main/example) directory.\nIt reads your UpCloud API credentials from the environment variables, creates an Ubuntu 20.04 LTS server in the `nl-ams1` region and authorizes root user to loggin with your public SSH key.\n\n```hcl\npacker {\n  required_plugins {\n    upcloud = {\n      version = \">=v1.0.0\"\n      source  = \"github.com/UpCloudLtd/upcloud\"\n    }\n  }\n}\n\nvariable \"username\" {\n  type        = string\n  description = \"UpCloud API username\"\n  default     = \"${env(\"UPCLOUD_USERNAME\")}\"\n}\n\nvariable \"password\" {\n  type        = string\n  description = \"UpCloud API password\"\n  default     = \"${env(\"UPCLOUD_PASSWORD\")}\"\n  sensitive   = true\n}\n\nvariable \"ssh_public_key\" {\n  type        = string\n  description = \"Path to your SSH public key file\"\n  default     = \"~/.ssh/id_rsa.pub\"\n}\n\nsource \"upcloud\" \"test\" {\n  username        = \"${var.username}\"\n  password        = \"${var.password}\"\n  zone            = \"nl-ams1\"\n  storage_name    = \"ubuntu server 20.04\"\n  template_prefix = \"ubuntu-server\"\n}\n\nbuild {\n  sources = [\"source.upcloud.test\"]\n\n  provisioner \"shell\" {\n    inline = [\n      \"apt-get update\",\n      \"apt-get upgrade -y\",\n      \"echo '${file(var.ssh_public_key)}' | tee /root/.ssh/authorized_keys\"\n    ]\n  }\n}\n\n```\n\nConfiguration reads your SSH public key from the default location `~/.ssh/id_rsa.pub`. You can overwrite variables using command line argumen `-var`:\n```sh\n$ packer build -var=\"ssh_public_key=/some/other/path/id_rsa.pub\"\n```\n\n#### Network interfaces\nThis template uses `network_interfaces` to define network interfaces to be used during the creation of the server for building the packer image.\n```hcl\npacker {\n  required_plugins {\n    upcloud = {\n      version = \">=v1.0.0\"\n      source  = \"github.com/UpCloudLtd/upcloud\"\n    }\n  }\n}\n\nvariable \"username\" {\n  type        = string\n  description = \"UpCloud API username\"\n  default     = \"${env(\"UPCLOUD_USERNAME\")}\"\n}\n\nvariable \"password\" {\n  type        = string\n  description = \"UpCloud API password\"\n  default     = \"${env(\"UPCLOUD_PASSWORD\")}\"\n  sensitive   = true\n}\n\nvariable \"ssh_public_key\" {\n  type        = string\n  description = \"Path to your SSH public key file\"\n  default     = \"~/.ssh/id_rsa.pub\"\n}\n\nsource \"upcloud\" \"test\" {\n  username        = \"${var.username}\"\n  password        = \"${var.password}\"\n  zone            = \"nl-ams1\"\n  storage_name    = \"ubuntu server 20.04\"\n  template_prefix = \"ubuntu-server\"\n\n  network_interfaces {\n    ip_addresses {\n      family = \"IPv4\"\n    }\n    type = \"public\"\n  }\n\n  network_interfaces {\n    ip_addresses {\n      family = \"IPv4\"\n    }\n    type = \"utility\"\n  }\n}\n\nbuild {\n  sources = [\"source.upcloud.test\"]\n\n  provisioner \"shell\" {\n    inline = [\n      \"apt-get update\",\n      \"apt-get upgrade -y\",\n      \"echo '${file(var.ssh_public_key)}' | tee /root/.ssh/authorized_keys\"\n    ]\n  }\n}\n\n```\n\n#### IPv6 network interfaces\n```hcl\npacker {\n  required_plugins {\n    upcloud = {\n      version = \">=v1.0.0\"\n      source  = \"github.com/UpCloudLtd/upcloud\"\n    }\n  }\n}\n\nvariable \"username\" {\n  type        = string\n  description = \"UpCloud API username\"\n  default     = \"${env(\"UPCLOUD_USERNAME\")}\"\n}\n\nvariable \"password\" {\n  type        = string\n  description = \"UpCloud API password\"\n  default     = \"${env(\"UPCLOUD_PASSWORD\")}\"\n  sensitive   = true\n}\n\nvariable \"ssh_public_key\" {\n  type        = string\n  description = \"Path to your SSH public key file\"\n  default     = \"~/.ssh/id_rsa.pub\"\n}\n\nsource \"upcloud\" \"test\" {\n  username        = \"${var.username}\"\n  password        = \"${var.password}\"\n  zone            = \"fi-hel1\"\n  storage_name    = \"Debian GNU/Linux 11 (Bullseye)\"\n  template_prefix = \"debian11\"\n  network_interfaces {\n    ip_addresses {\n      family = \"IPv6\"\n    }\n    type = \"public\"\n  }\n  communicator = \"ssh\"\n\n  # Use bastion host if no IPv6 connection is available\n  # ssh_bastion_username         = \"<bastion_username>\"\n  # ssh_bastion_host             = \"<bastion_host>\"\n  # ssh_bastion_private_key_file = \"<bastion_private_key_file>\"\n}\n\nbuild {\n  sources = [\"source.upcloud.test\"]\n\n  provisioner \"shell\" {\n    environment_vars = [\n      \"DEBIAN_FRONTEND=noninteractive\",\n      \"APT_LISTCHANGES_FRONTEND=none\",\n    ]\n\n    inline = [\n      \"apt-get update\",\n      \"apt-get upgrade -y\",\n      \"echo '${file(var.ssh_public_key)}' | tee /root/.ssh/authorized_keys\",\n    ]\n  }\n}\n\n```\n\n#### Private network interfaces\n```hcl\npacker {\n  required_plugins {\n    upcloud = {\n      version = \">=v1.0.0\"\n      source  = \"github.com/UpCloudLtd/upcloud\"\n    }\n  }\n}\n\nvariable \"username\" {\n  type        = string\n  description = \"UpCloud API username\"\n  default     = \"${env(\"UPCLOUD_USERNAME\")}\"\n}\n\nvariable \"password\" {\n  type        = string\n  description = \"UpCloud API password\"\n  default     = \"${env(\"UPCLOUD_PASSWORD\")}\"\n  sensitive   = true\n}\n\nvariable \"ssh_public_key\" {\n  type        = string\n  description = \"Path to your SSH public key file\"\n  default     = \"~/.ssh/id_rsa.pub\"\n}\n\nsource \"upcloud\" \"test\" {\n  username        = \"${var.username}\"\n  password        = \"${var.password}\"\n  zone            = \"fi-hel1\"\n  storage_name    = \"Debian GNU/Linux 11 (Bullseye)\"\n  template_prefix = \"debian11\"\n\n  network_interfaces {\n    ip_addresses {\n      default = true\n      address = \"10.0.0.20\"\n      family  = \"IPv4\"\n    }\n    network = \"<network_uuid>\"\n    type    = \"private\"\n  }\n  communicator = \"ssh\"\n\n  # Use bastion host to get access to private network\n  # ssh_bastion_username         = \"<bastion_username>\"\n  # ssh_bastion_host             = \"<bastion_host>\"\n  # ssh_bastion_private_key_file = \"<bastion_private_key_file>\"\n}\n\nbuild {\n  sources = [\"source.upcloud.test\"]\n\n  provisioner \"shell\" {\n    environment_vars = [\n      \"DEBIAN_FRONTEND=noninteractive\",\n      \"APT_LISTCHANGES_FRONTEND=none\",\n    ]\n\n    inline = [\n      \"apt-get update\",\n      \"apt-get upgrade -y\",\n      \"echo '${file(var.ssh_public_key)}' | tee /root/.ssh/authorized_keys\",\n    ]\n  }\n}\n\n```\n","created_at":"2024-01-02T13:27:39.484Z","updated_at":"2024-01-02T13:27:39.484Z","name":"UpCloud","slug":"upcloud","component":{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:30.937Z","updated_at":"2022-11-09T22:56:30.937Z"},"variable_groups":[]},{"id":"bc9c7367-abf0-4f57-a67f-062d4de8736c","integration_release_id":"906b8792-e8c0-4dbb-a213-e43eda8084ac","component_id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","readme":null,"created_at":"2024-01-02T13:27:39.825Z","updated_at":"2024-01-02T13:27:39.825Z","name":"UpCloud Import","slug":"import","component":{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:31.157Z","updated_at":"2023-07-26T17:26:54.831Z"},"variable_groups":[]}]},"component":{"id":"4d3c1c34-6a2e-4324-b311-c366a3873f2c","integration_release_id":"906b8792-e8c0-4dbb-a213-e43eda8084ac","component_id":"36076511-3ced-4faf-addf-101fce0405ff","readme":"\nType: `upcloud`\n\nThe upcloud builder is used to generate storage templates on UpCloud.\n\n<!-- Builder Configuration Fields -->\n\n### Required\n\n<!-- Code generated from the comments of the Config struct in builder/upcloud/config.go; DO NOT EDIT MANUALLY -->\n\n- `username` (string) - The username to use when interfacing with the UpCloud API.\n\n- `password` (string) - The password to use when interfacing with the UpCloud API.\n\n- `zone` (string) - The zone in which the server and template should be created (e.g. nl-ams1).\n\n- `storage_uuid` (string) - The UUID of the storage you want to use as a template when creating the server.\n  \n  Optionally use `storage_name` parameter to find matching storage\n\n<!-- End of code generated from the comments of the Config struct in builder/upcloud/config.go; -->\n\n\n<!--\n  Optional Configuration Fields\n\n  Configuration options that are not required or have reasonable defaults\n  should be listed under the optionals section. Defaults values should be\n  noted in the description of the field\n-->\n\n### Optional\n\n<!-- Code generated from the comments of the Config struct in builder/upcloud/config.go; DO NOT EDIT MANUALLY -->\n\n- `storage_name` (string) - The name of the storage that will be used to find the first matching storage in the list of existing templates.\n  \n  Note that `storage_uuid` parameter has higher priority. You should use either `storage_uuid` or `storage_name` for not strict matching (e.g \"ubuntu server 20.04\").\n\n- `template_prefix` (string) - The prefix to use for the generated template title. Defaults to `custom-image`.\n  You can use this option to easily differentiate between different templates.\n\n- `template_name` (string) - Similarly to `template_prefix`, but this will allow you to set the full template name and not just the prefix.\n  Defaults to an empty string, meaning the name will be the storage title.\n  You can use this option to easily differentiate between different templates.\n  It cannot be used in conjunction with the prefix setting.\n\n- `storage_size` (int) - The storage size in gigabytes. Defaults to `25`.\n  Changing this value is useful if you aim to build a template for larger server configurations where the preconfigured server disk is larger than 25 GB.\n  The operating system disk can also be later extended if needed. Note that Windows templates require large storage size, than default 25 Gb.\n\n- `state_timeout_duration` (duration string | ex: \"1h5m2s\") - The amount of time to wait for resource state changes. Defaults to `5m`.\n\n- `boot_wait` (duration string | ex: \"1h5m2s\") - The amount of time to wait after booting the server. Defaults to '0s'\n\n- `clone_zones` ([]string) - The array of extra zones (locations) where created templates should be cloned.\n  Note that default `state_timeout_duration` is not enough for cloning, better to increase a value depending on storage size.\n\n- `network_interfaces` ([]NetworkInterface) - The array of network interfaces to request during the creation of the server for building the packer image.\n\n- `ssh_private_key_path` (string) - Path to SSH Private Key that will be used for provisioning and stored in the template.\n\n- `ssh_public_key_path` (string) - Path to SSH Public Key that will be used for provisioning.\n\n<!-- End of code generated from the comments of the Config struct in builder/upcloud/config.go; -->\n\n\n#### Network Interfaces object (NetworkInterface)\n\n<!-- Code generated from the comments of the NetworkInterface struct in builder/upcloud/config.go; DO NOT EDIT MANUALLY -->\n\n- `ip_addresses` ([]IPAddress) - List of IP Addresses\n\n- `type` (InterfaceType) - Network type (e.g. public, utility, private)\n\n- `network` (string) - Network UUID when connecting private network\n\n<!-- End of code generated from the comments of the NetworkInterface struct in builder/upcloud/config.go; -->\n\n\n#### IP Address object (IPAddress)\n\n<!-- Code generated from the comments of the IPAddress struct in builder/upcloud/config.go; DO NOT EDIT MANUALLY -->\n\n- `default` (bool) - Default IP address. When set to `true` SSH communicator will connect to this IP after boot.\n\n- `family` (string) - IP address family (IPv4 or IPv6)\n\n- `address` (string) - IP address. Note that at the moment using floating IPs is not supported.\n\n<!-- End of code generated from the comments of the IPAddress struct in builder/upcloud/config.go; -->\n\n\n\n<!--\n  A basic example on the usage of the builder. Multiple examples\n  can be provided to highlight various build configurations.\n\n-->\n### Example Usage\n\nHere is a sample template, which you can also find in the [example](https://github.com/UpCloudLtd/packer-plugin-upcloud/tree/main/example) directory.\nIt reads your UpCloud API credentials from the environment variables, creates an Ubuntu 20.04 LTS server in the `nl-ams1` region and authorizes root user to loggin with your public SSH key.\n\n```hcl\npacker {\n  required_plugins {\n    upcloud = {\n      version = \">=v1.0.0\"\n      source  = \"github.com/UpCloudLtd/upcloud\"\n    }\n  }\n}\n\nvariable \"username\" {\n  type        = string\n  description = \"UpCloud API username\"\n  default     = \"${env(\"UPCLOUD_USERNAME\")}\"\n}\n\nvariable \"password\" {\n  type        = string\n  description = \"UpCloud API password\"\n  default     = \"${env(\"UPCLOUD_PASSWORD\")}\"\n  sensitive   = true\n}\n\nvariable \"ssh_public_key\" {\n  type        = string\n  description = \"Path to your SSH public key file\"\n  default     = \"~/.ssh/id_rsa.pub\"\n}\n\nsource \"upcloud\" \"test\" {\n  username        = \"${var.username}\"\n  password        = \"${var.password}\"\n  zone            = \"nl-ams1\"\n  storage_name    = \"ubuntu server 20.04\"\n  template_prefix = \"ubuntu-server\"\n}\n\nbuild {\n  sources = [\"source.upcloud.test\"]\n\n  provisioner \"shell\" {\n    inline = [\n      \"apt-get update\",\n      \"apt-get upgrade -y\",\n      \"echo '${file(var.ssh_public_key)}' | tee /root/.ssh/authorized_keys\"\n    ]\n  }\n}\n\n```\n\nConfiguration reads your SSH public key from the default location `~/.ssh/id_rsa.pub`. You can overwrite variables using command line argumen `-var`:\n```sh\n$ packer build -var=\"ssh_public_key=/some/other/path/id_rsa.pub\"\n```\n\n#### Network interfaces\nThis template uses `network_interfaces` to define network interfaces to be used during the creation of the server for building the packer image.\n```hcl\npacker {\n  required_plugins {\n    upcloud = {\n      version = \">=v1.0.0\"\n      source  = \"github.com/UpCloudLtd/upcloud\"\n    }\n  }\n}\n\nvariable \"username\" {\n  type        = string\n  description = \"UpCloud API username\"\n  default     = \"${env(\"UPCLOUD_USERNAME\")}\"\n}\n\nvariable \"password\" {\n  type        = string\n  description = \"UpCloud API password\"\n  default     = \"${env(\"UPCLOUD_PASSWORD\")}\"\n  sensitive   = true\n}\n\nvariable \"ssh_public_key\" {\n  type        = string\n  description = \"Path to your SSH public key file\"\n  default     = \"~/.ssh/id_rsa.pub\"\n}\n\nsource \"upcloud\" \"test\" {\n  username        = \"${var.username}\"\n  password        = \"${var.password}\"\n  zone            = \"nl-ams1\"\n  storage_name    = \"ubuntu server 20.04\"\n  template_prefix = \"ubuntu-server\"\n\n  network_interfaces {\n    ip_addresses {\n      family = \"IPv4\"\n    }\n    type = \"public\"\n  }\n\n  network_interfaces {\n    ip_addresses {\n      family = \"IPv4\"\n    }\n    type = \"utility\"\n  }\n}\n\nbuild {\n  sources = [\"source.upcloud.test\"]\n\n  provisioner \"shell\" {\n    inline = [\n      \"apt-get update\",\n      \"apt-get upgrade -y\",\n      \"echo '${file(var.ssh_public_key)}' | tee /root/.ssh/authorized_keys\"\n    ]\n  }\n}\n\n```\n\n#### IPv6 network interfaces\n```hcl\npacker {\n  required_plugins {\n    upcloud = {\n      version = \">=v1.0.0\"\n      source  = \"github.com/UpCloudLtd/upcloud\"\n    }\n  }\n}\n\nvariable \"username\" {\n  type        = string\n  description = \"UpCloud API username\"\n  default     = \"${env(\"UPCLOUD_USERNAME\")}\"\n}\n\nvariable \"password\" {\n  type        = string\n  description = \"UpCloud API password\"\n  default     = \"${env(\"UPCLOUD_PASSWORD\")}\"\n  sensitive   = true\n}\n\nvariable \"ssh_public_key\" {\n  type        = string\n  description = \"Path to your SSH public key file\"\n  default     = \"~/.ssh/id_rsa.pub\"\n}\n\nsource \"upcloud\" \"test\" {\n  username        = \"${var.username}\"\n  password        = \"${var.password}\"\n  zone            = \"fi-hel1\"\n  storage_name    = \"Debian GNU/Linux 11 (Bullseye)\"\n  template_prefix = \"debian11\"\n  network_interfaces {\n    ip_addresses {\n      family = \"IPv6\"\n    }\n    type = \"public\"\n  }\n  communicator = \"ssh\"\n\n  # Use bastion host if no IPv6 connection is available\n  # ssh_bastion_username         = \"<bastion_username>\"\n  # ssh_bastion_host             = \"<bastion_host>\"\n  # ssh_bastion_private_key_file = \"<bastion_private_key_file>\"\n}\n\nbuild {\n  sources = [\"source.upcloud.test\"]\n\n  provisioner \"shell\" {\n    environment_vars = [\n      \"DEBIAN_FRONTEND=noninteractive\",\n      \"APT_LISTCHANGES_FRONTEND=none\",\n    ]\n\n    inline = [\n      \"apt-get update\",\n      \"apt-get upgrade -y\",\n      \"echo '${file(var.ssh_public_key)}' | tee /root/.ssh/authorized_keys\",\n    ]\n  }\n}\n\n```\n\n#### Private network interfaces\n```hcl\npacker {\n  required_plugins {\n    upcloud = {\n      version = \">=v1.0.0\"\n      source  = \"github.com/UpCloudLtd/upcloud\"\n    }\n  }\n}\n\nvariable \"username\" {\n  type        = string\n  description = \"UpCloud API username\"\n  default     = \"${env(\"UPCLOUD_USERNAME\")}\"\n}\n\nvariable \"password\" {\n  type        = string\n  description = \"UpCloud API password\"\n  default     = \"${env(\"UPCLOUD_PASSWORD\")}\"\n  sensitive   = true\n}\n\nvariable \"ssh_public_key\" {\n  type        = string\n  description = \"Path to your SSH public key file\"\n  default     = \"~/.ssh/id_rsa.pub\"\n}\n\nsource \"upcloud\" \"test\" {\n  username        = \"${var.username}\"\n  password        = \"${var.password}\"\n  zone            = \"fi-hel1\"\n  storage_name    = \"Debian GNU/Linux 11 (Bullseye)\"\n  template_prefix = \"debian11\"\n\n  network_interfaces {\n    ip_addresses {\n      default = true\n      address = \"10.0.0.20\"\n      family  = \"IPv4\"\n    }\n    network = \"<network_uuid>\"\n    type    = \"private\"\n  }\n  communicator = \"ssh\"\n\n  # Use bastion host to get access to private network\n  # ssh_bastion_username         = \"<bastion_username>\"\n  # ssh_bastion_host             = \"<bastion_host>\"\n  # ssh_bastion_private_key_file = \"<bastion_private_key_file>\"\n}\n\nbuild {\n  sources = [\"source.upcloud.test\"]\n\n  provisioner \"shell\" {\n    environment_vars = [\n      \"DEBIAN_FRONTEND=noninteractive\",\n      \"APT_LISTCHANGES_FRONTEND=none\",\n    ]\n\n    inline = [\n      \"apt-get update\",\n      \"apt-get upgrade -y\",\n      \"echo '${file(var.ssh_public_key)}' | tee /root/.ssh/authorized_keys\",\n    ]\n  }\n}\n\n```\n","created_at":"2024-01-02T13:27:39.484Z","updated_at":"2024-01-02T13:27:39.484Z","name":"UpCloud","slug":"upcloud","component":{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:30.937Z","updated_at":"2022-11-09T22:56:30.937Z"},"variable_groups":[]},"processedVariablesMarkdown":{},"anchorLinks":[{"id":"required","level":3,"title":"Required"},{"id":"optional","level":3,"title":"Optional"},{"id":"network-interfaces-object-(networkinterface)","level":4,"title":"Network Interfaces object (NetworkInterface)"},{"id":"ip-address-object-(ipaddress)","level":4,"title":"IP Address object (IPAddress)"},{"id":"example-usage","level":3,"title":"Example Usage"},{"id":"network-interfaces","level":4,"title":"Network interfaces"},{"id":"ipv6-network-interfaces","level":4,"title":"IPv6 network interfaces"},{"id":"private-network-interfaces","level":4,"title":"Private network interfaces"}],"serializedREADME":{"compiledSource":"var l=Object.defineProperty,i=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var t=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;var r=(e,n,s)=>n in e?l(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,a=(e,n)=>{for(var s in n||(n={}))o.call(n,s)&&r(e,s,n[s]);if(t)for(var s of t(n))c.call(n,s)&&r(e,s,n[s]);return e},m=(e,n)=>i(e,u(n));var N=(e,n)=>{var s={};for(var p in e)o.call(e,p)&&n.indexOf(p)<0&&(s[p]=e[p]);if(e!=null&&t)for(var p of t(e))n.indexOf(p)<0&&c.call(e,p)&&(s[p]=e[p]);return s};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(s){var p=s,{components:e}=p,n=N(p,[\"components\"]);return mdx(MDXLayout,m(a(a({},layoutProps),n),{components:e,mdxType:\"MDXLayout\"}),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Type: \",mdx(\"inlineCode\",{parentName:\"p\"},\"upcloud\")),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"The upcloud builder is used to generate storage templates on UpCloud.\"),mdx(\"h3\",a({},{id:\"user-content-required\",\"data-text-content\":\"Required\",className:\"g-type-display-4\"}),\"Required\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"username\"),\" (string) - The username to use when interfacing with the UpCloud API.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"password\"),\" (string) - The password to use when interfacing with the UpCloud API.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"zone\"),\" (string) - The zone in which the server and template should be created (e.g. nl-ams1).\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"storage_uuid\"),\" (string) - The UUID of the storage you want to use as a template when creating the server.\"),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Optionally use \",mdx(\"inlineCode\",{parentName:\"p\"},\"storage_name\"),\" parameter to find matching storage\"))),mdx(\"h3\",a({},{id:\"user-content-optional\",\"data-text-content\":\"Optional\",className:\"g-type-display-4\"}),\"Optional\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"storage_name\"),\" (string) - The name of the storage that will be used to find the first matching storage in the list of existing templates.\"),mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),\"Note that \",mdx(\"inlineCode\",{parentName:\"p\"},\"storage_uuid\"),\" parameter has higher priority. You should use either \",mdx(\"inlineCode\",{parentName:\"p\"},\"storage_uuid\"),\" or \",mdx(\"inlineCode\",{parentName:\"p\"},\"storage_name\"),' for not strict matching (e.g \"ubuntu server 20.04\").')),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"template_prefix\"),\" (string) - The prefix to use for the generated template title. Defaults to \",mdx(\"inlineCode\",{parentName:\"p\"},\"custom-image\"),`.\nYou can use this option to easily differentiate between different templates.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"template_name\"),\" (string) - Similarly to \",mdx(\"inlineCode\",{parentName:\"p\"},\"template_prefix\"),`, but this will allow you to set the full template name and not just the prefix.\nDefaults to an empty string, meaning the name will be the storage title.\nYou can use this option to easily differentiate between different templates.\nIt cannot be used in conjunction with the prefix setting.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"storage_size\"),\" (int) - The storage size in gigabytes. Defaults to \",mdx(\"inlineCode\",{parentName:\"p\"},\"25\"),`.\nChanging this value is useful if you aim to build a template for larger server configurations where the preconfigured server disk is larger than 25 GB.\nThe operating system disk can also be later extended if needed. Note that Windows templates require large storage size, than default 25 Gb.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"state_timeout_duration\"),' (duration string | ex: \"1h5m2s\") - The amount of time to wait for resource state changes. Defaults to ',mdx(\"inlineCode\",{parentName:\"p\"},\"5m\"),\".\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"boot_wait\"),` (duration string | ex: \"1h5m2s\") - The amount of time to wait after booting the server. Defaults to '0s'`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"clone_zones\"),` ([]string) - The array of extra zones (locations) where created templates should be cloned.\nNote that default `,mdx(\"inlineCode\",{parentName:\"p\"},\"state_timeout_duration\"),\" is not enough for cloning, better to increase a value depending on storage size.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"network_interfaces\"),\" ([]NetworkInterface) - The array of network interfaces to request during the creation of the server for building the packer image.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"ssh_private_key_path\"),\" (string) - Path to SSH Private Key that will be used for provisioning and stored in the template.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"ssh_public_key_path\"),\" (string) - Path to SSH Public Key that will be used for provisioning.\"))),mdx(\"h4\",a({},{id:\"user-content-network-interfaces-object-(networkinterface)\",\"data-text-content\":\"Network Interfaces object NetworkInterface\",className:\"g-type-display-5\"}),\"Network Interfaces object (NetworkInterface)\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"ip_addresses\"),\" ([]IPAddress) - List of IP Addresses\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"type\"),\" (InterfaceType) - Network type (e.g. public, utility, private)\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"network\"),\" (string) - Network UUID when connecting private network\"))),mdx(\"h4\",a({},{id:\"user-content-ip-address-object-(ipaddress)\",\"data-text-content\":\"IP Address object IPAddress\",className:\"g-type-display-5\"}),\"IP Address object (IPAddress)\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"default\"),\" (bool) - Default IP address. When set to \",mdx(\"inlineCode\",{parentName:\"p\"},\"true\"),\" SSH communicator will connect to this IP after boot.\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"family\"),\" (string) - IP address family (IPv4 or IPv6)\")),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",a({parentName:\"li\"},{className:\"g-type-long-body\"}),mdx(\"inlineCode\",{parentName:\"p\"},\"address\"),\" (string) - IP address. Note that at the moment using floating IPs is not supported.\"))),mdx(\"h3\",a({},{id:\"user-content-example-usage\",\"data-text-content\":\"Example Usage\",className:\"g-type-display-4\"}),\"Example Usage\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Here is a sample template, which you can also find in the \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://github.com/UpCloudLtd/packer-plugin-upcloud/tree/main/example\"}),\"example\"),` directory.\nIt reads your UpCloud API credentials from the environment variables, creates an Ubuntu 20.04 LTS server in the `,mdx(\"inlineCode\",{parentName:\"p\"},\"nl-ams1\"),\" region and authorizes root user to loggin with your public SSH key.\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"packer\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"required_plugins\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"upcloud\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"version\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\">=v1.0.0\"'),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"source\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"github.com/UpCloudLtd/upcloud\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"username\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"description\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"UpCloud API username\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"env\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"UPCLOUD_USERNAME\"'),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"password\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"description\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"UpCloud API password\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"env\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"UPCLOUD_PASSWORD\"'),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"sensitive\"),\"   \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"ssh_public_key\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"description\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"Path to your SSH public key file\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"~/.ssh/id_rsa.pub\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,\"source \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"upcloud\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"test\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"username\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"username\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"password\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"password\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"zone\"),\"            \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"nl-ams1\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"storage_name\"),\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"ubuntu server 20.04\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"template_prefix\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"ubuntu-server\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"build\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"sources\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"source.upcloud.test\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"provisioner\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"shell\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"inline\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"apt-get update\"'),\",\",`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"apt-get upgrade -y\"'),\",\",`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),`\"echo '`,mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"file\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"ssh_public_key\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),`' | tee /root/.ssh/authorized_keys\"`),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`)),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"Configuration reads your SSH public key from the default location \",mdx(\"inlineCode\",{parentName:\"p\"},\"~/.ssh/id_rsa.pub\"),\". You can overwrite variables using command line argumen \",mdx(\"inlineCode\",{parentName:\"p\"},\"-var\"),\":\"),mdx(\"pre\",a({},{className:\"language-sh\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-sh\"}),'$\\xA0packer build -var=\"ssh_public_key=/some/other/path/id_rsa.pub\"',`\n`)),mdx(\"h4\",a({},{id:\"user-content-network-interfaces\",\"data-text-content\":\"Network interfaces\",className:\"g-type-display-5\"}),\"Network interfaces\"),mdx(\"p\",a({},{className:\"g-type-long-body\"}),\"This template uses \",mdx(\"inlineCode\",{parentName:\"p\"},\"network_interfaces\"),\" to define network interfaces to be used during the creation of the server for building the packer image.\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"packer\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"required_plugins\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"upcloud\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"version\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\">=v1.0.0\"'),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"source\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"github.com/UpCloudLtd/upcloud\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"username\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"description\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"UpCloud API username\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"env\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"UPCLOUD_USERNAME\"'),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"password\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"description\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"UpCloud API password\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"env\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"UPCLOUD_PASSWORD\"'),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"sensitive\"),\"   \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"ssh_public_key\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"description\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"Path to your SSH public key file\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"~/.ssh/id_rsa.pub\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,\"source \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"upcloud\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"test\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"username\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"username\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"password\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"password\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"zone\"),\"            \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"nl-ams1\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"storage_name\"),\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"ubuntu server 20.04\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"template_prefix\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"ubuntu-server\"'),`\n`,`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"network_interfaces\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"ip_addresses\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"family\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"IPv4\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"public\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"network_interfaces\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"ip_addresses\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"family\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"IPv4\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"utility\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"build\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"sources\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"source.upcloud.test\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"provisioner\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"shell\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"inline\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"apt-get update\"'),\",\",`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"apt-get upgrade -y\"'),\",\",`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),`\"echo '`,mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"file\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"ssh_public_key\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),`' | tee /root/.ssh/authorized_keys\"`),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`)),mdx(\"h4\",a({},{id:\"user-content-ipv6-network-interfaces\",\"data-text-content\":\"IPv6 network interfaces\",className:\"g-type-display-5\"}),\"IPv6 network interfaces\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"packer\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"required_plugins\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"upcloud\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"version\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\">=v1.0.0\"'),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"source\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"github.com/UpCloudLtd/upcloud\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"username\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"description\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"UpCloud API username\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"env\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"UPCLOUD_USERNAME\"'),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"password\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"description\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"UpCloud API password\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"env\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"UPCLOUD_PASSWORD\"'),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"sensitive\"),\"   \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"ssh_public_key\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"description\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"Path to your SSH public key file\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"~/.ssh/id_rsa.pub\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,\"source \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"upcloud\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"test\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"username\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"username\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"password\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"password\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"zone\"),\"            \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"fi-hel1\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"storage_name\"),\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"Debian GNU/Linux 11 (Bullseye)\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"template_prefix\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"debian11\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"network_interfaces\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"ip_addresses\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"family\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"IPv6\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"public\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"communicator\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"ssh\"'),`\n`,`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# Use bastion host if no IPv6 connection is available\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),'# ssh_bastion_username         = \"<bastion_username>\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),'# ssh_bastion_host             = \"<bastion_host>\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),'# ssh_bastion_private_key_file = \"<bastion_private_key_file>\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"build\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"sources\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"source.upcloud.test\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"provisioner\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"shell\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"environment_vars\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"DEBIAN_FRONTEND=noninteractive\"'),\",\",`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"APT_LISTCHANGES_FRONTEND=none\"'),\",\",`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"inline\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"apt-get update\"'),\",\",`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"apt-get upgrade -y\"'),\",\",`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),`\"echo '`,mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"file\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"ssh_public_key\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),`' | tee /root/.ssh/authorized_keys\"`),\",\",`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`)),mdx(\"h4\",a({},{id:\"user-content-private-network-interfaces\",\"data-text-content\":\"Private network interfaces\",className:\"g-type-display-5\"}),\"Private network interfaces\"),mdx(\"pre\",a({},{className:\"language-hcl\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-hcl\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"packer\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"required_plugins\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"upcloud\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"version\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\">=v1.0.0\"'),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"source\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"github.com/UpCloudLtd/upcloud\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"username\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"description\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"UpCloud API username\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"env\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"UPCLOUD_USERNAME\"'),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"password\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"description\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"UpCloud API password\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"env\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token string\"}),'\"UPCLOUD_PASSWORD\"'),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"sensitive\"),\"   \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"variable\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"ssh_public_key\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" string\",`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"description\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"Path to your SSH public key file\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\"     \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"~/.ssh/id_rsa.pub\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,\"source \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"upcloud\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"test\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"username\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"username\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"password\"),\"        \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"',mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"password\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),'\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"zone\"),\"            \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"fi-hel1\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"storage_name\"),\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"Debian GNU/Linux 11 (Bullseye)\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"template_prefix\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"debian11\"'),`\n`,`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"network_interfaces\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"ip_addresses\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"default\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token boolean\"}),\"true\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"address\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"10.0.0.20\"'),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"family\"),\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"IPv4\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"network\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"<network_uuid>\"'),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"type\"),\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"private\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"communicator\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"ssh\"'),`\n`,`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),\"# Use bastion host to get access to private network\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),'# ssh_bastion_username         = \"<bastion_username>\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),'# ssh_bastion_host             = \"<bastion_host>\"'),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token comment\"}),'# ssh_bastion_private_key_file = \"<bastion_private_key_file>\"'),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"build\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"sources\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"source.upcloud.test\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"provisioner\",mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),' \"shell\" ')),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"{\"),`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"environment_vars\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"DEBIAN_FRONTEND=noninteractive\"'),\",\",`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"APT_LISTCHANGES_FRONTEND=none\"'),\",\",`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token property\"}),\"inline\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"apt-get update\"'),\",\",`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"apt-get upgrade -y\"'),\",\",`\n`,\"      \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),`\"echo '`,mdx(\"span\",a({parentName:\"span\"},{className:\"token interpolation\"}),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"$\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"{\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token function\"}),\"file\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token keyword\"}),\"var\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token type variable\"}),\"ssh_public_key\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\"}\")),`' | tee /root/.ssh/authorized_keys\"`),\",\",`\n`,\"    \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,\"  \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"}\"),`\n`,`\n`)))}MDXContent.isMDXComponent=!0;\n","scope":{}},"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Packer","url":"/packer"},{"title":"Integrations","url":"/packer/integrations"},{"title":"UpCloud","url":"/packer/integrations/UpCloudLtd/upcloud","isCurrentPage":false},{"title":"v1.5.3","url":"/packer/integrations/UpCloudLtd/upcloud/v1.5.3","isCurrentPage":false},{"title":"Components"},{"title":"Builder"},{"title":"UpCloud","url":"/packer/integrations/UpCloudLtd/upcloud/latest/components/builder/upcloud","isCurrentPage":true}]},"__N_SSG":true}