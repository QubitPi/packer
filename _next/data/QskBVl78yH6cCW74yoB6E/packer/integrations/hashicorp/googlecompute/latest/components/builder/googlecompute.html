<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><title>Google Cloud Platform Builder | Integrations | Packer | HashiCorp Developer</title><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta property="og:locale" content="en_US"/><meta property="og:type" content="website"/><meta property="article:publisher" content="https://www.facebook.com/HashiCorp/"/><meta name="twitter:site" content="@HashiCorp"/><meta name="twitter:card" content="summary_large_image"/><meta name="theme-color" content="#000"/><meta name="description" property="og:description" content="Explore Packer product documentation, tutorials, and examples."/><meta name="twitter:description" content="Explore Packer product documentation, tutorials, and examples."/><meta property="og:site_name" content="Google Cloud Platform Builder | Integrations | Packer | HashiCorp Developer"/><meta property="og:title" content="Google Cloud Platform Builder | Integrations | Packer | HashiCorp Developer"/><meta property="og:image" content="https://developer.hashicorp.com/og-image/packer.jpg"/><link rel="canonical" href="https://developer.hashicorp.com/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute"/><link rel="icon" href="/favicon.ico" sizes="48x48"/><link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="google-site-verification" content="zRQZqfAsOX-ypXfU0mzAIzb5rUvj5fA4Zw2jWJRN-JI"/><meta name="ahrefs-site-verification" content="9d739b21c466a84dae91df1c79396081a9072152e64f765c9390fed6f249fb84"/><meta name="zd-site-verification" content="xnvnvv1i0wl4tf0pzaymb" data-product="hcp"/><meta name="zd-site-verification" content="36fp2i1pj67d8cjtzf4fi9" data-product="terraform"/><meta name="zd-site-verification" content="nbe87kfyp1sck7b13vj1i" data-product="packer"/><meta name="zd-site-verification" content="wvsmmqa1cfb9am9zlwfj" data-product="consul"/><meta name="zd-site-verification" content="cw22oopfwr68ujj0n5pn9i" data-product="boundary"/><meta name="zd-site-verification" content="lkslvganwfgfqfwpdeicgh" data-product="vault"/><meta name="zd-site-verification" content="jl2wp2hoej9rz6c8rmqdns" data-product="nomad"/><meta name="zd-site-verification" content="2eb0cu6xceo73t0038m0tb" data-product="waypoint"/><meta name="zd-site-verification" content="n52xisxdf3higs2q9kuogd" data-product="vagrant"/><meta name="twitter:image" content="https://developer.hashicorp.com/og-image/packer.jpg"/><link rel="prefetch" href="https://www.datadoghq-browser-agent.com/datadog-rum-v4.js"/><script type="application/ld+json">[{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Developer","item":"https://developer.hashicorp.com/"},{"@type":"ListItem","position":2,"name":"Packer","item":"https://developer.hashicorp.com/packer"},{"@type":"ListItem","position":3,"name":"Integrations","item":"https://developer.hashicorp.com/packer/integrations"},{"@type":"ListItem","position":4,"name":"Google Cloud Platform","item":"https://developer.hashicorp.com/packer/integrations/hashicorp/googlecompute"},{"@type":"ListItem","position":5,"name":"v1.1.5","item":"https://developer.hashicorp.com/packer/integrations/hashicorp/googlecompute/v1.1.5"},{"@type":"ListItem","position":6,"name":"Google Cloud Platform","item":"https://developer.hashicorp.com/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute"}]}]</script><meta name="next-head-count" content="32"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/0a3ef9c875075792.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0a3ef9c875075792.css" data-n-g=""/><link rel="preload" href="/_next/static/css/3ad6c3802e156a79.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3ad6c3802e156a79.css" data-n-p=""/><link rel="preload" href="/_next/static/css/686568afb8217cc6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/686568afb8217cc6.css" data-n-p=""/><link rel="preload" href="/_next/static/css/eb7499f4942666a6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/eb7499f4942666a6.css" data-n-p=""/><link rel="preload" href="/_next/static/css/f1847941b1d3db61.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f1847941b1d3db61.css" data-n-p=""/><link rel="preload" href="/_next/static/css/c4367c2f8a8aadc4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c4367c2f8a8aadc4.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-106a414ea0458477.js" defer=""></script><script src="/_next/static/chunks/framework-56eb74ff06128874.js" defer=""></script><script src="/_next/static/chunks/main-0785f91db64576b8.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f12faad372f07f6f.js" defer=""></script><script src="/_next/static/chunks/4819-bab3fb94ee0c378b.js" defer=""></script><script src="/_next/static/chunks/3713-0a83bd3cd768e186.js" defer=""></script><script src="/_next/static/chunks/1965-de91f49a7b70adcb.js" defer=""></script><script src="/_next/static/chunks/1306-699e21fe04afb846.js" defer=""></script><script src="/_next/static/chunks/563-ec2e839822df3139.js" defer=""></script><script src="/_next/static/chunks/3652-ce43471e7283c3ba.js" defer=""></script><script src="/_next/static/chunks/4762-e57bd9d3b7453da8.js" defer=""></script><script src="/_next/static/chunks/9325-9027f7f3bd62792d.js" defer=""></script><script src="/_next/static/chunks/2291-52f1771184c676af.js" defer=""></script><script src="/_next/static/chunks/1825-93559152dbf033f6.js" defer=""></script><script src="/_next/static/chunks/2460-e1e3286f1330a793.js" defer=""></script><script src="/_next/static/chunks/6075-eff04cc051a0a6a9.js" defer=""></script><script src="/_next/static/chunks/3367-62761ef699b6ef58.js" defer=""></script><script src="/_next/static/chunks/pages/%5BproductSlug%5D/integrations/%5BorganizationSlug%5D/%5BintegrationSlug%5D/%5BintegrationVersion%5D/components/%5BcomponentType%5D/%5BcomponentSlug%5D-bb0178fe066e239b.js" defer=""></script><script src="/_next/static/QskBVl78yH6cCW74yoB6E/_buildManifest.js" defer=""></script><script src="/_next/static/QskBVl78yH6cCW74yoB6E/_ssgManifest.js" defer=""></script></head><body><script>!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://artemis.hashicorp.com/script/"+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics._cdn="https://artemis.hashicorp.com";analytics.SNIPPET_VERSION="4.1.0";}}();</script><div id="__next"><div class="style_root__dZhZu"><a href="https://hashicorp.com/conferences/hashidays" class="style_linkElem__hCESK"><span class="style_textContainer__6CuI7 g-grid-container"><span class="style_tag__jbHGz g-type-body-small-x-strong">HashiDays<!-- --> </span><span class="style_text__rwS0u g-type-body-small">One conference. Three cities.<span class="style_linkText__E8GJf g-type-body-small-x-strong"> <!-- -->Find a city near you</span></span></span></a><button class="style_closeButton__57J9w"><div><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 5 5 15M5 5l10 10"/></svg></div><span style="position:absolute;border:0;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;word-wrap:normal">Dismiss alert</span></button></div><script type="text/javascript">
(function checkDismissAlertBanner() {
  try {
    if (document.cookie.includes('banner_one-conference.-three-cities.=1')) {
      const element = document.querySelector('.style_root__dZhZu')
      element.classList.remove('style_isShown__D4mb6')
    }
  } catch (_) {
    // do nothing
  }
})()
</script><script>!function(){try{var d=document.documentElement,n='data-theme',s='setAttribute';var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';d[s](n,'dark')}else{d.style.colorScheme = 'light';d[s](n,'light')}}else if(e){d[s](n,e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="core-dev-dot-layout_root__MT1PZ"><div class="base-layout_root___qiZs" data-layout="base-new"><div class="base-layout_header__XhkxS"><header class="navigation-header_root__oE_HT"><div class="navigation-header_leftSide__V0xlc"><div class="product-page-content_productsDropdown__haUyw"><div class="dropdown-menu_root__Hwy5S"><div class="dropdown-menu_activatorWrapper__LxPRt"><button aria-controls="navigation-header-menu-react-aria-1" aria-expanded="false" aria-label="Main menu" class="dropdown-menu_activator__xXb00 g-focus-ring-from-box-shadow-dark product-page-content_productsDropdownButton__bnKKs"><span class="dropdown-menu_activatorLeadingIcon__YQQlH"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true" class="product-page-content_productsDropdownIcon__gXtly"><g fill="currentColor"><path d="M10.336 1.5L2 6.268v11.456l3.131 1.793V8.061l5.205-2.979V1.5z"></path><path d="M13.664 1.5v9.123h-3.328V7.219L7.203 9.012V20.7l3.133 1.796V13.4h3.328v3.381l3.131-1.793V3.293L13.664 1.5z"></path><path d="M22 17.732L13.664 22.5v-3.582l5.203-2.98V4.484L22 6.276v11.456z"></path></g></svg></span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="dropdown-menu_activatorTrailingIcon__r_cCd"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></button></div><div class="dropdown-menu_dropdownContainer__AZWxN product-page-content_productsDropdownPane__bcdWz" id="navigation-header-menu-react-aria-1" style="display:none"><ul class="dropdown-menu_itemGroup__GEq4r"><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" href="/"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M7.846 2.574a.25.25 0 01.308 0l5.25 4.12a.25.25 0 01.096.196v7.36a.75.75 0 001.5 0V6.89a1.75 1.75 0 00-.67-1.377L9.08 1.394a1.75 1.75 0 00-2.16 0l-5.25 4.12A1.75 1.75 0 001 6.89v7.36a.75.75 0 001.5 0V6.89a.25.25 0 01.096-.196l5.25-4.12z"></path><path d="M6.5 14.25V10.5h3v3.75a.75.75 0 001.5 0v-4C11 9.56 10.44 9 9.75 9h-3.5C5.56 9 5 9.56 5 10.25v4a.75.75 0 001.5 0z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">HashiCorp Developer</span></div></div></a></li></ul><hr class="dropdown-menu_itemGroupDivider__X38aR"/><ul class="dropdown-menu_itemGroup__GEq4r"><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" href="/hcp"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M6.835.6L1 3.96v8.074l2.192 1.264V5.224l3.643-2.1V.6z"></path><path d="M9.165.6v6.43h-2.33v-2.4L4.642 5.894v8.237l2.193 1.266v-6.41h2.33v2.383l2.192-1.264V1.864L9.165.6z"></path><path d="M15 12.04L9.165 15.4v-2.525l3.642-2.1V2.703L15 3.966v8.073z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">HashiCorp Cloud Platform</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" href="/terraform"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-terraform-brand)"><path d="M1 0v5.05l4.349 2.527V2.526L1 0zM10.175 5.344l-4.35-2.525v5.05l4.35 2.527V5.344zM10.651 10.396V5.344L15 2.819v5.05l-4.349 2.527zM10.174 16l-4.349-2.526v-5.05l4.349 2.525V16z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Terraform</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" href="/packer"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-packer-brand)"><path d="M5.163 0l5.762 3.247c1.138.646 2.074 2.085 2.075 3.2v4.963c0 1.123-.933 1.502-2.074.858L9.083 11.23V4.469l-3.92-2.216V0z"></path><path d="M8.3 4.953L3 1.956v11.047L8.3 16V4.953z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Packer</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" href="/consul"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-consul-brand)"><path d="M4.737 14.193A7 7 0 008.006 15a6.98 6.98 0 004.735-1.847l-1.66-1.737a4.6 4.6 0 110-6.828l1.66-1.738a7 7 0 10-8.004 11.343zM13.32 11.402a.573.573 0 10.637-.953.573.573 0 00-.637.953z"></path><path d="M7.96 9.517a1.517 1.517 0 11-.012-3.034 1.517 1.517 0 01.013 3.034zM13.978 9.447a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 9.472a.574.574 0 110-1.148.574.574 0 010 1.148zM13.978 7.514a.574.574 0 10.637-.954.574.574 0 00-.637.954zM12.59 7.675a.574.574 0 110-1.148.574.574 0 010 1.148zM13.353 5.585a.574.574 0 10.635-.956.574.574 0 00-.635.956z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Consul</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" href="/vault"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="var(--token-color-vault-brand)" d="M0 0l7.971 15.516L16 0H0zm6.732 6.16h-1.27V4.89h1.27v1.27zm0-1.906h-1.27V2.985h1.27v1.269zm1.904 3.81h-1.27v-1.27h1.27v1.27zm0-1.905h-1.27V4.89h1.27v1.27zm0-1.905h-1.27V2.985h1.27v1.269zm1.894 1.905H9.26V4.89h1.27v1.27zM9.26 4.254V2.985h1.27v1.269H9.26z"></path></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Vault</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" href="/boundary"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-boundary-brand)"><path d="M4.81 15v-1.085h2.25v-.67H5.968v-1.093h5.149L8.726 8l2.392-4.154H5.84v5.76H3V1h9.775l1.631 2.832L12.006 8l2.448 4.252L12.872 15H4.81z"></path><path d="M5.248 12.152h-1.09v1.092h1.09v-1.092zM3 13.907h1.09v1.092H3v-1.092z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Boundary</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" href="/nomad"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="var(--token-color-nomad-brand)" d="M8 0L1 4v8l7 4 7-4V4L8 0zm3.119 8.797L9.254 9.863 7.001 8.65v2.549l-2.118 1.33v-5.33l1.68-1.018 2.332 1.216V4.794l2.23-1.322-.006 5.325z"></path></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Nomad</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" href="/waypoint"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-waypoint-brand)"><path d="M4 5.312h1.334L10 13.4l3.334-5.777L10.666 3H8l2.666 4.623L10 8.778 6.667 3H0l6 10.4 1.333-2.31L4 5.311zM14.002 6.463L16 3h-3.996l1.998 3.463z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Waypoint</span></div></div></a></li><li><a class="dropdown-menu_itemLink__92M_R g-focus-ring-from-box-shadow" href="/vagrant"><div class="dropdown-menu_itemLinkContent__PATCl"><div class="dropdown-menu_leftAlignedItemLinkContent__d9pe_"><span class="dropdown-menu_leftAlignedItemLinkContentIcon__Im2L5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="#1868F2"><path d="M1 1.559h4.667v3.4l4.666 9.482H5.667L1 4.959v-3.4zM10.333 4.96V1.559H15v3.4l-4.269 8.672-2.335-4.74 1.937-3.931z"></path></g></svg></span><span class="text_root__r0DFB hds-typography-body-100 hds-font-weight-regular dropdown-menu_itemText__Ba9wg">Vagrant</span></div></div></a></li></ul></div></div></div><div class="product-page-content_productLinkAndNav__YTzcr"><a aria-label="Packer home" class="product-icon-text-link_root__bNTSz g-focus-ring-from-box-shadow-dark" href="/packer"><div class="product-icon-text-lockup_root__358wV"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="product-icon-text-lockup_icon__Zp_5o"><g fill="var(--token-color-packer-brand)"><path d="M5.163 0l5.762 3.247c1.138.646 2.074 2.085 2.075 3.2v4.963c0 1.123-.933 1.502-2.074.858L9.083 11.23V4.469l-3.92-2.216V0z"></path><path d="M8.3 4.953L3 1.956v11.047L8.3 16V4.953z"></path></g></svg><span class="product-icon-text-lockup_text__nHTL7 hds-typography-body-200">Packer</span></div></a><nav class="nav-bar-list-container_nav__C_i0_"><ul class="nav-bar-list-container_ul___04HI"><li><a aria-label="Packer Install" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/packer/install"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Install</span></a></li><li><a aria-label="Packer Tutorials" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/packer/tutorials"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Tutorials</span></a></li><li><a aria-label="Packer Documentation" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/packer/docs"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Documentation</span></a></li><li><a aria-label="Packer Guides" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/packer/guides"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Guides</span></a></li><li><a aria-label="Packer Integrations" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" href="/packer/integrations"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Integrations</span></a></li><li><a aria-label="Packer Try Cloud" class="primary-nav-link_root__RXZIC g-focus-ring-from-box-shadow-dark" aria-describedby="opens-in-new-tab-label-react-aria-18" target="_blank" href="https://portal.cloud.hashicorp.com/sign-up"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium primary-nav-link_linkText__58O0C">Try Cloud</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-18">(opens in new tab)</span></li></ul></nav></div></div><div class="navigation-header_rightSide___Vvh_"><button aria-label="Search" class="command-bar-activator_root__qgVMy g-focus-ring-from-box-shadow-dark"><span class="command-bar-activator_left__ATQTg"><span class="command-bar-activator_leadingIcon__jECP5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M6.344.969a5.375 5.375 0 103.233 9.669l4.174 4.174a.75.75 0 001.06-1.061l-4.173-4.174A5.375 5.375 0 006.344.97zM2.469 6.344a3.875 3.875 0 117.75 0 3.875 3.875 0 01-7.75 0z" clip-rule="evenodd"></path></svg></span><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular command-bar-activator_text__pTZN_">Search</span></span><span class="command-bar-activator_right__XejfJ"><span class="g-screen-reader-only">Command or control key</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral-dark-mode__VC3Ba command-bar-activator_keyBadge__xnKpi"><div class="cmd-ctrl-icon_root___TToz"><svg xmlns="http://www.w3.org/2000/svg" width="41" height="11" fill="none" viewBox="0 0 41 11"><path fill="#fff" fill-rule="evenodd" d="M4.125 2.063V3h2.25v-.937a2.062 2.062 0 1 1 2.063 2.062H7.5v2.25h.938a2.062 2.062 0 1 1-2.063 2.063V7.5h-2.25v.938a2.062 2.062 0 1 1-2.062-2.063H3v-2.25h-.937a2.062 2.062 0 1 1 2.062-2.062m-2.062-.938a.937.937 0 1 0 0 1.875H3v-.937a.937.937 0 0 0-.937-.938M7.5 7.5v.938a.937.937 0 1 0 .938-.938zM6.375 6.375v-2.25h-2.25v2.25zM2.063 7.5H3v.938a.937.937 0 1 1-.937-.938M7.5 3h.938a.937.937 0 1 0-.938-.937z" clip-rule="evenodd"/><path fill="#fff" d="M15.09 10.5 18.085 0h-1.097L14 10.5zM26.387 5.308c-.183-1.445-1.263-2.534-3.05-2.534C21.264 2.774 20 4.247 20 6.61c0 2.41 1.27 3.89 3.344 3.89 1.76 0 2.86-1.034 3.043-2.5H25.02c-.184.808-.792 1.247-1.682 1.247-1.172 0-1.898-.994-1.898-2.637 0-1.61.72-2.583 1.898-2.583.942 0 1.518.555 1.681 1.281zM28.6 1.041v1.897h-1.133v1.178H28.6v4.281c0 1.432.622 2.007 2.186 2.007.275 0 .537-.034.766-.075V9.158c-.196.02-.32.034-.537.034-.7 0-1.008-.35-1.008-1.15V4.115h1.545V2.938h-1.545V1.041zM33.207 10.356h1.407V5.911c0-1.048.752-1.767 1.819-1.767.249 0 .667.048.785.082V2.842a3.372 3.372 0 0 0-.628-.054c-.93 0-1.721.527-1.924 1.26h-.105v-1.13h-1.354zM38.638 10.356h1.407V0h-1.407z"/></svg></div></span><span class="g-screen-reader-only">K key</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral-dark-mode__VC3Ba command-bar-activator_keyBadge__xnKpi"><div class="k-icon_root__a_5pR"><svg xmlns="http://www.w3.org/2000/svg" width="8" height="10" fill="none" viewBox="0 0 8 10"><path fill="#fff" d="M1.512 9.84v-3l.986-1.147L5.445 9.84h1.704L3.46 4.745 6.857.84H5.244L1.61 5.094h-.098V.84H.15v9z"/></svg></div></span></span></button><div class="navigation-header_authenticationControls__EP1LY"><div class="disclosure_root__rcBaW dropdown-disclosure_root__pzZlN dropdown-disclosure_list-position--right__WP_Kj"><button aria-controls="disclosure-react-aria-19-content" aria-expanded="false" aria-label="User menu" class="disclosure_activator__pORI0 activator_root__pOfAQ dropdown-disclosure_activator__nGgNo navigation-header_userDropdownDisclosureActivator__RayIV g-focus-ring-from-box-shadow-dark activator_hasIcon__5HO6W g-focus-ring-from-box-shadow"><span class="activator_childrenWrapper__kaK0w"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><g fill="currentColor"><path fill-rule="evenodd" d="M12 3a5 5 0 100 10 5 5 0 000-10zM8.5 8a3.5 3.5 0 117 0 3.5 3.5 0 01-7 0z" clip-rule="evenodd"></path><path d="M7.75 14.5A4.75 4.75 0 003 19.25v1a.75.75 0 001.5 0v-1A3.25 3.25 0 017.75 16h8.5a3.25 3.25 0 013.25 3.25v1a.75.75 0 001.5 0v-1a4.75 4.75 0 00-4.75-4.75h-8.5z"></path></g></svg></span><span class="activator_chevronWrapper__4_AVG"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></span></button><div class="disclosure_contentContainer__QQ4kt dropdown-disclosure_content__ZZRPG undefined" id="disclosure-react-aria-19-content"><ul class="dropdown-disclosure_list__urBXU"><li class="list-item_root__ZdUej"><button class="list-item_button__nXy5K g-focus-ring-from-box-shadow"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">Sign in</span></button></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/sign-up"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">Sign up</span></a></li><li class="list-item_root__ZdUej"><hr class="list-item_separator__cBVLs"/></li><li class="list-item_root__ZdUej user-dropdown-switcher_listItem__Q_GIj hds-font-weight-medium"><label class="theme-switcher_label__7Boh2 hds-typography-body-200" for="react-aria-21">Theme</label></li></ul></div></div></div><button aria-label="Open navigation menu" class="navigation-header_mobileMenuButton__74S4w"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" aria-hidden="true"><g fill="currentColor"><path d="M2 5.75A.75.75 0 012.75 5h18.5a.75.75 0 010 1.5H2.75A.75.75 0 012 5.75zM2 11.75a.75.75 0 01.75-.75h18.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75zM2.75 17a.75.75 0 000 1.5h18.5a.75.75 0 000-1.5H2.75z"></path></g></svg></button></div></header></div><div class="base-layout_contentArea__BMvQn"><div class="sidebar-sidecar-layout_root__h5rD8 sidebar-sidecar-layout_mainWidth-wide__TwGq8"><div class="mobile-menu-container_root__fPUFu sidebar-sidecar-layout_sidebarContainer__4fcF8"><div class="sidebar-sidecar-layout_sidebarContentWrapper__ftn5q"><div class="sidebar_sidebar___fTlC"><div class="sidebar_backToLinkWrapper__F6iLs"><div class="sidebar-back-to-link_root__z_Hj1"><a class="standalone-link_standaloneLink__ahuej g-focus-ring-from-box-shadow standalone-link_primary__ESNCA" href="/packer/integrations"><div class="standalone-link_standaloneLinkContents__4I2XN standalone-link_medium__J2yVM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M10.795 3.235a.75.75 0 01-.03 1.06L6.842 8l3.923 3.705a.75.75 0 01-1.03 1.09l-4.5-4.25a.75.75 0 010-1.09l4.5-4.25a.75.75 0 011.06.03z" clip-rule="evenodd"></path></svg><span class="standalone-link_text__7GEyG">Packer Integrations</span></div></a></div></div><nav aria-labelledby="sidebar-label" class="sidebar_nav__IworY" id="sidebar-nav"><div><h2 class="sidebar-headings_root__tGfxC" id="sidebar-label"></h2></div><ul class="sidebar_navList__4Rg4g"><li><a class="sidebar-nav-highlight-item_root___pPhp g-focus-ring-from-box-shadow sidebar-nav-highlight-item_theme-packer__I5KHY" href="/packer/integrations/hashicorp/googlecompute"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="sidebar-nav-highlight-item_icon__G8JxG"><g fill="var(--token-color-packer-brand)"><path d="M5.163 0l5.762 3.247c1.138.646 2.074 2.085 2.075 3.2v4.963c0 1.123-.933 1.502-2.074.858L9.083 11.23V4.469l-3.92-2.216V0z"></path><path d="M8.3 4.953L3 1.956v11.047L8.3 16V4.953z"></path></g></svg><span class="sidebar-nav-highlight-item_text__VORFJ hds-typography-body-200">Google Cloud Platform</span></a></li><li><button aria-controls="undefined-list" aria-expanded="true" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="undefined-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Builders</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button><ul id="undefined-list"><li><a aria-current="page" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Google Cloud Platform</span></a></li></ul></li><li><button aria-controls="undefined-list" aria-expanded="true" class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" id="undefined-button"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Post-Processors</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></div></button><ul id="undefined-list"><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/post-processor/googlecompute-export"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Google Cloud Platform Image Exporter</span></a></li><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/post-processor/googlecompute-import"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Google Cloud Platform Image Import</span></a></li></ul></li></ul><hr class="sidebar-horizontal-rule_root__UY7oh"/><ul class="sidebar_navList__4Rg4g"><li><h3 class="sidebar-headings_root__tGfxC">Resources</h3></li><li><a class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" href="/tutorials/library?product=packer"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Tutorial Library</span></a></li><li><a aria-label="Community Forum. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-28" target="_blank" href="https://discuss.hashicorp.com/c/packer/23"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Community Forum</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-28">(opens in new tab)</span></li><li><a aria-label="Support. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-29" target="_blank" href="https://www.hashicorp.com/customer-success"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">Support</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-29">(opens in new tab)</span></li><li><a aria-label="GitHub. Opens in a new tab." class="sidebar-nav-menu-item_sidebarNavMenuItem__PiyI8 g-focus-ring-from-box-shadow" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-30" target="_blank" href="https://github.com/hashicorp/packer"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular sidebar-nav-menu-item_navMenuItemLabel__tJHwX">GitHub</span><div class="sidebar-nav-menu-item_rightIconsContainer__hynke"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-30">(opens in new tab)</span></li></ul></nav></div></div></div><div class="sidebar-sidecar-layout_contentWrapper__Z5BK4"><div class="sidebar-sidecar-layout_paddedAreaWrapper___S_Ff"><div class="sidebar-sidecar-layout_breadcrumbContainer__3uz7P"><div class="sidebar-sidecar-layout_breadcrumbMaxWidth__coOcu"><nav aria-label="Breadcrumb" class="breadcrumb-bar_root__wd_C5"><ol class="breadcrumb-bar_listRoot__8eupO"><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" href="/">Developer</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" href="/packer">Packer</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" href="/packer/integrations">Integrations</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute">Google Cloud Platform</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><a class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/v1.1.5">v1.1.5</a></li><li class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium breadcrumb-bar_listItem__2sevd"><span class="breadcrumb-bar_breadcrumbText__JvOrd g-focus-ring-from-box-shadow" aria-current="page">Google Cloud Platform</span></li></ol></nav></div></div><div class="sidebar-sidecar-layout_mainAndSidecar__UDm3Z"><main id="main" class="sidebar-sidecar-layout_main__0SN51"><div class="hds-surface-base card_root__RyqjV content-header-card_contentHeaderCard__SDMMP style_header__b3NdM"><div class="content-header-card_cardTop__GTpii"><span class="icon-tile_root__ShC0s icon-tile_size-large__NxGIv icon-tile_color-packer__LRaQF content-header-card_icon__A1Xna"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="var(--token-color-packer-brand)"><path d="M5.163 0l5.762 3.247c1.138.646 2.074 2.085 2.075 3.2v4.963c0 1.123-.933 1.502-2.074.858L9.083 11.23V4.469l-3.92-2.216V0z"></path><path d="M8.3 4.953L3 1.956v11.047L8.3 16V4.953z"></path></g></svg></span><div class="content-header-card_content__XPCtf"><div class="content-header-card_upper__PQsUG"><div class="disclosure_root__rcBaW dropdown-disclosure_root__pzZlN dropdown-disclosure_list-position--right__WP_Kj content-header-card_dropdown__Gt1Vp g-hide-on-desktop g-hide-on-tablet"><button aria-controls="disclosure-react-aria-36-content" aria-expanded="false" class="button_root__itF9E hds-font-weight-medium button_medium__Cm2eg button_secondary__m5f7i disclosure_activator__pORI0 activator_root__pOfAQ dropdown-disclosure_activator__nGgNo" type="button"><span>v1.1.5 (latest)</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="activator_chevronWrapper__4_AVG"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></button><div class="disclosure_contentContainer__QQ4kt dropdown-disclosure_content__ZZRPG undefined" id="disclosure-react-aria-36-content"><ul class="dropdown-disclosure_list__urBXU"><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/v1.1.4/components/builder/googlecompute"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.1.4</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/v1.1.3/components/builder/googlecompute"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.1.3</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/v1.1.2/components/builder/googlecompute"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.1.2</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/v1.1.1/components/builder/googlecompute"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.1.1</span></a></li></ul></div></div><div class="content-header-card_left__FSNcW"><div class="content-header-card_titleWrap__IAC6o"><span class="content-header-card_title__HGHfo hds-typography-display-300 from global, hds-font-weight-bold">Google Cloud Platform</span><p class="text_root__r0DFB hds-typography-body-100 hds-font-weight-medium content-header-card_attribution__yKU4q">@hashicorp</p></div><p class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular content-header-card_description__M_DkB">The googlecompute plugin can be used with HashiCorp Packer to create custom images on GCE.</p></div><div class="disclosure_root__rcBaW dropdown-disclosure_root__pzZlN dropdown-disclosure_list-position--right__WP_Kj content-header-card_dropdown__Gt1Vp g-hide-on-mobile"><button aria-controls="disclosure-react-aria-41-content" aria-expanded="false" class="button_root__itF9E hds-font-weight-medium button_medium__Cm2eg button_secondary__m5f7i disclosure_activator__pORI0 activator_root__pOfAQ dropdown-disclosure_activator__nGgNo" type="button"><span>v1.1.5 (latest)</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="activator_chevronWrapper__4_AVG"><path fill="currentColor" fill-rule="evenodd" d="M3.235 5.205a.75.75 0 011.06.03L8 9.158l3.705-3.923a.75.75 0 011.09 1.03l-4.25 4.5a.75.75 0 01-1.09 0l-4.25-4.5a.75.75 0 01.03-1.06z" clip-rule="evenodd"></path></svg></button><div class="disclosure_contentContainer__QQ4kt dropdown-disclosure_content__ZZRPG undefined" id="disclosure-react-aria-41-content"><ul class="dropdown-disclosure_list__urBXU"><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/v1.1.4/components/builder/googlecompute"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.1.4</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/v1.1.3/components/builder/googlecompute"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.1.3</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/v1.1.2/components/builder/googlecompute"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.1.2</span></a></li><li class="list-item_root__ZdUej"><a class="list-item_link__l6lDd g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/v1.1.1/components/builder/googlecompute"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-medium">v1.1.1</span></a></li></ul></div></div></div><div class="content-header-card_lower__ut_Dv"><ul class="badge-list_badgeList__l_z6s content-header-card_badgeList__I_FGK"><li class="badge-list_badge__mQSlF"><span data-state="tooltip-hidden" data-reach-tooltip-trigger=""><span class="g-screen-reader-only">Official</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral__NhUW0"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M6.835.6L1 3.96v8.074l2.192 1.264V5.224l3.643-2.1V.6z"></path><path d="M9.165.6v6.43h-2.33v-2.4L4.642 5.894v8.237l2.193 1.266v-6.41h2.33v2.383l2.192-1.264V1.864L9.165.6z"></path><path d="M15 12.04L9.165 15.4v-2.525l3.642-2.1V2.703L15 3.966v8.073z"></path></g></svg><span>Official</span></span></span></li><li class="badge-list_badge__mQSlF"><span data-state="tooltip-hidden" data-reach-tooltip-trigger=""><span class="g-screen-reader-only">HCP Ready</span><span aria-hidden="true" class="badge_root___Z7Nt badge_small__GI0Zk badge_filled-neutral__NhUW0"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9.78 7.28a.75.75 0 00-1.06-1.06l-.5.5a.75.75 0 001.06 1.06l.5-.5z"></path><path fill-rule="evenodd" d="M12.627 1.32a1.731 1.731 0 012.054 2.053c-.27 1.28-.686 3.19-1.103 4.859a3.625 3.625 0 01-.58 1.224c.002.015.002.03.002.044v2.441a1.75 1.75 0 01-.833 1.49l-2.021 1.244a1.75 1.75 0 01-2.284-.397l-1.27-1.587a2.028 2.028 0 01-1.08-.917 3.426 3.426 0 00-.542-.744 3.428 3.428 0 00-.744-.542c-.4-.223-.755-.61-.917-1.08l-1.587-1.27a1.75 1.75 0 01-.398-2.284l1.244-2.021A1.75 1.75 0 014.058 3H6.5l.044.001c.37-.263.777-.467 1.224-.579 1.669-.417 3.58-.833 4.859-1.103zm-5.43 9.956a.754.754 0 00-.167-.025.517.517 0 01-.209-.208 4.913 4.913 0 00-.79-1.073 4.913 4.913 0 00-1.074-.791.516.516 0 01-.208-.21.754.754 0 00-.025-.166l.002-.008c.255-.78.694-1.941 1.307-2.958.634-1.05 1.353-1.773 2.099-1.96 1.641-.41 3.53-.821 4.804-1.09a.231.231 0 01.277.277c-.269 1.274-.68 3.163-1.09 4.804-.187.746-.91 1.465-1.96 2.099-1.017.613-2.177 1.052-2.958 1.307a.173.173 0 01-.008.002zm1.139 1.193l.697.872a.25.25 0 00.327.057l2.021-1.244a.25.25 0 00.119-.213v-1.056c-.186.13-.375.252-.562.366-.88.53-1.832.936-2.602 1.218zM2.659 6.967l.872.697c.282-.77.687-1.722 1.218-2.602.113-.187.235-.376.366-.562H4.059a.25.25 0 00-.213.119L2.602 6.64a.25.25 0 00.057.327z" clip-rule="evenodd"></path><path d="M4.442 11.558a.625.625 0 010 .884l-2 2a.625.625 0 11-.884-.884l2-2a.625.625 0 01.884 0zM2.692 10.308a.625.625 0 010 .884l-.75.75a.625.625 0 11-.884-.884l.75-.75a.625.625 0 01.884 0zM5.692 14.192a.625.625 0 10-.884-.884l-.75.75a.625.625 0 10.884.884l.75-.75z"></path></g></svg><span>HCP Ready</span></span></span></li></ul><p class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular content-header-card_note__QTtmc">Updated last year</p></div></div></div><div class="content-header-card_cardBottom__ndKDE"><ul class="content-header-card_linksList__vaxQ3"><li class="content-header-card_link___8sUH"><a class="standalone-link_standaloneLink__ahuej g-focus-ring-from-box-shadow standalone-link_secondary__H0E0A" rel="noreferrer noopener" aria-describedby="opens-in-new-tab-label-react-aria-46" target="_blank" href="https://github.com/hashicorp/packer-plugin-googlecompute/tree/main/docs"><div class="standalone-link_standaloneLinkContents__4I2XN standalone-link_medium__J2yVM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M8 1C4.133 1 1 4.13 1 7.993c0 3.09 2.006 5.71 4.787 6.635.35.064.478-.152.478-.337 0-.166-.006-.606-.01-1.19-1.947.423-2.357-.937-2.357-.937-.319-.808-.778-1.023-.778-1.023-.635-.434.048-.425.048-.425.703.05 1.073.72 1.073.72.624 1.07 1.638.76 2.037.582.063-.452.244-.76.444-.935-1.554-.176-3.188-.776-3.188-3.456 0-.763.273-1.388.72-1.876-.072-.177-.312-.888.07-1.85 0 0 .586-.189 1.924.716A6.711 6.711 0 018 4.381c.595.003 1.194.08 1.753.236 1.336-.905 1.923-.717 1.923-.717.382.963.142 1.674.07 1.85.448.49.72 1.114.72 1.877 0 2.686-1.638 3.278-3.197 3.45.251.216.475.643.475 1.296 0 .934-.009 1.688-.009 1.918 0 .187.127.404.482.336A6.996 6.996 0 0015 7.993 6.997 6.997 0 008 1z" clip-rule="evenodd"></path></svg><span class="standalone-link_text__7GEyG">GitHub</span></div></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-46">(opens in new tab)</span></li></ul></div></div><h1>Google Cloud Platform</h1><div class="style_integrationComponentView__dxO7C"><div class="style_mdxWrapper__6wQJC"><div class="dev-dot-content_root__UJDct hds-typography-body-300"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Type: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">googlecompute</code>
Artifact BuilderId: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">packer.googlecompute</code></p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">googlecompute</code> Packer builder is able to create
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://developers.google.com/compute/docs/images">images</a> for use with
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/products/compute-engine">Google Compute Engine</a> (GCE)
based on existing images.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">It is possible to build images from scratch, but not with the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">googlecompute</code>
Packer builder. The process is recommended only for advanced users, please see
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/compute/docs/tutorials/building-images">Building GCE Images from Scratch</a>
and the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/integrations/hashicorp/googlecompute/latest/components/post-processor/googlecompute-import">Google Compute Import
Post-Processor</a> for more
information.</p><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-authentication"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Authentication permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#authentication"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Authentication</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">To authenticate with GCE, this builder supports everything the plugin does.
To get more information on this, refer to the plugin&#x27;s description page, under
the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/integrations/hashicorp/googlecompute#authentication">authentication</a> section.</p><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-configuration-reference"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Configuration Reference permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#configuration-reference"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Configuration Reference</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Configuration options are organized below into two categories: required and
optional. Within each category, the available options are alphabetized and
described.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">In addition to the options listed here, a
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/docs/templates/legacy_json_templates/communicator">communicator</a> can be configured for this
builder.</p><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-required:"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Required permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#required:"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Required:</h3><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">project_id</code> (string) - The project ID that will be used to launch instances and store images.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">source_image</code> (string) - The source image to use to create the new image from. You can also
specify source_image_family instead. If both source_image and
source_image_family are specified, source_image takes precedence.
Example: &quot;debian-8-jessie-v20161027&quot;</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">source_image_family</code> (string) - The source image family to use to create the new image from. The image
family always returns its latest image that is not deprecated. Example:
&quot;debian-8&quot;.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">zone</code> (string) - The zone in which to launch the instance used to create the image.
Example: &quot;us-central1-a&quot;</p></li></ul><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-optional:"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Optional permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#optional:"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Optional:</h3><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">accelerator_type</code> (string) - Full or partial URL of the guest accelerator type. GPU accelerators can
only be used with <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;on_host_maintenance&quot;: &quot;TERMINATE&quot;</code> option set.
Example:
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;projects/project_id/zones/europe-west1-b/acceleratorTypes/nvidia-tesla-k80&quot;</code></p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">accelerator_count</code> (int64) - Number of guest accelerator cards to add to the launched instance.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">address</code> (string) - The name of a pre-allocated static external IP address. Note, must be
the name and not the actual IP address.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">disable_default_service_account</code> (bool) - If true, the default service account will not be used if
service_account_email is not specified. Set this value to true and omit
service_account_email to provision a VM with no service account.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">disk_name</code> (string) - The name of the disk, if unset the instance name will be used.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">disk_size</code> (int64) - The size of the disk in GB. This defaults to 20, which is 20GB.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">disk_type</code> (string) - Type of disk used to back your instance, like pd-ssd or pd-standard.
Defaults to pd-standard.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">disk_encryption_key</code> (<!-- -->*<!-- -->common.CustomerEncryptionKey) - Disk encryption key to apply to the created boot disk. Possible values:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">kmsKeyName -  The name of the encryption key that is stored in Google Cloud KMS.</li><li class="mdx-lists_listItem__nkqhg">RawKey: - A 256-bit customer-supplied encryption key, encodes in RFC 4648 base64.</li></ul><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">examples:</p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R221ihdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">   &quot;kmsKeyName&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;projects/${project}/locations/${region}/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R221ihdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":R3m21ihdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.9d24babe.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R2i1ihdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)"> disk_encryption_key</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">   kmsKeyName </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;projects/</span><span style="color:var(--hds-code-block-color-keyword)">${</span><span style="color:var(--hds-code-block-color-string)">var</span><span style="color:var(--hds-code-block-color-token)">.</span><span style="color:var(--hds-code-block-color-string)">project</span><span style="color:var(--hds-code-block-color-keyword)">}</span><span style="color:var(--hds-code-block-color-string)">/locations/</span><span style="color:var(--hds-code-block-color-keyword)">${</span><span style="color:var(--hds-code-block-color-string)">var</span><span style="color:var(--hds-code-block-color-token)">.</span><span style="color:var(--hds-code-block-color-string)">region</span><span style="color:var(--hds-code-block-color-keyword)">}</span><span style="color:var(--hds-code-block-color-string)">/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> }</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R2i1ihdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":R3mi1ihdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.9d24babe.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Refer to the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#customer-encryption-key">Customer Encryption Key</a> section for more information on the contents of this block.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">enable_nested_virtualization</code> (bool) - Create a instance with enabling nested virtualization.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">enable_secure_boot</code> (bool) - Create a Shielded VM image with Secure Boot enabled. It helps ensure that
the system only runs authentic software by verifying the digital signature
of all boot components, and halting the boot process if signature verification
fails. <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/security/shielded-cloud/shielded-vm">Details</a></p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">enable_vtpm</code> (bool) - Create a Shielded VM image with virtual trusted platform module
Measured Boot enabled. A vTPM is a virtualized trusted platform module,
which is a specialized computer chip you can use to protect objects,
like keys and certificates, that you use to authenticate access to your
system. <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/security/shielded-cloud/shielded-vm">Details</a></p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">enable_integrity_monitoring</code> (bool) - Integrity monitoring helps you understand and make decisions about the
state of your VM instances. Note: integrity monitoring relies on having
vTPM enabled. <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/security/shielded-cloud/shielded-vm">Details</a></p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">disk_attachment</code> ([]common.BlockDevice) - Extra disks to attach to the instance that will build the final image.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">You may reference an existing external persistent disk, or you can configure
a set of disks to be created before the instance is created, and will
be deleted upon build completion.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Scratch (ephemeral) SSDs are always created at launch, and deleted when the
instance is torn-down.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Note: local SSDs are not supported on all machine types, refer to the
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/compute/docs/disks/local-ssd#choose_number_local_ssds">docs</a>
for more information on that.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Refer to the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#extra-disk-attachments">Extra Disk Attachments</a> section for
more information on this configuration type.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">skip_create_image</code> (bool) - Skip creating the image. Useful for setting to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">true</code> during a build test stage. Defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">false</code>.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">image_architecture</code> (string) - The architecture of the resulting image. Defaults to &quot;x86_64&quot;.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">image_name</code> (string) - The unique name of the resulting image. Defaults to
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">packer-{{timestamp}}</code>.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">image_description</code> (string) - The description of the resulting image.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">image_encryption_key</code> (<!-- -->*<!-- -->common.CustomerEncryptionKey) - Image encryption key to apply to the created image. Possible values:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">kmsKeyName -  The name of the encryption key that is stored in Google Cloud KMS.</li><li class="mdx-lists_listItem__nkqhg">RawKey: - A 256-bit customer-supplied encryption key, encodes in RFC 4648 base64.</li></ul><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">examples:</p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R24hihdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">   &quot;kmsKeyName&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-string)"> &quot;projects/${project}/locations/${region}/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R24hihdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":R3m4hihdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.9d24babe.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R2khihdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)"> image_encryption_key</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">   kmsKeyName </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;projects/</span><span style="color:var(--hds-code-block-color-keyword)">${</span><span style="color:var(--hds-code-block-color-string)">var</span><span style="color:var(--hds-code-block-color-token)">.</span><span style="color:var(--hds-code-block-color-string)">project</span><span style="color:var(--hds-code-block-color-keyword)">}</span><span style="color:var(--hds-code-block-color-string)">/locations/</span><span style="color:var(--hds-code-block-color-keyword)">${</span><span style="color:var(--hds-code-block-color-string)">var</span><span style="color:var(--hds-code-block-color-token)">.</span><span style="color:var(--hds-code-block-color-string)">region</span><span style="color:var(--hds-code-block-color-keyword)">}</span><span style="color:var(--hds-code-block-color-string)">/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> }</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R2khihdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":R3mkhihdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.9d24babe.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Refer to the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#customer-encryption-key">Customer Encryption Key</a> section for more information on the contents of this block.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">image_family</code> (string) - The name of the image family to which the resulting image belongs. You
can create disks by specifying an image family instead of a specific
image name. The image family always returns its latest image that is not
deprecated.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">image_labels</code> (map<!-- -->[string]<!-- -->string) - Key/value pair labels to apply to the created image.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">image_licenses</code> ([]string) - Licenses to apply to the created image.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">image_guest_os_features</code> ([]string) - Guest OS features to apply to the created image.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">image_project_id</code> (string) - The project ID to push the build image into. Defaults to project_id.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">image_storage_locations</code> ([]string) - Storage location, either regional or multi-regional, where snapshot
content is to be stored and only accepts 1 value. Always defaults to a nearby regional or multi-regional
location.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">multi-regional example:</p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R1m1ihdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">   &quot;image_storage_locations&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;us&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R1m1ihdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":R3lm1ihdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.9d24babe.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">regional example:</p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R2m1ihdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">{</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-keyword)">   &quot;image_storage_locations&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">:</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;us-east1&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R2m1ihdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":R3mm1ihdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.9d24babe.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">instance_name</code> (string) - A name to give the launched instance. Beware that this must be unique.
Defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">packer-{{uuid}}</code>.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">labels</code> (map<!-- -->[string]<!-- -->string) - Key/value pair labels to apply to the launched instance.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">machine_type</code> (string) - The machine type. Defaults to &quot;e2-standard-2&quot;.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">metadata</code> (map<!-- -->[string]<!-- -->string) - Metadata applied to the launched instance.
All metadata configuration values are expected to be of type string.
Google metadata options that take a value of <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">TRUE</code> or <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">FALSE</code> should be
set as a string (i.e  <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;TRUE&quot;</code> <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;FALSE&quot;</code> or <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;true&quot;</code> <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;false&quot;</code>).</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">metadata_files</code> (map<!-- -->[string]<!-- -->string) - Metadata applied to the launched instance. Values are files.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">min_cpu_platform</code> (string) - A Minimum CPU Platform for VM Instance. Availability and default CPU
platforms vary across zones, based on the hardware available in each GCP
zone.
<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/compute/docs/instances/specify-min-cpu-platform">Details</a></p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">network</code> (string) - The Google Compute network id or URL to use for the launched instance.
Defaults to &quot;default&quot;. If the value is not a URL, it will be
interpolated to
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">projects/((network_project_id))/global/networks/((network))</code>. This value
is not required if a subnet is specified.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">network_project_id</code> (string) - The project ID for the network and subnetwork to use for launched
instance. Defaults to project_id.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">omit_external_ip</code> (bool) - If true, the instance will not have an external IP. use_internal_ip must
be true if this property is true.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">on_host_maintenance</code> (string) - Sets Host Maintenance Option. Valid choices are <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">MIGRATE</code> and
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">TERMINATE</code>. Please see <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/compute/docs/instances/setting-instance-scheduling-options">GCE Instance Scheduling
Options</a>,
as not all machine<!-- -->_<!-- -->types support <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">MIGRATE</code> (i.e. machines with GPUs).
If preemptible is true this can only be <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">TERMINATE</code>. If preemptible is
false, it defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">MIGRATE</code></p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">preemptible</code> (bool) - If true, launch a preemptible instance.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">node_affinity</code> ([]common.NodeAffinity) - Sets a node affinity label for the launched instance (eg. for sole tenancy).
Please see <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/compute/docs/nodes/provisioning-sole-tenant-vms">Provisioning VMs on
sole-tenant nodes</a>
for more information.</p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R191ihdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  key </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;workload&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  operator </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;IN&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  values </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-token)"> [</span><span style="color:var(--hds-code-block-color-string)">&quot;packer&quot;</span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R191ihdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":R1r91ihdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.9d24babe.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Refer to the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#node-affinities">Node Affinity</a> for more information on affinities.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">state_timeout</code> (duration string | ex: &quot;1h5m2s&quot;) - The time to wait for instance state changes. Defaults to &quot;5m&quot;.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">region</code> (string) - The region in which to launch the instance. Defaults to the region
hosting the specified zone.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">scopes</code> ([]string) - The service account scopes for launched
instance. Defaults to:</p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R19pihdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">[</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">  &quot;https://www.googleapis.com/auth/userinfo.email&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">  &quot;https://www.googleapis.com/auth/compute&quot;</span><span style="color:var(--hds-code-block-color-punctuation)">,</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-string)">  &quot;https://www.googleapis.com/auth/devstorage.full_control&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">]</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R19pihdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":R1r9pihdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.9d24babe.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">service_account_email</code> (string) - The service account to be used for launched instance. Defaults to the
project&#x27;s default service account unless disable_default_service_account
is true.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">source_image_project_id</code> ([]string) - A list of project IDs to search for the source image. Packer will search the first
project ID in the list first, and fall back to the next in the list, until it finds the source image.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">startup_script_file</code> (string) - The path to a startup script to run on the launched instance from which the image will
be made. When set, the contents of the startup script file will be added to the instance metadata
under the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;startup_script&quot;</code> metadata property. See <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/compute/docs/startupscript#providing_startup_script_contents_directly">Providing startup script contents directly</a> for more details.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">When using <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">startup_script_file</code> the following rules apply:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">The contents of the script file will overwrite the value of the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;startup_script&quot;</code> metadata property at runtime.</li><li class="mdx-lists_listItem__nkqhg">The contents of the script file will be wrapped in Packer&#x27;s startup script wrapper, unless <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">wrap_startup_script</code> is disabled. See <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">wrap_startup_script</code> for more details.</li><li class="mdx-lists_listItem__nkqhg">Not supported by Windows instances. See <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/compute/docs/startupscript#providing_a_startup_script_for_windows_instances">Startup Scripts for Windows</a> for more details.</li></ul></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">windows_password_timeout</code> (duration string | ex: &quot;1h5m2s&quot;) - The time to wait for windows password to be retrieved. Defaults to &quot;3m&quot;.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">wrap_startup_script</code> (boolean) - For backwards compatibility this option defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;true&quot;</code> in the future it will default to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;false&quot;</code>.
If &quot;true&quot;, the contents of <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">startup_script_file</code> or <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">&quot;startup_script&quot;</code> in the instance metadata
is wrapped in a Packer specific script that tracks the execution and completion of the provided
startup script. The wrapper ensures that the builder will not continue until the startup script has been executed.</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">The use of the wrapped script file requires that the user or service account
running the build has the compute.instance.Metadata role.</li></ul></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">subnetwork</code> (string) - The Google Compute subnetwork id or URL to use for the launched
instance. Only required if the network has been created with custom
subnetting. Note, the region of the subnetwork must match the region or
zone in which the VM is launched. If the value is not a URL, it will be
interpolated to
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">projects/((network_project_id))/regions/((region))/subnetworks/((subnetwork))</code></p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">tags</code> ([]string) - Assign network tags to apply firewall rules to VM instance.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">use_internal_ip</code> (bool) - If true, use the instance&#x27;s internal IP instead of its external IP
during building.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">use_os_login</code> (bool) - If true, OSLogin will be used to manage SSH access to the compute instance by
dynamically importing a temporary SSH key to the Google account&#x27;s login profile,
and setting the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">enable-oslogin</code> to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">TRUE</code> in the instance metadata.
Optionally, <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">use_os_login</code> can be used with an existing <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_username</code> and <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_private_key_file</code>
if a SSH key has already been added to the Google account&#x27;s login profile - See <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/compute/docs/instances/managing-instance-access#add_oslogin_keys">Adding SSH Keys</a>.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">SSH keys can be added to an individual user account</p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R1s1ihdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-cyan)">$</span><span style="color:var(--hds-code-block-color-token)"> gcloud compute os-login ssh-keys add --key-file=/home/user/.ssh/my-key.pub</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last">
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-cyan)">$</span><span style="color:var(--hds-code-block-color-token)"> gcloud compute os-login describe-profile</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">PosixAccounts:</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">- accountId: &lt;project-id&gt;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> gid: &#x27;34567890754&#x27;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> homeDirectory: /home/user_example_com</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> ...</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> primary: true</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> uid: &#x27;2504818925&#x27;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> username: user_example_com</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">sshPublicKeys:</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> 000000000000000000000000000000000000000000000000000000000000000a:</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">   fingerprint: 000000000000000000000000000000000000000000000000000000000000000a</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R1s1ihdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":R3ls1ihdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.9d24babe.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Or SSH keys can be added to an associated service account</p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R2s1ihdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-cyan)">$</span><span style="color:var(--hds-code-block-color-token)"> gcloud auth activate-service-account --key-file=</span><span style="color:var(--hds-code-block-color-keyword)">&lt;</span><span style="color:var(--hds-code-block-color-token)">path to service account credentials file (</span><span style="color:var(--hds-code-block-color-function)">e.g</span><span style="color:var(--hds-code-block-color-string)"> account.json</span><span style="color:var(--hds-code-block-color-token)">)</span><span style="color:var(--hds-code-block-color-keyword)">&gt;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-cyan)">$</span><span style="color:var(--hds-code-block-color-token)"> gcloud compute os-login ssh-keys add --key-file=/home/user/.ssh/my-key.pub</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last">
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-cyan)">$</span><span style="color:var(--hds-code-block-color-token)"> gcloud compute os-login describe-profile</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">PosixAccounts:</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">- accountId: &lt;project-id&gt;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> gid: &#x27;34567890754&#x27;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> homeDirectory: /home/sa_000000000000000000000</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> ...</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> primary: true</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> uid: &#x27;2504818925&#x27;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> username: sa_000000000000000000000</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">sshPublicKeys:</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)"> 000000000000000000000000000000000000000000000000000000000000000a:</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">   fingerprint: 000000000000000000000000000000000000000000000000000000000000000a</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R2s1ihdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":R3ms1ihdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.9d24babe.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">wait_to_add_ssh_keys</code> (duration string | ex: &quot;1h5m2s&quot;) - The time to wait between the creation of the instance used to create the image,
and the addition of SSH configuration, including SSH keys, to that instance.
The delay is intended to protect packer from anything in the instance boot
sequence that has potential to disrupt the creation of SSH configuration
(e.g. SSH user creation, SSH key creation) on the instance.
Note: All other instance metadata, including startup scripts, are still added to the instance
during it&#x27;s creation.
Example value: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">5m</code>.</p></li></ul><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">use_iap</code> (bool) - Whether to use an IAP proxy.
Prerequisites and limitations for using IAP:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">You must manually enable the IAP API in the Google Cloud console.</li><li class="mdx-lists_listItem__nkqhg">You must have the gcloud sdk installed on the computer running Packer.</li><li class="mdx-lists_listItem__nkqhg">If you use a service account, you must add it to project level IAP permissions
in <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://console.cloud.google.com/security/iap">https://console.cloud.google.com/security/iap</a>. To do so, click
&quot;project&quot; &gt; &quot;SSH and TCP resources&quot; &gt; &quot;All Tunnel Resources&quot; &gt;
&quot;Add Member&quot;. Then add your service account and choose the role
&quot;IAP-secured Tunnel User&quot; and add any conditions you may care about.</li></ul></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">iap_localhost_port</code> (int) - Which port to connect the local end of the IAM localhost proxy to. If
left blank, Packer will choose a port for you from available ports.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">iap_hashbang</code> (string) - What &quot;hashbang&quot; to use to invoke script that sets up gcloud.
Default: &quot;/bin/sh&quot;</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">iap_ext</code> (string) - What file extension to use for script that sets up gcloud.
Default: &quot;.sh&quot;</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">iap_tunnel_launch_wait</code> (int) - How long to wait, in seconds, before assuming a tunnel launch was
successful. Defaults to 30 seconds for SSH or 40 seconds for WinRM.</p></li></ul><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-startup-scripts"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Startup Scripts permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#startup-scripts"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Startup Scripts</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Startup scripts can be a powerful tool for configuring the instance from which
the image is made. The builder will wait for a startup script to terminate. A
startup script can be provided via the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">startup_script_file</code> or
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">startup-script</code> instance creation <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">metadata</code> field. Therefore, the build time
will vary depending on the duration of the startup script. If
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">startup_script_file</code> is set, the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">startup-script</code> <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">metadata</code> field will be
overwritten. In other words, <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">startup_script_file</code> takes precedence.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The builder does check for a pass/fail/error signal from the startup
script by tracking the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">startup-script-status</code> metadata. Packer will check if this key
is set to done and if it not set to done before the timeout, Packer will fail the build.</p><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-windows"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Windows permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#windows"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Windows</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">A Windows startup script can only be provided as a metadata field option. The
builder will <em>not</em> wait for a Windows startup script to terminate. You have
to ensure that it finishes before the instance shuts down. For a list of
supported startup script keys refer to <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/compute/docs/instances/startup-scripts/windows">Using startup scripts on Windows</a></p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R2ehdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">metadata </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  sysprep-specialize-script-cmd </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;...&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R2ehdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":R7aehdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.9d24babe.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-logging"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Logging permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#logging"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Logging</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Startup script logs can be copied to a Google Cloud Storage (GCS) location
specified via the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">startup-script-log-dest</code> instance creation <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">metadata</code> field.
The GCS location must be writeable by the service account of the instance that Packer created.</p><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-communicator-configuration"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Communicator Configuration permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#communicator-configuration"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Communicator Configuration</h3><h4 class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716" id="user-content-optional:"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="Optional permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#optional:"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Optional:</h4><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">communicator</code> (string) - Packer currently supports three kinds of communicators:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">none</code> - No communicator will be used. If this is set, most
provisioners also can&#x27;t be used.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh</code> - An SSH connection will be established to the machine. This
is usually the default.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">winrm</code> - A WinRM connection will be established.</p></li></ul><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">In addition to the above, some builders have custom communicators they
can use. For example, the Docker builder has a &quot;docker&quot; communicator
that uses <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker exec</code> and <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">docker cp</code> to execute scripts and copy
files.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">pause_before_connecting</code> (duration string | ex: &quot;1h5m2s&quot;) - We recommend that you enable SSH or WinRM as the very last step in your
guest&#x27;s bootstrap script, but sometimes you may have a race condition
where you need Packer to wait before attempting to connect to your
guest.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If you end up in this situation, you can use the template option
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">pause_before_connecting</code>. By default, there is no pause. For example if
you set <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">pause_before_connecting</code> to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">10m</code> Packer will check whether it
can connect, as normal. But once a connection attempt is successful, it
will disconnect and then wait 10 minutes before connecting to the guest
and beginning provisioning.</p></li></ul><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_host</code> (string) - The address to SSH to. This usually is automatically configured by the
builder.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_port</code> (int) - The port to connect to SSH. This defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">22</code>.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_username</code> (string) - The username to connect to SSH with. Required if using SSH.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_password</code> (string) - A plaintext password to use to authenticate with SSH.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_ciphers</code> ([]string) - This overrides the value of ciphers supported by default by Golang.
The default value is <!-- -->[
&quot;aes128-gcm@openssh.com&quot;,
&quot;chacha20-poly1305@openssh.com&quot;,
&quot;aes128-ctr&quot;, &quot;aes192-ctr&quot;, &quot;aes256-ctr&quot;,
]</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Valid options for ciphers include:
&quot;aes128-ctr&quot;, &quot;aes192-ctr&quot;, &quot;aes256-ctr&quot;, &quot;<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="mailto:aes128-gcm@openssh.com">aes128-gcm@openssh.com</a>&quot;,
&quot;<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="mailto:chacha20-poly1305@openssh.com">chacha20-poly1305@openssh.com</a>&quot;,
&quot;arcfour256&quot;, &quot;arcfour128&quot;, &quot;arcfour&quot;, &quot;aes128-cbc&quot;, &quot;3des-cbc&quot;,</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_clear_authorized_keys</code> (bool) - If true, Packer will attempt to remove its temporary key from
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">~/.ssh/authorized_keys</code> and <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">/root/.ssh/authorized_keys</code>. This is a
mostly cosmetic option, since Packer will delete the temporary private
key from the host system regardless of whether this is set to true
(unless the user has set the <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">-debug</code> flag). Defaults to &quot;false&quot;;
currently only works on guests with <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">sed</code> installed.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_key_exchange_algorithms</code> ([]string) - If set, Packer will override the value of key exchange (kex) algorithms
supported by default by Golang. Acceptable values include:
&quot;<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="mailto:curve25519-sha256@libssh.org">curve25519-sha256@libssh.org</a>&quot;, &quot;ecdh-sha2-nistp256&quot;,
&quot;ecdh-sha2-nistp384&quot;, &quot;ecdh-sha2-nistp521&quot;,
&quot;diffie-hellman-group14-sha1&quot;, and &quot;diffie-hellman-group1-sha1&quot;.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_certificate_file</code> (string) - Path to user certificate used to authenticate with SSH.
The <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">~</code> can be used in path and will be expanded to the
home directory of current user.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_pty</code> (bool) - If <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">true</code>, a PTY will be requested for the SSH connection. This defaults
to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">false</code>.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_timeout</code> (duration string | ex: &quot;1h5m2s&quot;) - The time to wait for SSH to become available. Packer uses this to
determine when the machine has booted so this is usually quite long.
Example value: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">10m</code>.
This defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">5m</code>, unless <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_handshake_attempts</code> is set.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_disable_agent_forwarding</code> (bool) - If true, SSH agent forwarding will be disabled. Defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">false</code>.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_handshake_attempts</code> (int) - The number of handshakes to attempt with SSH once it can connect.
This defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">10</code>, unless a <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_timeout</code> is set.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_bastion_host</code> (string) - A bastion host to use for the actual SSH connection.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_bastion_port</code> (int) - The port of the bastion host. Defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">22</code>.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_bastion_agent_auth</code> (bool) - If <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">true</code>, the local SSH agent will be used to authenticate with the
bastion host. Defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">false</code>.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_bastion_username</code> (string) - The username to connect to the bastion host.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_bastion_password</code> (string) - The password to use to authenticate with the bastion host.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_bastion_interactive</code> (bool) - If <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">true</code>, the keyboard-interactive used to authenticate with bastion host.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_bastion_private_key_file</code> (string) - Path to a PEM encoded private key file to use to authenticate with the
bastion host. The <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">~</code> can be used in path and will be expanded to the
home directory of current user.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_bastion_certificate_file</code> (string) - Path to user certificate used to authenticate with bastion host.
The <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">~</code> can be used in path and will be expanded to the
home directory of current user.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_file_transfer_method</code> (string) - <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">scp</code> or <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">sftp</code> - How to transfer files, Secure copy (default) or SSH
File Transfer Protocol.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><strong>NOTE</strong>: Guests using Windows with Win32-OpenSSH v9.1.0.0p1-Beta, scp
(the default protocol for copying data) returns a a non-zero error code since the MOTW
cannot be set, which cause any file transfer to fail. As a workaround you can override the transfer protocol
with SFTP instead <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_file_transfer_method = &quot;sftp&quot;</code>.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_proxy_host</code> (string) - A SOCKS proxy host to use for SSH connection</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_proxy_port</code> (int) - A port of the SOCKS proxy. Defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">1080</code>.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_proxy_username</code> (string) - The optional username to authenticate with the proxy server.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_proxy_password</code> (string) - The optional password to use to authenticate with the proxy server.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_keep_alive_interval</code> (duration string | ex: &quot;1h5m2s&quot;) - How often to send &quot;keep alive&quot; messages to the server. Set to a negative
value (<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">-1s</code>) to disable. Example value: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">10s</code>. Defaults to <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">5s</code>.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_read_write_timeout</code> (duration string | ex: &quot;1h5m2s&quot;) - The amount of time to wait for a remote command to end. This might be
useful if, for example, packer hangs on a connection after a reboot.
Example: <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">5m</code>. Disabled by default.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_remote_tunnels</code> ([]string) - </p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_local_tunnels</code> ([]string) - </p></li></ul><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_private_key_file</code> (string) - Path to a PEM encoded private key file to use to authenticate with SSH.
The <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">~</code> can be used in path and will be expanded to the home directory
of current user.</li></ul><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-temporary-ssh-keypair"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Temporary SSH keypair permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#temporary-ssh-keypair"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Temporary SSH keypair</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">When no ssh credentials are specified, Packer will generate a temporary SSH
keypair for the instance. You can change the algorithm type and bits
settings.</p><h4 class="hds-typography-display-300 hds-font-weight-semibold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h4__v7716" id="user-content-optional:"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow" aria-label="Optional permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#optional:"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Optional:</h4><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">temporary_key_pair_type</code> (string) - <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">dsa</code> | <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ecdsa</code> | <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ed25519</code> | <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">rsa</code> ( the default )</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Specifies the type of key to create. The possible values are &#x27;dsa&#x27;,
&#x27;ecdsa&#x27;, &#x27;ed25519&#x27;, or &#x27;rsa&#x27;.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">NOTE: DSA is deprecated and no longer recognized as secure, please
consider other alternatives like RSA or ED25519.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">temporary_key_pair_bits</code> (int) - Specifies the number of bits in the key to create. For RSA keys, the
minimum size is 1024 bits and the default is 4096 bits. Generally, 3072
bits is considered sufficient. DSA keys must be exactly 1024 bits as
specified by FIPS 186-2. For ECDSA keys, bits determines the key length
by selecting from one of three elliptic curve sizes: 256, 384 or 521
bits. Attempting to use bit lengths other than these three values for
ECDSA keys will fail. Ed25519 keys have a fixed length and bits will be
ignored.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">NOTE: DSA is deprecated and no longer recognized as secure as specified
by FIPS 186-5, please consider other alternatives like RSA or ED25519.</p></li></ul><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-gotchas"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Gotchas permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#gotchas"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Gotchas</h3><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">CentOS and recent Debian images have root ssh access disabled by default. Set
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">ssh_username</code> to any user, which will be created by packer with sudo access.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The machine type must have a scratch disk, which means you can&#x27;t use an
<code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">f1-micro</code> or <code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">g1-small</code> to build images.</p><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-extra-disk-attachments"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Extra disk attachments permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#extra-disk-attachments"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Extra disk attachments</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">BlockDevice is a block device attachement/creation to an instance when building an image.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">These can be defined using the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#disk_attachment">disk_attachment</a> block in the configuration.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Note that this is an array, and therefore in HCL2 can be defined as multiple blocks, each
one corresponding to a disk that will be attached to the instance you are booting.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Example:</p><div class="hds-code-block hds-code-block--theme-dark hds-code-block--is-standalone mdx-code-blocks_codeBlockMargin__xk4yr"><div class="hds-code-block__header"></div><div class="hds-code-block__body"><pre class="hds-code-block__code" id=":R4uhdal6j6:" style="max-height:auto"><code><span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">source</span><span style="color:var(--hds-code-block-color-constant)"> &quot;googlecompute&quot;</span><span style="color:var(--hds-code-block-color-constant)"> &quot;example&quot;</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-comment)">  # Add whichever is necessary to build the image</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last">
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">  disk_attachment</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    volume_type     </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;scratch&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    volume_size     </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-constant)"> 375</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last">
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-function)">  disk_attachment</span><span style="color:var(--hds-code-block-color-token)"> {</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    volume_type     </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;pd-standard&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    volume_size     </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-constant)"> 25</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">    interface_type  </span><span style="color:var(--hds-code-block-color-keyword)">=</span><span style="color:var(--hds-code-block-color-string)"> &quot;SCSI&quot;</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">  }</span></span>
</span><span class="line-of-code line-highlight-first line-highlight-last"><span><span style="color:var(--hds-code-block-color-token)">}</span></span>
</span></span></code></pre><button class="hds-button hds-button--size-small hds-button--color-secondary hds-button--is-icon-only hds-copy-button hds-button--size-small hds-copy-button--status-idle hds-code-block__copy-button" aria-label="Copy" aria-describedby=":R4uhdal6j6:"><div class="hds-button__icon"><svg class="flight-icon flight-icon-clipboard-copy" aria-hidden="true" fill="currentColor" id=":R7cuhdal6j6:" width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><use href="/_next/static/media/svg-sprite.9d24babe.svg#flight-clipboard-copy-16"></use></svg></div></button></div></div><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-required:"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Required permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#required:"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Required:</h3><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">volume_size</code> (int) - Size of the volume to request, in gigabytes.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The size specified must be in range of the sizes for the chosen volume type.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">volume_type</code> (BlockDeviceType) - The volume type is the type of storage to reserve and attach to the instance being provisioned.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The following values are supported by this builder:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">scratch: local SSD data, always 375 GiB (default)</li><li class="mdx-lists_listItem__nkqhg">pd_standard: persistent, HDD-backed disk</li><li class="mdx-lists_listItem__nkqhg">pd_balanced: persistent, SSD-backed disk</li><li class="mdx-lists_listItem__nkqhg">pd_ssd: persistent, SSD-backed disk, with extra performance guarantees</li><li class="mdx-lists_listItem__nkqhg">pd_extreme: persistent, fastest SSD-backed disk, with custom IOPS</li><li class="mdx-lists_listItem__nkqhg">hyperdisk-balanced: persistent hyperdisk volume, bootable</li><li class="mdx-lists_listItem__nkqhg">hyperdisk-extreme: persistent hyperdisk volume, optimised for performance</li><li class="mdx-lists_listItem__nkqhg">hyperdisk-ml: persistent, shareable, hyperdisk volume, highest throughput</li><li class="mdx-lists_listItem__nkqhg">hyperdisk-throughput: persistent hyperdisk volume with flexible throughput</li></ul><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">For details on the different types, refer to: <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/compute/docs/disks#disk-types">https://cloud.google.com/compute/docs/disks#disk-types</a>
For more information on hyperdisk volumes, refer to: <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/compute/docs/disks/hyperdisks#throughput">https://cloud.google.com/compute/docs/disks/hyperdisks#throughput</a></p></li></ul><h3 class="hds-typography-display-400 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h3__xmS_z" id="user-content-optional:"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h3__SkrrS" aria-label="Optional permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#optional:"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Optional:</h3><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">attachment_mode</code> (string) - How to attach the volume to the instance</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Can be either READ_ONLY or READ_WRITE (default).</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">create_image</code> (bool) - If true, an image will be created for this disk, instead of the boot disk.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This only applies to non-scratch disks, and can only be specified on one disk at a
time.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">device_name</code> (string) - The device name as exposed to the OS in the /dev/disk/by-id/google-* directory</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If unspecified, the disk will have a default name in the form
persistent-disk-x with &#x27;x&#x27; being a number assigned by GCE</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This field only applies to persistent disks, local SSDs will always
be exposed as /dev/disk/by-id/google-local-nvme-ssd-x.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">disk_encryption_key</code> (CustomerEncryptionKey) - Disk encryption key to apply to the requested disk.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Possible values:</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg">kmsKeyName -  The name of the encryption key that is stored in Google Cloud KMS.</li><li class="mdx-lists_listItem__nkqhg">RawKey: - A 256-bit customer-supplied encryption key, encodes in RFC 4648 base64.</li></ul><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Refer to the <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#customer-encryption-key">Customer Encryption Key</a> section for more information on the contents of this block.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">disk_name</code> (string) - Name of the disk to create.
This only applies to non-scratch disks. If the disk is persistent, and
not specified, Packer will generate a unique name for the disk.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The name must be 1-63 characters long and comply to the regexp
&#x27;<a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="/[productSlug]/integrations/[organizationSlug]/[integrationSlug]/[integrationVersion]/components/[componentType]/%5B-a-z0-9%5D*%5Ba-z0-9%5D">a-z</a>?&#x27;</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">interface_type</code> (string) - The interface to use for attaching the disk.
Can be either NVME or SCSI. Defaults to SCSI.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The available options depend on the type of disk, SEE: <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/compute/docs/disks/persistent-disks#choose_an_interface">https://cloud.google.com/compute/docs/disks/persistent-disks#choose_an_interface</a></p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">iops</code> (int) - The requested IOPS for the disk.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This is only available for pd_extreme disks.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">keep_device</code> (bool) - Keep the device in the created disks after the instance is terminated.
By default, the builder will remove the disks at the end of the build.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">This cannot be used with &#x27;scratch&#x27; volumes.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">replica_zones</code> ([]string) - The list of extra zones to replicate the disk into</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">The zone in which the instance is created will automatically be
added to the zones in which the disk is replicated.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">source_volume</code> (string) - The URI of the volume to attach</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">If this is specified, it won&#x27;t be deleted after the instance is shut-down.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">_</code> (string) - Zone is the zone in which to create the disk in.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">It is not exposed since the parent config already specifies it
and it will be set for the block device when preparing it.</p></li></ul><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-customer-encryption-key"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Customer Encryption Key permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#customer-encryption-key"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Customer Encryption Key</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Specifying a custom key allows you to use your own encryption keys to encrypt the data
of the image you are creating.</p><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Note: you will need to reuse the same key later on when reusing the image.</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">kmsKeyName</code> (string) - KmsKeyName: The name of the encryption key that is stored in Google
Cloud KMS.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">rawKey</code> (string) - RawKey: Specifies a 256-bit customer-supplied encryption key, encoded
in RFC 4648 base64 to either encrypt or decrypt this resource.</p></li></ul><h2 class="hds-typography-display-500 hds-font-weight-bold mdx-headings_heading__M6qPe g-offset-scroll-margin-top mdx-headings_h2__9ZcX_" id="user-content-node-affinities"><a class="mdx-heading-permalink_root__2oeix g-focus-ring-from-box-shadow mdx-heading-permalink_h2__CA9g8" aria-label="Node Affinities permalink" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#node-affinities"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true" class="mdx-heading-permalink_icon__Sz01O"><g fill="currentColor"><path d="M11.141 1a3.893 3.893 0 00-2.738 1.093L7.314 3.175A.75.75 0 008.372 4.24l1.077-1.07a2.393 2.393 0 013.384 3.382l-1.881 1.88a2.393 2.393 0 01-3.608-.258.75.75 0 00-1.202.899 3.893 3.893 0 005.87.42l1.886-1.886.01-.009A3.893 3.893 0 0011.14 1z"></path><path d="M7.019 5.365a3.893 3.893 0 00-3.032 1.13L2.102 8.382l-.01.01a3.893 3.893 0 005.505 5.504l1.084-1.084a.75.75 0 00-1.06-1.06l-1.07 1.07a2.393 2.393 0 01-3.384-3.384l1.881-1.88a2.393 2.393 0 013.609.258.75.75 0 101.2-.899A3.893 3.893 0 007.02 5.365z"></path></g></svg></a>Node Affinities</h2><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA">Node affinity configuration allows you to restrict the nodes on which to run the
instance that Packer will build the image from.
This requires configuring <a class="inline-link_root__iIql6 g-focus-ring-from-box-shadow hds-typography-body-300 hds-font-weight-regular inline-link_primary__kGJLJ" href="https://cloud.google.com/compute/docs/nodes/provisioning-sole-tenant-vms">sole-tenant node groups</a> first.</p><ul class="mdx-lists_listRoot__iVDx9"><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">key</code> (string) - Key: Corresponds to the label key of Node resource.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">operator</code> (string) - Operator: Defines the operation of node selection. Valid operators are IN for affinity and
NOT_IN for anti-affinity.</p></li><li class="mdx-lists_listItem__nkqhg"><p class="text_root__r0DFB hds-typography-body-300 hds-font-weight-regular mdx-p_p__ZTJEA"><code class="mdx-inline-code_inlineCode__p_0sy mdx-inline-code_size-200__YiF_7 hds-typography-code-200">values</code> ([]string) - Values: Corresponds to the label values of Node resource.</p></li></ul></div></div></div></main><div class="sidebar-sidecar-layout_sidecarPosition__WtTq0"><div class="sidebar-sidecar-layout_sidecarTopSlot__qRAEI"></div><div class="sidecar-scroll-container_root__a8nIj"><div class="sidecar-scroll-container_scrollContainer__Dw9id"><div><nav aria-labelledby="react-aria-79"><p id="react-aria-79" class="outline-nav_navLabel__HrjQb hds-typography-body-100">On this page:</p><ol class="outline-nav_listRoot__Sm1fr"><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#authentication">Authentication</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#configuration-reference">Configuration Reference</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#required:">Required:</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#optional:">Optional:</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#startup-scripts">Startup Scripts</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#windows">Windows</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#logging">Logging</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#communicator-configuration">Communicator Configuration</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#optional:">Optional:</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#temporary-ssh-keypair">Temporary SSH keypair</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#optional:">Optional:</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#gotchas">Gotchas</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#extra-disk-attachments">Extra disk attachments</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#required:">Required:</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#optional:">Optional:</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#customer-encryption-key">Customer Encryption Key</a></li><li><a class="outline-link_root__S7fQg hds-typography-body-200 g-focus-ring-from-box-shadow" href="/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute#node-affinities">Node Affinities</a></li></ol></nav></div></div></div></div></div></div></div></div></div><div class="base-layout_footer__HGqK8 base-layout_showFooterTopBorder__4_CwH"><footer class="footer_root__qJO_k"><span class="footer_logoAndSwitcher__CJkN3"><a href="https://www.hashicorp.com/" aria-label="Go to HashiCorp home page" class="footer_logo__pe9i3 g-focus-ring-from-box-shadow"><div><svg xmlns="http://www.w3.org/2000/svg" width="254" height="53" fill="none" viewBox="0 0 254 53"><g fill="#000" clip-path="url(#clip0_1743_1384)"><g><path d="M63.01 12.22h5.32v11.43h12.19V12.22h5.36V40.2h-5.36V28.45H68.33V40.2h-5.32zM89.28 34.77c0-4.2 2.96-5.6 6.56-6.44l6.079-1.4v-.48c0-2.04-1.32-3.32-3.44-3.32s-3.36 1.16-3.76 3.08l-4.56-.52c.68-3.84 3.92-6.32 8.52-6.32 5.08 0 8.4 3.2 8.4 7.88v8.2c0 .52.16.68.52.68h1.12v4.08h-3.12c-1.96 0-2.84-.64-2.84-2.24 0-.48.08-1.04.28-1.76l-.44-.16c-1.44 3.12-3.56 4.48-6.56 4.48-4.12 0-6.76-2.28-6.76-5.76m8.12 2c2.639 0 4.519-1.92 4.519-4.96v-1.6l-4.36 1.04c-2.2.52-3.12 1.28-3.12 2.96s1.16 2.56 2.96 2.56M110.59 34.69l4.88-.96c.52 2.16 2.24 3.24 4.52 3.24 2.28 0 3.56-.92 3.56-2.48s-1.52-1.88-4.4-2.4c-3.64-.56-8.35-1.24-8.35-6.28 0-3.8 3.24-6.44 8.52-6.44 4.68 0 8.32 1.96 9.15 5.92l-4.92.8c-.44-2-2.08-3.04-4.24-3.04-2.36 0-3.48 1-3.48 2.36 0 1.56 1.56 1.88 4.44 2.4 3.6.56 8.32 1.24 8.32 6.28 0 3.96-3.2 6.6-8.6 6.6-4.88 0-8.52-2-9.4-6M136.94 40.21h-5.2V11.42h5.2v8.96c0 1.04-.2 2.04-.48 3.52l.48.16c1.24-2.96 3.12-4.68 6.6-4.68 4.44 0 6.8 2.8 6.8 7.56v13.27h-5.2V27.1c0-2.32-1.16-3.6-3.48-3.6-2.64 0-4.72 2-4.72 5.52zM161.01 35.05c0 .8.28 1.04.88 1.04h2.28v4.12h-4.72c-2.36 0-3.64-1.32-3.64-3.76V23.98h-2.88v-4.12h8.08zm-5.92-20.63c0-1.76 1.44-3.2 3.16-3.2 1.72 0 3.16 1.44 3.16 3.2 0 1.76-1.4 3.16-3.16 3.16-1.76 0-3.16-1.4-3.16-3.16M165.89 26.22c0-8.4 5.52-14.47 13.51-14.47 6.72 0 11.31 3.88 12.55 9.15l-5.28 1.28c-1-3.68-3.44-5.76-7.28-5.76-4.88 0-7.96 4.04-7.96 9.79 0 5.75 3.2 9.79 8.16 9.79 3.92 0 6.32-2.12 7.32-6.04l5 .56c-1.2 6.28-5.84 10.15-12.39 10.15-8.08 0-13.63-6.08-13.63-14.47zM194.08 30.01c0-6.2 4.36-10.63 10.39-10.63s10.39 4.44 10.39 10.63-4.36 10.67-10.39 10.67-10.39-4.48-10.39-10.67m15.59 0c0-3.84-2.04-6.4-5.2-6.4s-5.2 2.56-5.2 6.4c0 3.84 2.08 6.44 5.2 6.44s5.2-2.56 5.2-6.44M218.149 19.86h4.8v.8c0 1.08-.04 1.96-.36 3.6l.48.12c.76-2.68 2.16-4.52 5.44-4.52h1.48v5.04h-2.12c-2.92 0-4.52 1.76-4.52 5v10.31h-5.2zM232.43 19.86h5.12v.92c0 .92-.08 1.64-.36 3.28l.48.12c1.24-3.24 3.56-4.8 6.56-4.8 4.96 0 8.88 4.08 8.88 10.63 0 6.55-3.92 10.67-8.88 10.67-3 0-5.2-1.56-6.48-4.84l-.44.16c.24 1.6.32 2.36.32 3.24v9.15h-5.2V19.85zm15.51 10.15c0-3.96-2.16-6.4-5.2-6.4s-5.2 2.44-5.2 6.4c0 3.96 2.16 6.44 5.2 6.44s5.2-2.44 5.2-6.44"/></g><g><path d="M20.79.01.07 11.97v28.71l7.78 4.5V16.46l12.94-7.47z"/><path d="M29.06.01v22.87h-8.27v-8.54L13 18.84v29.3l7.79 4.5v-22.8h8.27v8.48l7.79-4.49V4.51z"/><path d="M29.06 52.65 49.78 40.7V11.99L42 7.49V36.2l-12.94 7.47z"/></g></g><defs><clipPath id="clip0_1743_1384"><path fill="#fff" d="M0 0h254v53H0z"/></clipPath></defs></svg></div></a><span class="footer_themeSwitcher__CPJxw hds-font-weight-regular"><label class="theme-switcher_label__7Boh2 hds-typography-body-200" for="react-aria-97">Theme</label></span></span><ul class="footer_links__t81SU"><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="/certifications"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Certifications</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://status.hashicorp.com"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">System Status</span></a></li><li><button class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Cookie Manager</span></button></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/terms-of-service"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Terms of Use</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trust/security"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Security</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/privacy"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Privacy</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trademark-policy"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Trademark Policy</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trade-controls"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Trade Controls</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" href="https://www.hashicorp.com/trust/accessibility"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Accessibility</span></a></li><li><a class="footer_linkAction__bR3OW g-focus-ring-from-box-shadow" aria-describedby="opens-in-new-tab-label-react-aria-106" target="_blank" href="https://forms.gle/fnHLuNahLEhjuKvE6"><span class="text_root__r0DFB hds-typography-body-200 hds-font-weight-regular">Give Feedback</span><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16" aria-hidden="true"><g fill="currentColor"><path d="M9 .75A.75.75 0 019.75 0h4.5c.206 0 .393.083.529.218l.001.002.002.001A.748.748 0 0115 .75v4.5a.75.75 0 01-1.5 0V2.56L7.28 8.78a.75.75 0 01-1.06-1.06l6.22-6.22H9.75A.75.75 0 019 .75z"></path><path d="M3.25 3.5a.75.75 0 00-.75.75v7.5c0 .414.336.75.75.75h7.5a.75.75 0 00.75-.75v-4a.75.75 0 011.5 0v4A2.25 2.25 0 0110.75 14h-7.5A2.25 2.25 0 011 11.75v-7.5A2.25 2.25 0 013.25 2h4a.75.75 0 010 1.5h-4z"></path></g></svg></a><span class="g-screen-reader-only" id="opens-in-new-tab-label-react-aria-106">(opens in new tab)</span></li></ul></footer></div></div></div><div class="style_root__owpNH"></div><div style="position:fixed;z-index:99;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none;inset:24px"></div><!--$--><!--/$--></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metadata":{"title":"Google Cloud Platform Builder | Integrations"},"product":{"name":"Packer","slug":"packer","algoliaConfig":{"indexName":"product_PACKER","searchOnlyApiKey":"4e1ea7f4bf4335ac43d9f28463e42148"},"analyticsConfig":{"includedDomains":"packer.io www.packer.io","segmentWriteKey":"AjXdfmTTk1I9q9dfyePuDFHBrz1tCO3l"},"datoToken":"88b4984480dad56295a8aadae6caad","metadata":{"title":"Packer by HashiCorp","description":"Packer helps you create golden images for multiple platforms from a single source configuration.","image":"https://docs.hashicorp.com/sentinel-public/img/og-image.png","icon":[{"href":"/sentinel-public/favicon.svg","sizes":"16x16"},{"href":"/sentinel-public/favicon.svg","sizes":"32x32"},{"href":"/sentinel-public/favicon.svg","sizes":"96x96"},{"href":"/sentinel-public/favicon.svg","sizes":"192x192"}]},"alertBannerActive":true,"alertBanner":{"tag":"HashiDays","url":"https://hashicorp.com/conferences/hashidays","text":"One conference. Three cities.","linkText":"Find a city near you","expirationDate":"2024-06-14T00:00:00-08:00"},"version":"1.7.10","basePaths":["docs","guides","intro","downloads"],"rootDocsPaths":[{"iconName":"docs","name":"Documentation","path":"docs"},{"iconName":"guide","name":"Guides","path":"guides"}],"integrationsConfig":{"description":"A curated collection of official, partner, and community Packer Integrations."}},"integration":{"id":"834b0c0c-be8e-4a62-add3-478673c04f95","slug":"googlecompute","name":"Google Cloud Platform","description":"The googlecompute plugin can be used with HashiCorp Packer to create custom images on GCE.","license_type":null,"license_url":null,"external_only":false,"external_url":null,"tier":"official","repo_url":"https://github.com/hashicorp/packer-plugin-googlecompute","subdirectory":"/.web-docs","created_at":"2023-06-15T19:02:47.779Z","updated_at":"2023-08-08T17:01:06.505Z","hide_versions":false,"organization":{"id":"a4a0551a-1451-4d89-9f56-8031c8350c77","slug":"hashicorp","created_at":"2022-11-09T22:56:32.391Z","updated_at":"2022-11-09T22:56:32.391Z"},"product":{"id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","slug":"packer","name":"Packer","created_at":"2022-11-09T22:56:29.896Z","updated_at":"2022-11-09T22:56:29.896Z"},"versions":["1.1.5","1.1.4","1.1.3","1.1.2","1.1.1"],"components":[{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders"},{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors"},{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors"}],"flags":[{"id":"3709e036-b45f-4be8-9043-f7c8cc2af00f","slug":"hcp-ready","name":"HCP Ready","description":"This integration has been tested to work with HashiCorp Cloud Platform (HCP)","created_at":"2022-11-09T22:56:30.673Z","updated_at":"2022-11-09T22:56:30.673Z"}],"integration_type":null},"activeRelease":{"id":"02ab6602-3b11-4fc7-a42c-859020c41df8","integration_id":"834b0c0c-be8e-4a62-add3-478673c04f95","version":"1.1.5","readme":"The Google compute Packer plugin lets you create custom images for use within Google Compute Engine (GCE).\n\n### Installation\n\nTo install this plugin, copy and paste this code into your Packer configuration, then run [`packer init`](https://www.packer.io/docs/commands/init).\n\n```hcl\npacker {\n  required_plugins {\n    googlecompute = {\n      source  = \"github.com/hashicorp/googlecompute\"\n      version = \"~\u003e 1\"\n    }\n  }\n}\n```\n\nAlternatively, you can use `packer plugins install` to manage installation of this plugin.\n\n```sh\n$ packer plugins install github.com/hashicorp/googlecompute\n```\n\n### Components\n\n#### Builders\n\n- [googlecompute](/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute) - The\n  googlecompute builder creates images from existing ones, by launching an instance, provisioning it, then exporting\n  it as a reusable image.\n\n#### Post-Processors\n\n- [googlecompute-import](/packer/integrations/hashicorp/googlecompute/latest/components/post-processor/googlecompute-import) -\n  The googlecompute-import post-processor imports an existing raw disk image, and imports it as a GCE image that can be\n  used for launching instances from.\n\n- [googlecompute-export](/packer/integrations/hashicorp/googlecompute/latest/components/post-processor/googlecompute-export) -\n  The googlecompute-export post-processor exports the image built by the googlecompute builder as a .tar.gz archive into Google\n  Cloud Storage (GCS).\n\n### Authentication\n\nAuthenticating with Google Cloud services requires either a User Application Default Credentials,\na JSON Service Account Key or an Access Token.  These are **not** required if you are\nrunning the `googlecompute` Packer builder on Google Cloud with a\nproperly-configured [Google Service\nAccount](https://cloud.google.com/compute/docs/authentication).\n\nThe following options are available for the `googlecompute` builder, the googlecompute-export`, and\nthe `googlecompute-import`:\n\n\u003c!-- Code generated from the comments of the Authentication struct in lib/common/auth.go; DO NOT EDIT MANUALLY --\u003e\n\n- `access_token` (string) - A temporary [OAuth 2.0 access token](https://developers.google.com/identity/protocols/oauth2)\n  obtained from the Google Authorization server, i.e. the `Authorization: Bearer` token used to\n  authenticate HTTP requests to GCP APIs.\n  This is an alternative to `account_file`, and ignores the `scopes` field.\n  If both are specified, `access_token` will be used over the `account_file` field.\n  \n  These access tokens cannot be renewed by Packer and thus will only work until they expire.\n  If you anticipate Packer needing access for longer than a token's lifetime (default `1 hour`),\n  please use a service account key with `account_file` instead.\n\n- `account_file` (string) - The JSON file containing your account credentials. Not required if you\n  run Packer on a GCE instance with a service account. Instructions for\n  creating the file or using service accounts are above.\n\n- `credentials_file` (string) - The JSON file containing your account credentials.\n  \n  The file's contents may be anything supported by the Google Go client, i.e.:\n  \n  * Service account JSON\n  * OIDC-provided token for federation\n  * Gcloud user credentials file (refresh-token JSON)\n  * A Google Developers Console client_credentials.json\n\n- `credentials_json` (string) - The raw JSON payload for credentials.\n  \n  The accepted data formats are same as those described under\n  [credentials_file](#credentials_file).\n\n- `impersonate_service_account` (string) - This allows service account impersonation as per the [docs](https://cloud.google.com/iam/docs/impersonating-service-accounts).\n\n- `vault_gcp_oauth_engine` (string) - Can be set instead of account_file. If set, this builder will use\n  HashiCorp Vault to generate an Oauth token for authenticating against\n  Google Cloud. The value should be the path of the token generator\n  within vault.\n  For information on how to configure your Vault + GCP engine to produce\n  Oauth tokens, see https://www.vaultproject.io/docs/auth/gcp\n  You must have the environment variables VAULT_ADDR and VAULT_TOKEN set,\n  along with any other relevant variables for accessing your vault\n  instance. For more information, see the Vault docs:\n  https://www.vaultproject.io/docs/commands/#environment-variables\n  Example:`\"vault_gcp_oauth_engine\": \"gcp/token/my-project-editor\",`\n\n\u003c!-- End of code generated from the comments of the Authentication struct in lib/common/auth.go; --\u003e\n\n\n#### Running locally on your workstation.\n\nIf you run the `googlecompute` Packer builder locally on your workstation, you will\nneed to install the Google Cloud SDK and authenticate using [User Application Default\nCredentials](https://cloud.google.com/sdk/gcloud/reference/auth/application-default).\nYou don't need to specify an _account file_ if you are using this method. Your user\nmust have at least `Compute Instance Admin (v1)` \u0026 `Service Account User` roles\nto use Packer succesfully.\n\n#### Running on Google Cloud\n\nIf you run the `googlecompute` Packer builder on GCE or GKE, you can\nconfigure that instance or cluster to use a [Google Service\nAccount](https://cloud.google.com/compute/docs/authentication). This will allow\nPacker to authenticate to Google Cloud without having to bake in a separate\ncredential/authentication file.\n\nIt is recommended that you create a custom service account for Packer and assign it\n`Compute Instance Admin (v1)` \u0026 `Service Account User` roles.\n\nFor `gcloud`, you can run the following commands:\n\n```shell-session\n$ gcloud iam service-accounts create packer \\\n  --project YOUR_GCP_PROJECT \\\n  --description=\"Packer Service Account\" \\\n  --display-name=\"Packer Service Account\"\n\n$ gcloud projects add-iam-policy-binding YOUR_GCP_PROJECT \\\n    --member=serviceAccount:packer@YOUR_GCP_PROJECT.iam.gserviceaccount.com \\\n    --role=roles/compute.instanceAdmin.v1\n\n$ gcloud projects add-iam-policy-binding YOUR_GCP_PROJECT \\\n    --member=serviceAccount:packer@YOUR_GCP_PROJECT.iam.gserviceaccount.com \\\n    --role=roles/iam.serviceAccountUser\n\n$ gcloud projects add-iam-policy-binding YOUR_GCP_PROJECT \\\n    --member=serviceAccount:packer@YOUR_GCP_PROJECT.iam.gserviceaccount.com \\\n    --role=roles/iap.tunnelResourceAccessor\n\n$ gcloud compute instances create INSTANCE-NAME \\\n  --project YOUR_GCP_PROJECT \\\n  --image-family ubuntu-2004-lts \\\n  --image-project ubuntu-os-cloud \\\n  --network YOUR_GCP_NETWORK \\\n  --zone YOUR_GCP_ZONE \\\n  --service-account=packer@YOUR_GCP_PROJECT.iam.gserviceaccount.com \\\n  --scopes=\"https://www.googleapis.com/auth/cloud-platform\"\n```\n\n**The service account will be used automatically by Packer as long as there is\nno _account file_ specified in the Packer configuration file.**\n\n#### Running outside of Google Cloud\n\nThe [Google Cloud Console](https://console.cloud.google.com) allows\nyou to create and download a credential file that will let you use the\n`googlecompute` Packer builder anywhere. To make the process more\nstraightforwarded, it is documented here.\n\n1.  Log into the [Google Cloud\n    Console](https://console.cloud.google.com/iam-admin/serviceaccounts) and select a project.\n\n2.  Click Select a project, choose your project, and click Open.\n\n3.  Click Create Service Account.\n\n4.  Enter a service account name (friendly display name), an optional description, select the `Compute Engine Instance Admin (v1)` and `Service Account User` roles, and then click Save.\n\n5.  Generate a JSON Key and save it in a secure location.\n\n6.  Set the Environment Variable `GOOGLE_APPLICATION_CREDENTIALS` to point to the path of the service account key.\n\n#### Precedence of Authentication Methods\n\nPacker looks for credentials in the following places, preferring the first\nlocation found:\n\n1.  An `access_token` option in your packer file.\n\n2.  An `account_file` option in your packer file.\n\n3.  A JSON file (Service Account) whose path is specified by the\n    `GOOGLE_APPLICATION_CREDENTIALS` environment variable.\n\n4.  A JSON file in a location known to the `gcloud` command-line tool.\n    (`gcloud auth application-default login` creates it)\n\n    On Windows, this is:\n\n        %APPDATA%/gcloud/application_default_credentials.json\n\n    On other systems:\n\n        $HOME/.config/gcloud/application_default_credentials.json\n\n5.  On Google Compute Engine and Google App Engine Managed VMs, it fetches\n    credentials from the metadata server. (Needs a correct VM authentication\n    scope configuration, see above.)\n\n### Examples\n\n#### Basic Example\n\nBelow is a fully functioning example. It doesn't do anything useful since no\nprovisioners or startup-script metadata are defined, but it will effectively\nrepackage an existing GCE image.\n\n**JSON**\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"googlecompute\",\n      \"project_id\": \"my project\",\n      \"source_image\": \"debian-9-stretch-v20200805\",\n      \"ssh_username\": \"packer\",\n      \"zone\": \"us-central1-a\"\n    }\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"googlecompute\" \"basic-example\" {\n  project_id = \"my project\"\n  source_image = \"debian-9-stretch-v20200805\"\n  ssh_username = \"packer\"\n  zone = \"us-central1-a\"\n}\n\nbuild {\n  sources = [\"sources.googlecompute.basic-example\"]\n}\n```\n\n\n#### Windows Example\n\nBefore you can provision using the winrm communicator, you need to allow\ntraffic through google's firewall on the winrm port (tcp:5986). You can do so\nusing the gcloud command.\n\n    gcloud compute firewall-rules create allow-winrm --allow tcp:5986\n\nOr alternatively by navigating to [https://console.cloud.google.com/networking/firewalls/list](https://console.cloud.google.com/networking/firewalls/list).\n\nOnce this is set up, the following is a complete working packer config after\nsetting a valid `project_id`:\n\n**JSON**\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"googlecompute\",\n      \"project_id\": \"my project\",\n      \"source_image\": \"windows-server-2019-dc-v20200813\",\n      \"disk_size\": \"50\",\n      \"machine_type\": \"n1-standard-2\",\n      \"communicator\": \"winrm\",\n      \"winrm_username\": \"packer_user\",\n      \"winrm_insecure\": true,\n      \"winrm_use_ssl\": true,\n      \"metadata\": {\n        \"sysprep-specialize-script-cmd\": \"winrm quickconfig -quiet \u0026 net user /add packer_user \u0026 net localgroup administrators packer_user /add \u0026 winrm set winrm/config/service/auth @{Basic=\\\"true\\\"}\"\n      },\n      \"zone\": \"us-central1-a\"\n    }\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"googlecompute\" \"windows-example\" {\n  project_id = \"MY_PROJECT\"\n  source_image = \"windows-server-2019-dc-v20200813\"\n  zone = \"us-central1-a\"\n  disk_size = 50\n  machine_type = \"n1-standard-2\"\n  communicator = \"winrm\"\n  winrm_username = \"packer_user\"\n  winrm_insecure = true\n  winrm_use_ssl = true\n  metadata = {\n    sysprep-specialize-script-cmd = \"winrm quickconfig -quiet \u0026 net user /add packer_user \u0026 net localgroup administrators packer_user /add \u0026 winrm set winrm/config/service/auth @{Basic=\\\"true\\\"}\"\n  }\n}\n\nbuild {\n  sources = [\"sources.googlecompute.windows-example\"]\n}\n```\n\n-\u003e **Warning:** Please note that if you're setting up WinRM for provisioning, you'll probably want to turn it off or restrict its permissions as part of a shutdown script at the end of Packer's provisioning process. For more details on the why/how, check out this useful blog post and the associated code:\nhttps://missionimpossiblecode.io/post/winrm-for-provisioning-close-the-door-on-the-way-out-eh/\n\nThis build can take up to 15 min.\n\n#### Windows over WinSSH Example\n\nThe following uses Windows SSH as backend communicator\n[https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse](https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse)\n\n```hcl\nsource \"googlecompute\" \"windows-ssh-example\" {\n  project_id = \"MY_PROJECT\"\n  source_image = \"windows-server-2019-dc-v20200813\"\n  zone = \"us-east4-a\"\n  disk_size = 50\n  machine_type = \"n1-standard-2\"\n  communicator = \"ssh\"\n  ssh_username = var.packer_username\n  ssh_password = var.packer_user_password\n  ssh_timeout = \"1h\"\n  metadata = {\n    sysprep-specialize-script-cmd = \"net user ${var.packer_username} \\\"${var.packer_user_password}\\\" /add /y \u0026 wmic UserAccount where Name=\\\"${var.packer_username}\\\" set PasswordExpires=False \u0026 net localgroup administrators ${var.packer_username} /add \u0026 powershell Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0 \u0026 powershell Start-Service sshd \u0026 powershell Set-Service -Name sshd -StartupType 'Automatic' \u0026 powershell New-NetFirewallRule -Name 'OpenSSH-Server-In-TCP' -DisplayName 'OpenSSH Server (sshd)' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22 \u0026 powershell.exe -NoProfile -ExecutionPolicy Bypass -Command \\\"Set-ExecutionPolicy -ExecutionPolicy bypass -Force\\\"\"\n  }\n}\n\nbuild {\n  sources = [\"sources.googlecompute.windows-ssh-example\"]\n\n  provisioner \"powershell\" {\n    script = \"../scripts/install-features.ps1\"\n    elevated_user     = var.packer_username\n    elevated_password = var.packer_user_password\n  }\n}\n```\n\n#### Windows over WinSSH - Ansible Provisioner\n\nThe following uses Windows SSH as backend communicator\n[https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse](https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse)\nwith a private key.\n\n* The `sysprep-specialize-script-cmd` creates the `packer_user` and adds it to the local administrators group and configures the ssh key, firewall rule and required permissions.\n\n```\nsource \"googlecompute\" \"windows-ssh-ansible\" {\n  project_id              = var.project_id\n  source_image            = \"windows-server-2019-dc-v20200813\"\n  zone                    = \"us-east4-a\"\n  disk_size               = 50\n  machine_type            = \"n1-standard-8\"\n  communicator            = \"ssh\"\n  ssh_username            = var.packer_username\n  ssh_private_key_file    = var.ssh_key_file_path\n  ssh_timeout             = \"1h\"\n  \n  metadata = {\n    sysprep-specialize-script-cmd = \"net user ${var.packer_username} \\\"${var.packer_user_password}\\\" /add /y \u0026 wmic UserAccount where Name=\\\"${var.packer_username}\\\" set PasswordExpires=False \u0026 net localgroup administrators ${var.packer_username} /add \u0026 powershell Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0 \u0026 echo ${var.ssh_pub_key} \u003e C:\\\\ProgramData\\\\ssh\\\\administrators_authorized_keys \u0026 icacls.exe \\\"C:\\\\ProgramData\\\\ssh\\\\administrators_authorized_keys\\\" /inheritance:r /grant \\\"Administrators:F\\\" /grant \\\"SYSTEM:F\\\" \u0026 powershell New-ItemProperty -Path \\\"HKLM:\\\\SOFTWARE\\\\OpenSSH\\\" -Name DefaultShell -Value \\\"C:\\\\Windows\\\\System32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe\\\" -PropertyType String -Force  \u0026 powershell Start-Service sshd \u0026 powershell Set-Service -Name sshd -StartupType 'Automatic' \u0026 powershell New-NetFirewallRule -Name 'OpenSSH-Server-In-TCP' -DisplayName 'OpenSSH Server (sshd)' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22 \u0026 powershell.exe -NoProfile -ExecutionPolicy Bypass -Command \\\"Set-ExecutionPolicy -ExecutionPolicy bypass -Force\\\"\"\n  }\n  account_file = var.account_file_path\n\n}\n\nbuild {\n  sources = [\"sources.googlecompute.windows-ssh-ansible\"]\n\n  provisioner \"ansible\" {\n    playbook_file           = \"./playbooks/playbook.yml\"\n    use_proxy               = false\n    ansible_ssh_extra_args  = [\"-o StrictHostKeyChecking=no -o IdentitiesOnly=yes\"]\n    ssh_authorized_key_file = \"var.public_key_path\"\n    extra_arguments = [\"-e\", \"win_packages=${var.win_packages}\",\n      \"-e\",\n      \"ansible_shell_type=powershell\",\n      \"-e\",\n      \"ansible_shell_executable=None\",\n      \"-e\",\n      \"ansible_shell_executable=None\"\n    ]\n    user = var.packer_username\n  }\n\n}\n\n```\n\n#### Nested Hypervisor Example\n\nThis is an example of using the `image_licenses` configuration option to create\na GCE image that has nested virtualization enabled. See [Enabling Nested\nVirtualization for VM\nInstances](https://cloud.google.com/compute/docs/instances/enable-nested-virtualization-vm-instances)\nfor details.\n\n**JSON**\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"googlecompute\",\n      \"project_id\": \"my project\",\n      \"source_image_family\": \"centos-7\",\n      \"ssh_username\": \"packer\",\n      \"zone\": \"us-central1-a\",\n      \"image_licenses\": [\"projects/vm-options/global/licenses/enable-vmx\"]\n    }\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"googlecompute\" \"basic-example\" {\n  project_id = \"my project\"\n  source_image_family = \"centos-7\"\n  ssh_username = \"packer\"\n  zone = \"us-central1-a\"\n  image_licenses = [\"projects/vm-options/global/licenses/enable-vmx\"]\n}\n\nbuild {\n  sources = [\"sources.googlecompute.basic-example\"]\n}\n```\n\n\n#### Shared VPC Example\n\nThis is an example of using the `network_project_id` configuration option to create\na GCE instance in a Shared VPC Network. See [Creating a GCE Instance using Shared\nVPC](https://cloud.google.com/vpc/docs/provisioning-shared-vpc#creating_an_instance_in_a_shared_subnet)\nfor details. The user/service account running Packer must have `Compute Network User` role on\nthe Shared VPC Host Project to create the instance in addition to the other roles mentioned in the\nRunning on Google Cloud section.\n\n**JSON**\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"googlecompute\",\n      \"project_id\": \"my project\",\n      \"subnetwork\": \"default\",\n      \"source_image_family\": \"centos-7\",\n      \"network_project_id\": \"SHARED_VPC_PROJECT\",\n      \"ssh_username\": \"packer\",\n      \"zone\": \"us-central1-a\",\n      \"image_licenses\": [\"projects/vm-options/global/licenses/enable-vmx\"]\n    }\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"googlecompute\" \"sharedvpc-example\" {\n  project_id = \"my project\"\n  source_image_family = \"centos-7\"\n  subnetwork = \"default\"\n  network_project_id = \"SHARED_VPC_PROJECT\"\n  ssh_username = \"packer\"\n  zone = \"us-central1-a\"\n  image_licenses = [\"projects/vm-options/global/licenses/enable-vmx\"]\n}\n\nbuild {\n  sources = [\"sources.googlecompute.sharedvpc-example\"]\n}\n```\n\n\n#### Separate Image Project Example\n\nThis is an example of using the `image_project_id` configuration option to create\nthe generated image in a different GCP project than the one used to create the virtual machine. Make sure that Packer has permission in the target project to manage images, the `Compute Storage Admin` role will grant the desired permissions.\n\n**JSON**\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"googlecompute\",\n      \"project_id\": \"my project\",\n      \"image_project_id\": \"my image target project\",\n      \"source_image\": \"debian-9-stretch-v20200805\",\n      \"ssh_username\": \"packer\",\n      \"zone\": \"us-central1-a\"\n    }\n  ]\n}\n```\n\n**HCL2**\n\n```hcl\nsource \"googlecompute\" \"basic-example\" {\n  project_id = \"my project\"\n  image_project_id = \"my image target project\"\n  source_image = \"debian-9-stretch-v20200805\"\n  ssh_username = \"packer\"\n  zone = \"us-central1-a\"\n}\n\nbuild {\n  sources = [\"sources.googlecompute.basic-example\"]\n}\n```\n","created_at":"2024-07-29T18:11:53.469Z","updated_at":"2024-07-29T18:11:53.469Z","components":[{"id":"8f94f147-7734-4cb0-bdb7-9164a4dbf4a2","integration_release_id":"02ab6602-3b11-4fc7-a42c-859020c41df8","component_id":"36076511-3ced-4faf-addf-101fce0405ff","readme":"Type: `googlecompute`\nArtifact BuilderId: `packer.googlecompute`\n\nThe `googlecompute` Packer builder is able to create\n[images](https://developers.google.com/compute/docs/images) for use with\n[Google Compute Engine](https://cloud.google.com/products/compute-engine) (GCE)\nbased on existing images.\n\nIt is possible to build images from scratch, but not with the `googlecompute`\nPacker builder. The process is recommended only for advanced users, please see\n[Building GCE Images from Scratch](https://cloud.google.com/compute/docs/tutorials/building-images)\nand the [Google Compute Import\nPost-Processor](/packer/integrations/hashicorp/googlecompute/latest/components/post-processor/googlecompute-import) for more\ninformation.\n\n## Authentication\n\nTo authenticate with GCE, this builder supports everything the plugin does.\nTo get more information on this, refer to the plugin's description page, under\nthe [authentication](/packer/integrations/hashicorp/googlecompute#authentication) section.\n\n## Configuration Reference\n\nConfiguration options are organized below into two categories: required and\noptional. Within each category, the available options are alphabetized and\ndescribed.\n\nIn addition to the options listed here, a\n[communicator](/packer/docs/templates/legacy_json_templates/communicator) can be configured for this\nbuilder.\n\n### Required:\n\n\u003c!-- Code generated from the comments of the Config struct in builder/googlecompute/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `project_id` (string) - The project ID that will be used to launch instances and store images.\n\n- `source_image` (string) - The source image to use to create the new image from. You can also\n  specify source_image_family instead. If both source_image and\n  source_image_family are specified, source_image takes precedence.\n  Example: \"debian-8-jessie-v20161027\"\n\n- `source_image_family` (string) - The source image family to use to create the new image from. The image\n  family always returns its latest image that is not deprecated. Example:\n  \"debian-8\".\n\n- `zone` (string) - The zone in which to launch the instance used to create the image.\n  Example: \"us-central1-a\"\n\n\u003c!-- End of code generated from the comments of the Config struct in builder/googlecompute/config.go; --\u003e\n\n\n### Optional:\n\n\u003c!-- Code generated from the comments of the Config struct in builder/googlecompute/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `accelerator_type` (string) - Full or partial URL of the guest accelerator type. GPU accelerators can\n  only be used with `\"on_host_maintenance\": \"TERMINATE\"` option set.\n  Example:\n  `\"projects/project_id/zones/europe-west1-b/acceleratorTypes/nvidia-tesla-k80\"`\n\n- `accelerator_count` (int64) - Number of guest accelerator cards to add to the launched instance.\n\n- `address` (string) - The name of a pre-allocated static external IP address. Note, must be\n  the name and not the actual IP address.\n\n- `disable_default_service_account` (bool) - If true, the default service account will not be used if\n  service_account_email is not specified. Set this value to true and omit\n  service_account_email to provision a VM with no service account.\n\n- `disk_name` (string) - The name of the disk, if unset the instance name will be used.\n\n- `disk_size` (int64) - The size of the disk in GB. This defaults to 20, which is 20GB.\n\n- `disk_type` (string) - Type of disk used to back your instance, like pd-ssd or pd-standard.\n  Defaults to pd-standard.\n\n- `disk_encryption_key` (\\*common.CustomerEncryptionKey) - Disk encryption key to apply to the created boot disk. Possible values:\n  * kmsKeyName -  The name of the encryption key that is stored in Google Cloud KMS.\n  * RawKey: - A 256-bit customer-supplied encryption key, encodes in RFC 4648 base64.\n  \n  examples:\n  \n   ```json\n   {\n      \"kmsKeyName\": \"projects/${project}/locations/${region}/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4\"\n   }\n   ```\n  \n   ```hcl\n    disk_encryption_key {\n      kmsKeyName = \"projects/${var.project}/locations/${var.region}/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4\"\n    }\n   ```\n  \n  Refer to the [Customer Encryption Key](#customer-encryption-key) section for more information on the contents of this block.\n\n- `enable_nested_virtualization` (bool) - Create a instance with enabling nested virtualization.\n\n- `enable_secure_boot` (bool) - Create a Shielded VM image with Secure Boot enabled. It helps ensure that\n  the system only runs authentic software by verifying the digital signature\n  of all boot components, and halting the boot process if signature verification\n  fails. [Details](https://cloud.google.com/security/shielded-cloud/shielded-vm)\n\n- `enable_vtpm` (bool) - Create a Shielded VM image with virtual trusted platform module\n  Measured Boot enabled. A vTPM is a virtualized trusted platform module,\n  which is a specialized computer chip you can use to protect objects,\n  like keys and certificates, that you use to authenticate access to your\n  system. [Details](https://cloud.google.com/security/shielded-cloud/shielded-vm)\n\n- `enable_integrity_monitoring` (bool) - Integrity monitoring helps you understand and make decisions about the\n  state of your VM instances. Note: integrity monitoring relies on having\n  vTPM enabled. [Details](https://cloud.google.com/security/shielded-cloud/shielded-vm)\n\n- `disk_attachment` ([]common.BlockDevice) - Extra disks to attach to the instance that will build the final image.\n  \n  You may reference an existing external persistent disk, or you can configure\n  a set of disks to be created before the instance is created, and will\n  be deleted upon build completion.\n  \n  Scratch (ephemeral) SSDs are always created at launch, and deleted when the\n  instance is torn-down.\n  \n  Note: local SSDs are not supported on all machine types, refer to the\n  [docs](https://cloud.google.com/compute/docs/disks/local-ssd#choose_number_local_ssds)\n  for more information on that.\n  \n  Refer to the [Extra Disk Attachments](#extra-disk-attachments) section for\n  more information on this configuration type.\n\n- `skip_create_image` (bool) - Skip creating the image. Useful for setting to `true` during a build test stage. Defaults to `false`.\n\n- `image_architecture` (string) - The architecture of the resulting image. Defaults to \"x86_64\".\n\n- `image_name` (string) - The unique name of the resulting image. Defaults to\n  `packer-{{timestamp}}`.\n\n- `image_description` (string) - The description of the resulting image.\n\n- `image_encryption_key` (\\*common.CustomerEncryptionKey) - Image encryption key to apply to the created image. Possible values:\n  * kmsKeyName -  The name of the encryption key that is stored in Google Cloud KMS.\n  * RawKey: - A 256-bit customer-supplied encryption key, encodes in RFC 4648 base64.\n  \n  examples:\n  \n   ```json\n   {\n      \"kmsKeyName\": \"projects/${project}/locations/${region}/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4\"\n   }\n   ```\n  \n   ```hcl\n    image_encryption_key {\n      kmsKeyName = \"projects/${var.project}/locations/${var.region}/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4\"\n    }\n   ```\n  \n  Refer to the [Customer Encryption Key](#customer-encryption-key) section for more information on the contents of this block.\n\n- `image_family` (string) - The name of the image family to which the resulting image belongs. You\n  can create disks by specifying an image family instead of a specific\n  image name. The image family always returns its latest image that is not\n  deprecated.\n\n- `image_labels` (map[string]string) - Key/value pair labels to apply to the created image.\n\n- `image_licenses` ([]string) - Licenses to apply to the created image.\n\n- `image_guest_os_features` ([]string) - Guest OS features to apply to the created image.\n\n- `image_project_id` (string) - The project ID to push the build image into. Defaults to project_id.\n\n- `image_storage_locations` ([]string) - Storage location, either regional or multi-regional, where snapshot\n  content is to be stored and only accepts 1 value. Always defaults to a nearby regional or multi-regional\n  location.\n  \n  multi-regional example:\n  \n   ```json\n   {\n      \"image_storage_locations\": [\"us\"]\n   }\n   ```\n  regional example:\n  \n   ```json\n   {\n      \"image_storage_locations\": [\"us-east1\"]\n   }\n   ```\n\n- `instance_name` (string) - A name to give the launched instance. Beware that this must be unique.\n  Defaults to `packer-{{uuid}}`.\n\n- `labels` (map[string]string) - Key/value pair labels to apply to the launched instance.\n\n- `machine_type` (string) - The machine type. Defaults to \"e2-standard-2\".\n\n- `metadata` (map[string]string) - Metadata applied to the launched instance.\n  All metadata configuration values are expected to be of type string.\n  Google metadata options that take a value of `TRUE` or `FALSE` should be\n  set as a string (i.e  `\"TRUE\"` `\"FALSE\"` or `\"true\"` `\"false\"`).\n\n- `metadata_files` (map[string]string) - Metadata applied to the launched instance. Values are files.\n\n- `min_cpu_platform` (string) - A Minimum CPU Platform for VM Instance. Availability and default CPU\n  platforms vary across zones, based on the hardware available in each GCP\n  zone.\n  [Details](https://cloud.google.com/compute/docs/instances/specify-min-cpu-platform)\n\n- `network` (string) - The Google Compute network id or URL to use for the launched instance.\n  Defaults to \"default\". If the value is not a URL, it will be\n  interpolated to\n  `projects/((network_project_id))/global/networks/((network))`. This value\n  is not required if a subnet is specified.\n\n- `network_project_id` (string) - The project ID for the network and subnetwork to use for launched\n  instance. Defaults to project_id.\n\n- `omit_external_ip` (bool) - If true, the instance will not have an external IP. use_internal_ip must\n  be true if this property is true.\n\n- `on_host_maintenance` (string) - Sets Host Maintenance Option. Valid choices are `MIGRATE` and\n  `TERMINATE`. Please see [GCE Instance Scheduling\n  Options](https://cloud.google.com/compute/docs/instances/setting-instance-scheduling-options),\n  as not all machine\\_types support `MIGRATE` (i.e. machines with GPUs).\n  If preemptible is true this can only be `TERMINATE`. If preemptible is\n  false, it defaults to `MIGRATE`\n\n- `preemptible` (bool) - If true, launch a preemptible instance.\n\n- `node_affinity` ([]common.NodeAffinity) - Sets a node affinity label for the launched instance (eg. for sole tenancy).\n  Please see [Provisioning VMs on\n  sole-tenant nodes](https://cloud.google.com/compute/docs/nodes/provisioning-sole-tenant-vms)\n  for more information.\n  \n  ```hcl\n    key = \"workload\"\n    operator = \"IN\"\n    values = [\"packer\"]\n  ```\n  \n  Refer to the [Node Affinity](#node-affinities) for more information on affinities.\n\n- `state_timeout` (duration string | ex: \"1h5m2s\") - The time to wait for instance state changes. Defaults to \"5m\".\n\n- `region` (string) - The region in which to launch the instance. Defaults to the region\n  hosting the specified zone.\n\n- `scopes` ([]string) - The service account scopes for launched\n  instance. Defaults to:\n  \n  ```json\n  [\n    \"https://www.googleapis.com/auth/userinfo.email\",\n    \"https://www.googleapis.com/auth/compute\",\n    \"https://www.googleapis.com/auth/devstorage.full_control\"\n  ]\n  ```\n\n- `service_account_email` (string) - The service account to be used for launched instance. Defaults to the\n  project's default service account unless disable_default_service_account\n  is true.\n\n- `source_image_project_id` ([]string) - A list of project IDs to search for the source image. Packer will search the first\n  project ID in the list first, and fall back to the next in the list, until it finds the source image.\n\n- `startup_script_file` (string) - The path to a startup script to run on the launched instance from which the image will\n  be made. When set, the contents of the startup script file will be added to the instance metadata\n  under the `\"startup_script\"` metadata property. See [Providing startup script contents directly](https://cloud.google.com/compute/docs/startupscript#providing_startup_script_contents_directly) for more details.\n  \n  When using `startup_script_file` the following rules apply:\n  - The contents of the script file will overwrite the value of the `\"startup_script\"` metadata property at runtime.\n  - The contents of the script file will be wrapped in Packer's startup script wrapper, unless `wrap_startup_script` is disabled. See `wrap_startup_script` for more details.\n  - Not supported by Windows instances. See [Startup Scripts for Windows](https://cloud.google.com/compute/docs/startupscript#providing_a_startup_script_for_windows_instances) for more details.\n\n- `windows_password_timeout` (duration string | ex: \"1h5m2s\") - The time to wait for windows password to be retrieved. Defaults to \"3m\".\n\n- `wrap_startup_script` (boolean) - For backwards compatibility this option defaults to `\"true\"` in the future it will default to `\"false\"`.\n  If \"true\", the contents of `startup_script_file` or `\"startup_script\"` in the instance metadata\n  is wrapped in a Packer specific script that tracks the execution and completion of the provided\n  startup script. The wrapper ensures that the builder will not continue until the startup script has been executed.\n  - The use of the wrapped script file requires that the user or service account\n  running the build has the compute.instance.Metadata role.\n\n- `subnetwork` (string) - The Google Compute subnetwork id or URL to use for the launched\n  instance. Only required if the network has been created with custom\n  subnetting. Note, the region of the subnetwork must match the region or\n  zone in which the VM is launched. If the value is not a URL, it will be\n  interpolated to\n  `projects/((network_project_id))/regions/((region))/subnetworks/((subnetwork))`\n\n- `tags` ([]string) - Assign network tags to apply firewall rules to VM instance.\n\n- `use_internal_ip` (bool) - If true, use the instance's internal IP instead of its external IP\n  during building.\n\n- `use_os_login` (bool) - If true, OSLogin will be used to manage SSH access to the compute instance by\n  dynamically importing a temporary SSH key to the Google account's login profile,\n  and setting the `enable-oslogin` to `TRUE` in the instance metadata.\n  Optionally, `use_os_login` can be used with an existing `ssh_username` and `ssh_private_key_file`\n  if a SSH key has already been added to the Google account's login profile - See [Adding SSH Keys](https://cloud.google.com/compute/docs/instances/managing-instance-access#add_oslogin_keys).\n  \n  SSH keys can be added to an individual user account\n  \n  ```shell-session\n  $ gcloud compute os-login ssh-keys add --key-file=/home/user/.ssh/my-key.pub\n  \n  $ gcloud compute os-login describe-profile\n  PosixAccounts:\n  - accountId: \u003cproject-id\u003e\n   gid: '34567890754'\n   homeDirectory: /home/user_example_com\n   ...\n   primary: true\n   uid: '2504818925'\n   username: user_example_com\n  sshPublicKeys:\n   000000000000000000000000000000000000000000000000000000000000000a:\n     fingerprint: 000000000000000000000000000000000000000000000000000000000000000a\n  ```\n  \n  Or SSH keys can be added to an associated service account\n  ```shell-session\n  $ gcloud auth activate-service-account --key-file=\u003cpath to service account credentials file (e.g account.json)\u003e\n  $ gcloud compute os-login ssh-keys add --key-file=/home/user/.ssh/my-key.pub\n  \n  $ gcloud compute os-login describe-profile\n  PosixAccounts:\n  - accountId: \u003cproject-id\u003e\n   gid: '34567890754'\n   homeDirectory: /home/sa_000000000000000000000\n   ...\n   primary: true\n   uid: '2504818925'\n   username: sa_000000000000000000000\n  sshPublicKeys:\n   000000000000000000000000000000000000000000000000000000000000000a:\n     fingerprint: 000000000000000000000000000000000000000000000000000000000000000a\n  ```\n\n- `wait_to_add_ssh_keys` (duration string | ex: \"1h5m2s\") - The time to wait between the creation of the instance used to create the image,\n  and the addition of SSH configuration, including SSH keys, to that instance.\n  The delay is intended to protect packer from anything in the instance boot\n  sequence that has potential to disrupt the creation of SSH configuration\n  (e.g. SSH user creation, SSH key creation) on the instance.\n  Note: All other instance metadata, including startup scripts, are still added to the instance\n  during it's creation.\n  Example value: `5m`.\n\n\u003c!-- End of code generated from the comments of the Config struct in builder/googlecompute/config.go; --\u003e\n\n\n\u003c!-- Code generated from the comments of the IAPConfig struct in builder/googlecompute/step_start_tunnel.go; DO NOT EDIT MANUALLY --\u003e\n\n- `use_iap` (bool) - Whether to use an IAP proxy.\n  Prerequisites and limitations for using IAP:\n  - You must manually enable the IAP API in the Google Cloud console.\n  - You must have the gcloud sdk installed on the computer running Packer.\n  - If you use a service account, you must add it to project level IAP permissions\n    in https://console.cloud.google.com/security/iap. To do so, click\n    \"project\" \u003e \"SSH and TCP resources\" \u003e \"All Tunnel Resources\" \u003e\n    \"Add Member\". Then add your service account and choose the role\n    \"IAP-secured Tunnel User\" and add any conditions you may care about.\n\n- `iap_localhost_port` (int) - Which port to connect the local end of the IAM localhost proxy to. If\n  left blank, Packer will choose a port for you from available ports.\n\n- `iap_hashbang` (string) - What \"hashbang\" to use to invoke script that sets up gcloud.\n  Default: \"/bin/sh\"\n\n- `iap_ext` (string) - What file extension to use for script that sets up gcloud.\n  Default: \".sh\"\n\n- `iap_tunnel_launch_wait` (int) - How long to wait, in seconds, before assuming a tunnel launch was\n  successful. Defaults to 30 seconds for SSH or 40 seconds for WinRM.\n\n\u003c!-- End of code generated from the comments of the IAPConfig struct in builder/googlecompute/step_start_tunnel.go; --\u003e\n\n\n### Startup Scripts\n\nStartup scripts can be a powerful tool for configuring the instance from which\nthe image is made. The builder will wait for a startup script to terminate. A\nstartup script can be provided via the `startup_script_file` or\n`startup-script` instance creation `metadata` field. Therefore, the build time\nwill vary depending on the duration of the startup script. If\n`startup_script_file` is set, the `startup-script` `metadata` field will be\noverwritten. In other words, `startup_script_file` takes precedence.\n\nThe builder does check for a pass/fail/error signal from the startup\nscript by tracking the `startup-script-status` metadata. Packer will check if this key\nis set to done and if it not set to done before the timeout, Packer will fail the build.\n\n### Windows\nA Windows startup script can only be provided as a metadata field option. The\nbuilder will _not_ wait for a Windows startup script to terminate. You have\nto ensure that it finishes before the instance shuts down. For a list of\nsupported startup script keys refer to [Using startup scripts on Windows](https://cloud.google.com/compute/docs/instances/startup-scripts/windows)\n\n```hcl\nmetadata = {\n  sysprep-specialize-script-cmd = \"...\"\n}\n```\n\n### Logging\n\nStartup script logs can be copied to a Google Cloud Storage (GCS) location\nspecified via the `startup-script-log-dest` instance creation `metadata` field.\nThe GCS location must be writeable by the service account of the instance that Packer created.\n\n### Communicator Configuration\n\n#### Optional:\n\n\u003c!-- Code generated from the comments of the Config struct in communicator/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `communicator` (string) - Packer currently supports three kinds of communicators:\n  \n  -   `none` - No communicator will be used. If this is set, most\n      provisioners also can't be used.\n  \n  -   `ssh` - An SSH connection will be established to the machine. This\n      is usually the default.\n  \n  -   `winrm` - A WinRM connection will be established.\n  \n  In addition to the above, some builders have custom communicators they\n  can use. For example, the Docker builder has a \"docker\" communicator\n  that uses `docker exec` and `docker cp` to execute scripts and copy\n  files.\n\n- `pause_before_connecting` (duration string | ex: \"1h5m2s\") - We recommend that you enable SSH or WinRM as the very last step in your\n  guest's bootstrap script, but sometimes you may have a race condition\n  where you need Packer to wait before attempting to connect to your\n  guest.\n  \n  If you end up in this situation, you can use the template option\n  `pause_before_connecting`. By default, there is no pause. For example if\n  you set `pause_before_connecting` to `10m` Packer will check whether it\n  can connect, as normal. But once a connection attempt is successful, it\n  will disconnect and then wait 10 minutes before connecting to the guest\n  and beginning provisioning.\n\n\u003c!-- End of code generated from the comments of the Config struct in communicator/config.go; --\u003e\n\n\n\u003c!-- Code generated from the comments of the SSH struct in communicator/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `ssh_host` (string) - The address to SSH to. This usually is automatically configured by the\n  builder.\n\n- `ssh_port` (int) - The port to connect to SSH. This defaults to `22`.\n\n- `ssh_username` (string) - The username to connect to SSH with. Required if using SSH.\n\n- `ssh_password` (string) - A plaintext password to use to authenticate with SSH.\n\n- `ssh_ciphers` ([]string) - This overrides the value of ciphers supported by default by Golang.\n  The default value is [\n    \"aes128-gcm@openssh.com\",\n    \"chacha20-poly1305@openssh.com\",\n    \"aes128-ctr\", \"aes192-ctr\", \"aes256-ctr\",\n  ]\n  \n  Valid options for ciphers include:\n  \"aes128-ctr\", \"aes192-ctr\", \"aes256-ctr\", \"aes128-gcm@openssh.com\",\n  \"chacha20-poly1305@openssh.com\",\n  \"arcfour256\", \"arcfour128\", \"arcfour\", \"aes128-cbc\", \"3des-cbc\",\n\n- `ssh_clear_authorized_keys` (bool) - If true, Packer will attempt to remove its temporary key from\n  `~/.ssh/authorized_keys` and `/root/.ssh/authorized_keys`. This is a\n  mostly cosmetic option, since Packer will delete the temporary private\n  key from the host system regardless of whether this is set to true\n  (unless the user has set the `-debug` flag). Defaults to \"false\";\n  currently only works on guests with `sed` installed.\n\n- `ssh_key_exchange_algorithms` ([]string) - If set, Packer will override the value of key exchange (kex) algorithms\n  supported by default by Golang. Acceptable values include:\n  \"curve25519-sha256@libssh.org\", \"ecdh-sha2-nistp256\",\n  \"ecdh-sha2-nistp384\", \"ecdh-sha2-nistp521\",\n  \"diffie-hellman-group14-sha1\", and \"diffie-hellman-group1-sha1\".\n\n- `ssh_certificate_file` (string) - Path to user certificate used to authenticate with SSH.\n  The `~` can be used in path and will be expanded to the\n  home directory of current user.\n\n- `ssh_pty` (bool) - If `true`, a PTY will be requested for the SSH connection. This defaults\n  to `false`.\n\n- `ssh_timeout` (duration string | ex: \"1h5m2s\") - The time to wait for SSH to become available. Packer uses this to\n  determine when the machine has booted so this is usually quite long.\n  Example value: `10m`.\n  This defaults to `5m`, unless `ssh_handshake_attempts` is set.\n\n- `ssh_disable_agent_forwarding` (bool) - If true, SSH agent forwarding will be disabled. Defaults to `false`.\n\n- `ssh_handshake_attempts` (int) - The number of handshakes to attempt with SSH once it can connect.\n  This defaults to `10`, unless a `ssh_timeout` is set.\n\n- `ssh_bastion_host` (string) - A bastion host to use for the actual SSH connection.\n\n- `ssh_bastion_port` (int) - The port of the bastion host. Defaults to `22`.\n\n- `ssh_bastion_agent_auth` (bool) - If `true`, the local SSH agent will be used to authenticate with the\n  bastion host. Defaults to `false`.\n\n- `ssh_bastion_username` (string) - The username to connect to the bastion host.\n\n- `ssh_bastion_password` (string) - The password to use to authenticate with the bastion host.\n\n- `ssh_bastion_interactive` (bool) - If `true`, the keyboard-interactive used to authenticate with bastion host.\n\n- `ssh_bastion_private_key_file` (string) - Path to a PEM encoded private key file to use to authenticate with the\n  bastion host. The `~` can be used in path and will be expanded to the\n  home directory of current user.\n\n- `ssh_bastion_certificate_file` (string) - Path to user certificate used to authenticate with bastion host.\n  The `~` can be used in path and will be expanded to the\n  home directory of current user.\n\n- `ssh_file_transfer_method` (string) - `scp` or `sftp` - How to transfer files, Secure copy (default) or SSH\n  File Transfer Protocol.\n  \n  **NOTE**: Guests using Windows with Win32-OpenSSH v9.1.0.0p1-Beta, scp\n  (the default protocol for copying data) returns a a non-zero error code since the MOTW\n  cannot be set, which cause any file transfer to fail. As a workaround you can override the transfer protocol\n  with SFTP instead `ssh_file_transfer_method = \"sftp\"`.\n\n- `ssh_proxy_host` (string) - A SOCKS proxy host to use for SSH connection\n\n- `ssh_proxy_port` (int) - A port of the SOCKS proxy. Defaults to `1080`.\n\n- `ssh_proxy_username` (string) - The optional username to authenticate with the proxy server.\n\n- `ssh_proxy_password` (string) - The optional password to use to authenticate with the proxy server.\n\n- `ssh_keep_alive_interval` (duration string | ex: \"1h5m2s\") - How often to send \"keep alive\" messages to the server. Set to a negative\n  value (`-1s`) to disable. Example value: `10s`. Defaults to `5s`.\n\n- `ssh_read_write_timeout` (duration string | ex: \"1h5m2s\") - The amount of time to wait for a remote command to end. This might be\n  useful if, for example, packer hangs on a connection after a reboot.\n  Example: `5m`. Disabled by default.\n\n- `ssh_remote_tunnels` ([]string) - \n\n- `ssh_local_tunnels` ([]string) - \n\n\u003c!-- End of code generated from the comments of the SSH struct in communicator/config.go; --\u003e\n\n\n- `ssh_private_key_file` (string) - Path to a PEM encoded private key file to use to authenticate with SSH.\n  The `~` can be used in path and will be expanded to the home directory\n  of current user.\n\n\n\n### Temporary SSH keypair\n\n\u003c!-- Code generated from the comments of the SSHTemporaryKeyPair struct in communicator/config.go; DO NOT EDIT MANUALLY --\u003e\n\nWhen no ssh credentials are specified, Packer will generate a temporary SSH\nkeypair for the instance. You can change the algorithm type and bits\nsettings.\n\n\u003c!-- End of code generated from the comments of the SSHTemporaryKeyPair struct in communicator/config.go; --\u003e\n\n\n#### Optional:\n\n\u003c!-- Code generated from the comments of the SSHTemporaryKeyPair struct in communicator/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `temporary_key_pair_type` (string) - `dsa` | `ecdsa` | `ed25519` | `rsa` ( the default )\n  \n  Specifies the type of key to create. The possible values are 'dsa',\n  'ecdsa', 'ed25519', or 'rsa'.\n  \n  NOTE: DSA is deprecated and no longer recognized as secure, please\n  consider other alternatives like RSA or ED25519.\n\n- `temporary_key_pair_bits` (int) - Specifies the number of bits in the key to create. For RSA keys, the\n  minimum size is 1024 bits and the default is 4096 bits. Generally, 3072\n  bits is considered sufficient. DSA keys must be exactly 1024 bits as\n  specified by FIPS 186-2. For ECDSA keys, bits determines the key length\n  by selecting from one of three elliptic curve sizes: 256, 384 or 521\n  bits. Attempting to use bit lengths other than these three values for\n  ECDSA keys will fail. Ed25519 keys have a fixed length and bits will be\n  ignored.\n  \n  NOTE: DSA is deprecated and no longer recognized as secure as specified\n  by FIPS 186-5, please consider other alternatives like RSA or ED25519.\n\n\u003c!-- End of code generated from the comments of the SSHTemporaryKeyPair struct in communicator/config.go; --\u003e\n\n\n### Gotchas\n\nCentOS and recent Debian images have root ssh access disabled by default. Set\n`ssh_username` to any user, which will be created by packer with sudo access.\n\nThe machine type must have a scratch disk, which means you can't use an\n`f1-micro` or `g1-small` to build images.\n\n## Extra disk attachments\n\n\u003c!-- Code generated from the comments of the BlockDevice struct in lib/common/block_device.go; DO NOT EDIT MANUALLY --\u003e\n\nBlockDevice is a block device attachement/creation to an instance when building an image.\n\n\u003c!-- End of code generated from the comments of the BlockDevice struct in lib/common/block_device.go; --\u003e\n\n\nThese can be defined using the [disk_attachment](#disk_attachment) block in the configuration.\n\nNote that this is an array, and therefore in HCL2 can be defined as multiple blocks, each\none corresponding to a disk that will be attached to the instance you are booting.\n\nExample:\n\n```hcl\nsource \"googlecompute\" \"example\" {\n  # Add whichever is necessary to build the image\n\n  disk_attachment {\n    volume_type     = \"scratch\"\n    volume_size     = 375\n  }\n\n  disk_attachment {\n    volume_type     = \"pd-standard\"\n    volume_size     = 25\n    interface_type  = \"SCSI\"\n  }\n}\n```\n\n### Required:\n\n\u003c!-- Code generated from the comments of the BlockDevice struct in lib/common/block_device.go; DO NOT EDIT MANUALLY --\u003e\n\n- `volume_size` (int) - Size of the volume to request, in gigabytes.\n  \n  The size specified must be in range of the sizes for the chosen volume type.\n\n- `volume_type` (BlockDeviceType) - The volume type is the type of storage to reserve and attach to the instance being provisioned.\n  \n  The following values are supported by this builder:\n  * scratch: local SSD data, always 375 GiB (default)\n  * pd_standard: persistent, HDD-backed disk\n  * pd_balanced: persistent, SSD-backed disk\n  * pd_ssd: persistent, SSD-backed disk, with extra performance guarantees\n  * pd_extreme: persistent, fastest SSD-backed disk, with custom IOPS\n  * hyperdisk-balanced: persistent hyperdisk volume, bootable\n  * hyperdisk-extreme: persistent hyperdisk volume, optimised for performance\n  * hyperdisk-ml: persistent, shareable, hyperdisk volume, highest throughput\n  * hyperdisk-throughput: persistent hyperdisk volume with flexible throughput\n  \n  For details on the different types, refer to: https://cloud.google.com/compute/docs/disks#disk-types\n  For more information on hyperdisk volumes, refer to: https://cloud.google.com/compute/docs/disks/hyperdisks#throughput\n\n\u003c!-- End of code generated from the comments of the BlockDevice struct in lib/common/block_device.go; --\u003e\n\n\n### Optional:\n\n\u003c!-- Code generated from the comments of the BlockDevice struct in lib/common/block_device.go; DO NOT EDIT MANUALLY --\u003e\n\n- `attachment_mode` (string) - How to attach the volume to the instance\n  \n  Can be either READ_ONLY or READ_WRITE (default).\n\n- `create_image` (bool) - If true, an image will be created for this disk, instead of the boot disk.\n  \n  This only applies to non-scratch disks, and can only be specified on one disk at a\n  time.\n\n- `device_name` (string) - The device name as exposed to the OS in the /dev/disk/by-id/google-* directory\n  \n  If unspecified, the disk will have a default name in the form\n  persistent-disk-x with 'x' being a number assigned by GCE\n  \n  This field only applies to persistent disks, local SSDs will always\n  be exposed as /dev/disk/by-id/google-local-nvme-ssd-x.\n\n- `disk_encryption_key` (CustomerEncryptionKey) - Disk encryption key to apply to the requested disk.\n  \n  Possible values:\n  * kmsKeyName -  The name of the encryption key that is stored in Google Cloud KMS.\n  * RawKey: - A 256-bit customer-supplied encryption key, encodes in RFC 4648 base64.\n  \n  Refer to the [Customer Encryption Key](#customer-encryption-key) section for more information on the contents of this block.\n\n- `disk_name` (string) - Name of the disk to create.\n  This only applies to non-scratch disks. If the disk is persistent, and\n  not specified, Packer will generate a unique name for the disk.\n  \n  The name must be 1-63 characters long and comply to the regexp\n  '[a-z]([-a-z0-9]*[a-z0-9])?'\n\n- `interface_type` (string) - The interface to use for attaching the disk.\n  Can be either NVME or SCSI. Defaults to SCSI.\n  \n  The available options depend on the type of disk, SEE: https://cloud.google.com/compute/docs/disks/persistent-disks#choose_an_interface\n\n- `iops` (int) - The requested IOPS for the disk.\n  \n  This is only available for pd_extreme disks.\n\n- `keep_device` (bool) - Keep the device in the created disks after the instance is terminated.\n  By default, the builder will remove the disks at the end of the build.\n  \n  This cannot be used with 'scratch' volumes.\n\n- `replica_zones` ([]string) - The list of extra zones to replicate the disk into\n  \n  The zone in which the instance is created will automatically be\n  added to the zones in which the disk is replicated.\n\n- `source_volume` (string) - The URI of the volume to attach\n  \n  If this is specified, it won't be deleted after the instance is shut-down.\n\n- `_` (string) - Zone is the zone in which to create the disk in.\n  \n  It is not exposed since the parent config already specifies it\n  and it will be set for the block device when preparing it.\n\n\u003c!-- End of code generated from the comments of the BlockDevice struct in lib/common/block_device.go; --\u003e\n\n\n## Customer Encryption Key\n\nSpecifying a custom key allows you to use your own encryption keys to encrypt the data\nof the image you are creating.\n\nNote: you will need to reuse the same key later on when reusing the image.\n\n\u003c!-- Code generated from the comments of the CustomerEncryptionKey struct in lib/common/client_keys.go; DO NOT EDIT MANUALLY --\u003e\n\n- `kmsKeyName` (string) - KmsKeyName: The name of the encryption key that is stored in Google\n  Cloud KMS.\n\n- `rawKey` (string) - RawKey: Specifies a 256-bit customer-supplied encryption key, encoded\n  in RFC 4648 base64 to either encrypt or decrypt this resource.\n\n\u003c!-- End of code generated from the comments of the CustomerEncryptionKey struct in lib/common/client_keys.go; --\u003e\n\n\n## Node Affinities\n\nNode affinity configuration allows you to restrict the nodes on which to run the\ninstance that Packer will build the image from.\nThis requires configuring [sole-tenant node groups](https://cloud.google.com/compute/docs/nodes/provisioning-sole-tenant-vms) first.\n\n\u003c!-- Code generated from the comments of the NodeAffinity struct in lib/common/affinities.go; DO NOT EDIT MANUALLY --\u003e\n\n- `key` (string) - Key: Corresponds to the label key of Node resource.\n\n- `operator` (string) - Operator: Defines the operation of node selection. Valid operators are IN for affinity and\n  NOT_IN for anti-affinity.\n\n- `values` ([]string) - Values: Corresponds to the label values of Node resource.\n\n\u003c!-- End of code generated from the comments of the NodeAffinity struct in lib/common/affinities.go; --\u003e\n","created_at":"2024-07-29T18:11:54.457Z","updated_at":"2024-07-29T18:11:54.457Z","name":"Google Cloud Platform","slug":"googlecompute","component":{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:30.937Z","updated_at":"2022-11-09T22:56:30.937Z"},"variable_groups":[]},{"id":"1531103a-f59c-42a7-aa09-46b13d431a5a","integration_release_id":"02ab6602-3b11-4fc7-a42c-859020c41df8","component_id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","readme":"Type: `googlecompute-export`\nArtifact BuilderId: `packer.post-processor.googlecompute-export`\n\nThe Google Compute Image Exporter post-processor exports the resultant image\nfrom a googlecompute build as a gzipped tarball to Google Cloud Storage (GCS).\n\nThe exporter uses the same Google Cloud Platform (GCP) project and\nauthentication credentials as the googlecompute build that produced the image.\nA temporary VM is started in the GCP project using these credentials. The VM\nmounts the built image as a disk then dumps, compresses, and tars the image.\nThe VM then uploads the tarball to the provided GCS `paths` using the same\ncredentials.\n\nAs such, the authentication credentials that built the image must have write\npermissions to the GCS `paths`.\n\n~\u003e **Note**: By default the GCE image being exported will be deleted once the image has been exported.\nTo prevent Packer from deleting the image set the `keep_input_artifact` configuration option to `true`. See [Post-Processor Input Artifacts](/packer/docs/templates/legacy_json_templates/post-processors#input-artifacts) for more details.\n\n## Authentication\n\nTo authenticate with GCE, this builder supports everything the plugin does.\nTo get more information on this, refer to the plugin's description page, under\nthe [authentication](/packer/integrations/hashicorp/googlecompute#authentication) section.\n\n## Configuration\n\n### Required\n\n\u003c!-- Code generated from the comments of the Config struct in post-processor/googlecompute-export/post-processor.go; DO NOT EDIT MANUALLY --\u003e\n\n- `paths` ([]string) - A list of GCS paths where the image will be exported.\n  For example `'gs://mybucket/path/to/file.tar.gz'`\n\n\u003c!-- End of code generated from the comments of the Config struct in post-processor/googlecompute-export/post-processor.go; --\u003e\n\n\n### Optional\n\n\u003c!-- Code generated from the comments of the Config struct in post-processor/googlecompute-export/post-processor.go; DO NOT EDIT MANUALLY --\u003e\n\n- `scopes` ([]string) - The service account scopes for launched exporter post-processor instance.\n  Defaults to:\n  \n  ```json\n  [\n    \"https://www.googleapis.com/auth/cloud-platform\"\n  ]\n  ```\n\n- `disk_size` (int64) - The size of the export instances disk.\n  The disk is unused for the export but a larger size will increase `pd-ssd` read speed.\n  This defaults to `200`, which is 200GB.\n\n- `disk_type` (string) - Type of disk used to back the export instance, like\n  `pd-ssd` or `pd-standard`. Defaults to `pd-ssd`.\n\n- `machine_type` (string) - The export instance machine type. Defaults to `\"n1-highcpu-4\"`.\n\n- `network` (string) - The Google Compute network id or URL to use for the export instance.\n  Defaults to `\"default\"`. If the value is not a URL, it\n  will be interpolated to `projects/((builder_project_id))/global/networks/((network))`.\n  This value is not required if a `subnet` is specified.\n\n- `subnetwork` (string) - The Google Compute subnetwork id or URL to use for\n  the export instance. Only required if the `network` has been created with\n  custom subnetting. Note, the region of the subnetwork must match the\n  `zone` in which the VM is launched. If the value is not a URL,\n  it will be interpolated to\n  `projects/((builder_project_id))/regions/((region))/subnetworks/((subnetwork))`\n\n- `zone` (string) - The zone in which to launch the export instance. Defaults\n  to `googlecompute` builder zone. Example: `\"us-central1-a\"`\n\n- `service_account_email` (string) - Service Account Email\n\n\u003c!-- End of code generated from the comments of the Config struct in post-processor/googlecompute-export/post-processor.go; --\u003e\n\n\n## Basic Example\n\nThe following example builds a GCE image in the project, `my-project`, with an\naccount whose keyfile is `account.json`. After the image build, a temporary VM\nwill be created to export the image as a gzipped tarball to\n`gs://mybucket1/path/to/file1.tar.gz` and\n`gs://mybucket2/path/to/file2.tar.gz`. `keep_input_artifact` is true, so the\nGCE image won't be deleted after the export.\n\nIn order for this example to work, the account associated with `account.json`\nmust have write access to both `gs://mybucket1/path/to/file1.tar.gz` and\n`gs://mybucket2/path/to/file2.tar.gz`.\n\n**JSON**\n\n```json\n{\n  \"builders\": [\n    {\n      \"type\": \"googlecompute\",\n      \"account_file\": \"account.json\",\n      \"project_id\": \"my-project\",\n      \"source_image\": \"debian-7-wheezy-v20150127\",\n      \"zone\": \"us-central1-a\"\n    }\n  ],\n  \"post-processors\": [\n    {\n      \"type\": \"googlecompute-export\",\n      \"paths\": [\n        \"gs://mybucket1/path/to/file1.tar.gz\",\n        \"gs://mybucket2/path/to/file2.tar.gz\"\n      ],\n      \"keep_input_artifact\": true\n    }\n  ]\n}\n```\n\n\n**HCL2**\n\n```hcl\n\n  source \"googlecompute\" \"example\" {\n    account_file = \"account.json\"\n    project_id = \"my-project\"\n    source_image = \"debian-7-wheezy-v20150127\"\n    zone = \"us-central1-a\"\n  }\n\n  build {\n    sources = [\"source.googlecompute.example\"]\n\n    post-processor \"googlecompute-export\" {\n      paths = [\n        \"gs://mybucket1/path/to/file1.tar.gz\",\n        \"gs://mybucket2/path/to/file2.tar.gz\"\n      ]\n      keep_input_artifact = true\n    }\n  }\n```\n","created_at":"2024-07-29T18:11:54.854Z","updated_at":"2024-07-29T18:11:54.854Z","name":"Google Cloud Platform Image Exporter","slug":"googlecompute-export","component":{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:31.157Z","updated_at":"2023-07-26T17:26:54.831Z"},"variable_groups":[]},{"id":"741d427c-e204-4ac5-9e95-c2cf51aaa8bd","integration_release_id":"02ab6602-3b11-4fc7-a42c-859020c41df8","component_id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","readme":"Type: `googlecompute-import`\nArtifact BuilderId: `packer.post-processor.googlecompute-import`\n\nThe Google Compute Image Import post-processor takes a compressed raw disk\nimage and imports it to a GCE image available to Google Compute Engine.\n\n~\u003e This post-processor is for advanced users. Please ensure you read the\n[GCE import documentation](https://cloud.google.com/compute/docs/images/import-existing-image)\nbefore using this post-processor.\n\n## How Does it Work?\n\nThe import process operates by uploading a temporary copy of the compressed raw\ndisk image to a GCS bucket, and calling an import task in GCP on the raw disk\nfile. Once completed, a GCE image is created containing the converted virtual\nmachine. The temporary raw disk image copy in GCS can be discarded after the import is complete.\n\nGoogle Cloud has very specific requirements for images being imported. Please\nsee the [GCE import documentation](https://cloud.google.com/compute/docs/images/import-existing-image)\nfor details.\n\n~\u003e **Note**: To prevent Packer from deleting the compressed RAW disk image set the `keep_input_artifact` configuration option to `true`.\nSee [Post-Processor Input Artifacts](/packer/docs/templates/legacy_json_templates/post-processors#input-artifacts) for more details.\n\n## Authentication\n\nTo authenticate with GCE, this builder supports everything the plugin does.\nTo get more information on this, refer to the plugin's description page, under\nthe [authentication](/packer/integrations/hashicorp/googlecompute#authentication) section.\n\n## Configuration\n\n### Required\n\n\u003c!-- Code generated from the comments of the Config struct in post-processor/googlecompute-import/post-processor.go; DO NOT EDIT MANUALLY --\u003e\n\n- `project_id` (string) - The project ID where the GCS bucket exists and where the GCE image is stored.\n\n- `bucket` (string) - The name of the GCS bucket where the raw disk image will be uploaded.\n\n- `image_name` (string) - The unique name of the resulting image.\n\n\u003c!-- End of code generated from the comments of the Config struct in post-processor/googlecompute-import/post-processor.go; --\u003e\n\n\n### Optional\n\n\u003c!-- Code generated from the comments of the Config struct in post-processor/googlecompute-import/post-processor.go; DO NOT EDIT MANUALLY --\u003e\n\n- `scopes` ([]string) - The service account scopes for launched importer post-processor instance.\n  Defaults to:\n  \n  ```json\n  [\n    \"https://www.googleapis.com/auth/cloud-platform\"\n  ]\n  ```\n\n- `gcs_object_name` (string) - The name of the GCS object in `bucket` where\n  the RAW disk image will be copied for import. This is treated as a\n  [template engine](/packer/docs/templates/legacy_json_templates/engine). Therefore, you\n  may use user variables and template functions in this field. Defaults to\n  `packer-import-{{timestamp}}.tar.gz`.\n\n- `image_architecture` (string) - Specifies the architecture or processor type that this image can support. Must be one of: `arm64` or `x86_64`. Defaults to `ARCHITECTURE_UNSPECIFIED`.\n\n- `image_description` (string) - The description of the resulting image.\n\n- `image_family` (string) - The name of the image family to which the resulting image belongs.\n\n- `image_guest_os_features` ([]string) - A list of features to enable on the guest operating system. Applicable only for bootable images. Valid\n  values are `MULTI_IP_SUBNET`, `UEFI_COMPATIBLE`,\n  `VIRTIO_SCSI_MULTIQUEUE`, `GVNIC` and `WINDOWS` currently.\n\n- `image_labels` (map[string]string) - Key/value pair labels to apply to the created image.\n\n- `image_storage_locations` ([]string) - Specifies a Cloud Storage location, either regional or multi-regional, where image content is to be stored. If not specified, the multi-region location closest to the source is chosen automatically.\n\n- `skip_clean` (bool) - Skip removing the TAR file uploaded to the GCS\n  bucket after the import process has completed. \"true\" means that we should\n  leave it in the GCS bucket, \"false\" means to clean it out. Defaults to\n  `false`.\n\n- `image_platform_key` (string) - A key used to establish the trust relationship between the platform owner and the firmware. You may only specify one platform key, and it must be a valid X.509 certificate.\n\n- `image_key_exchange_key` ([]string) - A key used to establish a trust relationship between the firmware and the OS. You may specify multiple comma-separated keys for this value.\n\n- `image_signatures_db` ([]string) - A database of certificates that are trusted and can be used to sign boot files. You may specify single or multiple comma-separated values for this value.\n\n- `image_forbidden_signatures_db` ([]string) - A database of certificates that have been revoked and will cause the system to stop booting if a boot file is signed with one of them. You may specify single or multiple comma-separated values for this value.\n\n\u003c!-- End of code generated from the comments of the Config struct in post-processor/googlecompute-import/post-processor.go; --\u003e\n\n\n## Basic Example\n\nHere is a basic example. This assumes that the builder has produced an\ncompressed raw disk image artifact for us to work with, and that the GCS bucket\nhas been created.\n\n**HCL**\n\n```hcl\npost-processor \"googlecompute-import\"{\n  account_file = \"account.json\"\n  bucket = \"my-bucket\"\n  project_id = \"my-project\"\n  image_name = \"my-gce-image\"\n}\n```\n\n**JSON**\n\n```json\n{\n  \"type\": \"googlecompute-import\",\n  \"account_file\": \"account.json\",\n  \"project_id\": \"my-project\",\n  \"bucket\": \"my-bucket\",\n  \"image_name\": \"my-gce-image\"\n}\n```\n\n\n## QEMU Builder Example\n\nHere is a complete example for building a Fedora 31 server GCE image. For this\nexample Packer was run from a Debian Linux host with KVM installed.\n\n    $ packer build -var serial=$(tty) build.pkr.hcl\n\n**HCL2**\n\n```hcl\nvariables {\n  account_file = \"account.json\"\n  bucket = \"my-bucket\"\n  project = \"my-project\"\n  serial = \"\"\n}\n\nsource \"qemu\" \"example\" {\n    accelerator = \"kvm\"\n    boot_command = [\n      \"\u003ctab\u003e console=ttyS0,115200n8 inst.text inst.ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/fedora-31-ks.cfg rd.live.check=0\u003center\u003e\u003cwait\u003e\"\n    ]\n    disk_size = \"15000\"\n    format = \"raw\"\n    iso_checksum = \"sha256:225ebc160e40bb43c5de28bad9680e3a78a9db40c9e3f4f42f3ee3f10f95dbeb\"\n    iso_url = \"https://download-ib01.fedoraproject.org/pub/fedora/linux/releases/31/Server/x86_64/iso/Fedora-Server-dvd-x86_64-31-1.9.iso\"\n    headless = \"true\"\n    http_directory = \"http\"\n    http_port_max = \"10089\"\n    http_port_min = \"10082\"\n    output_directory = \"output\"\n    shutdown_timeout = \"30m\"\n\t\tshutdown_command = \"echo 'vagrant'|sudo -S shutdown -P now\"\n\t\tssh_username = \"vagrant\"\n\t\tssh_password = \"vagrant\"\n    vm_name = \"disk.raw\"\n    qemu_binary = \"/usr/bin/kvm\"\n    qemuargs = [\n      [\"-m\", \"1024\"],\n      [\"-cpu\", \"host\"],\n      [\"-chardev\", \"tty,id=pts,path=${var.serial}\"],\n      [\"-device\", \"isa-serial,chardev=pts\"],\n      [\"-device\", \"virtio-net,netdev=user.0\"]\n    ]\n}\n\nbuild {\n  sources = [\"source.qemu.example\"]\n\n  post-processors {\n    post-processor \"compress\" {\n        output = \"output/disk.raw.tar.gz\"\n    }\n    post-processor \"googlecompute-import\"  {\n        account_file = var.account_file\n        bucket = var.bucket\n        project_id = var.project\n        image_name = \"fedora31-server-packertest\"\n        image_description = \"Fedora 31 Server\"\n        image_family = \"fedora31-server\"\n      }\n    }\n}\n```\n\n  **JSON**\n\n```json\n{\n  \"variables\": {\n    \"account_file\": \"account.json\",\n    \"bucket\": \"my-bucket\",\n    \"project\": \"my-project\",\n    \"serial\": \"\"\n  },\n  \"builders\": [\n    {\n      \"type\": \"qemu\",\n      \"accelerator\": \"kvm\",\n      \"boot_command\": [\n        \"\u003ctab\u003e console=ttyS0,115200n8 inst.text inst.ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/fedora-31-ks.cfg rd.live.check=0\u003center\u003e\u003cwait\u003e\"\n      ],\n      \"disk_size\": \"15000\",\n      \"format\": \"raw\",\n      \"iso_checksum\": \"sha256:225ebc160e40bb43c5de28bad9680e3a78a9db40c9e3f4f42f3ee3f10f95dbeb\",\n      \"iso_url\": \"https://download-ib01.fedoraproject.org/pub/fedora/linux/releases/31/Server/x86_64/iso/Fedora-Server-dvd-x86_64-31-1.9.iso\",\n      \"headless\": \"true\",\n      \"http_directory\": \"http\",\n      \"http_port_max\": \"10089\",\n      \"http_port_min\": \"10082\",\n      \"output_directory\": \"output\",\n      \"shutdown_timeout\": \"30m\",\n      \"shutdown_command\": \"echo 'vagrant'|sudo -S shutdown -P now\",\n      \"ssh_username\": \"vagrant\",\n      \"ssh_password\": \"vagrant\",\n      \"vm_name\": \"disk.raw\",\n      \"qemu_binary\": \"/usr/bin/kvm\",\n      \"qemuargs\": [\n        [\"-m\", \"1024\"],\n        [\"-cpu\", \"host\"],\n        [\"-chardev\", \"tty,id=pts,path={{user `serial`}}\"],\n        [\"-device\", \"isa-serial,chardev=pts\"],\n        [\"-device\", \"virtio-net,netdev=user.0\"]\n      ]\n    }\n  ],\n  \"post-processors\": [\n    [\n      {\n        \"type\": \"compress\",\n        \"output\": \"output/disk.raw.tar.gz\"\n      },\n      {\n        \"type\": \"googlecompute-import\",\n        \"project_id\": \"{{user `project`}}\",\n        \"account_file\": \"{{user `account_file`}}\",\n        \"bucket\": \"{{user `bucket`}}\",\n        \"image_name\": \"fedora31-server-packertest\",\n        \"image_description\": \"Fedora 31 Server\",\n        \"image_family\": \"fedora31-server\"\n      }\n    ]\n  ]\n}\n```\n","created_at":"2024-07-29T18:11:54.675Z","updated_at":"2024-07-29T18:11:54.675Z","name":"Google Cloud Platform Image Import","slug":"googlecompute-import","component":{"id":"73965f1c-ad56-4f38-a31b-dc17d08c0ba6","slug":"post-processor","name":"Post-Processor","plural_name":"Post-Processors","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:31.157Z","updated_at":"2023-07-26T17:26:54.831Z"},"variable_groups":[]}]},"component":{"id":"8f94f147-7734-4cb0-bdb7-9164a4dbf4a2","integration_release_id":"02ab6602-3b11-4fc7-a42c-859020c41df8","component_id":"36076511-3ced-4faf-addf-101fce0405ff","readme":"Type: `googlecompute`\nArtifact BuilderId: `packer.googlecompute`\n\nThe `googlecompute` Packer builder is able to create\n[images](https://developers.google.com/compute/docs/images) for use with\n[Google Compute Engine](https://cloud.google.com/products/compute-engine) (GCE)\nbased on existing images.\n\nIt is possible to build images from scratch, but not with the `googlecompute`\nPacker builder. The process is recommended only for advanced users, please see\n[Building GCE Images from Scratch](https://cloud.google.com/compute/docs/tutorials/building-images)\nand the [Google Compute Import\nPost-Processor](/packer/integrations/hashicorp/googlecompute/latest/components/post-processor/googlecompute-import) for more\ninformation.\n\n## Authentication\n\nTo authenticate with GCE, this builder supports everything the plugin does.\nTo get more information on this, refer to the plugin's description page, under\nthe [authentication](/packer/integrations/hashicorp/googlecompute#authentication) section.\n\n## Configuration Reference\n\nConfiguration options are organized below into two categories: required and\noptional. Within each category, the available options are alphabetized and\ndescribed.\n\nIn addition to the options listed here, a\n[communicator](/packer/docs/templates/legacy_json_templates/communicator) can be configured for this\nbuilder.\n\n### Required:\n\n\u003c!-- Code generated from the comments of the Config struct in builder/googlecompute/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `project_id` (string) - The project ID that will be used to launch instances and store images.\n\n- `source_image` (string) - The source image to use to create the new image from. You can also\n  specify source_image_family instead. If both source_image and\n  source_image_family are specified, source_image takes precedence.\n  Example: \"debian-8-jessie-v20161027\"\n\n- `source_image_family` (string) - The source image family to use to create the new image from. The image\n  family always returns its latest image that is not deprecated. Example:\n  \"debian-8\".\n\n- `zone` (string) - The zone in which to launch the instance used to create the image.\n  Example: \"us-central1-a\"\n\n\u003c!-- End of code generated from the comments of the Config struct in builder/googlecompute/config.go; --\u003e\n\n\n### Optional:\n\n\u003c!-- Code generated from the comments of the Config struct in builder/googlecompute/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `accelerator_type` (string) - Full or partial URL of the guest accelerator type. GPU accelerators can\n  only be used with `\"on_host_maintenance\": \"TERMINATE\"` option set.\n  Example:\n  `\"projects/project_id/zones/europe-west1-b/acceleratorTypes/nvidia-tesla-k80\"`\n\n- `accelerator_count` (int64) - Number of guest accelerator cards to add to the launched instance.\n\n- `address` (string) - The name of a pre-allocated static external IP address. Note, must be\n  the name and not the actual IP address.\n\n- `disable_default_service_account` (bool) - If true, the default service account will not be used if\n  service_account_email is not specified. Set this value to true and omit\n  service_account_email to provision a VM with no service account.\n\n- `disk_name` (string) - The name of the disk, if unset the instance name will be used.\n\n- `disk_size` (int64) - The size of the disk in GB. This defaults to 20, which is 20GB.\n\n- `disk_type` (string) - Type of disk used to back your instance, like pd-ssd or pd-standard.\n  Defaults to pd-standard.\n\n- `disk_encryption_key` (\\*common.CustomerEncryptionKey) - Disk encryption key to apply to the created boot disk. Possible values:\n  * kmsKeyName -  The name of the encryption key that is stored in Google Cloud KMS.\n  * RawKey: - A 256-bit customer-supplied encryption key, encodes in RFC 4648 base64.\n  \n  examples:\n  \n   ```json\n   {\n      \"kmsKeyName\": \"projects/${project}/locations/${region}/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4\"\n   }\n   ```\n  \n   ```hcl\n    disk_encryption_key {\n      kmsKeyName = \"projects/${var.project}/locations/${var.region}/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4\"\n    }\n   ```\n  \n  Refer to the [Customer Encryption Key](#customer-encryption-key) section for more information on the contents of this block.\n\n- `enable_nested_virtualization` (bool) - Create a instance with enabling nested virtualization.\n\n- `enable_secure_boot` (bool) - Create a Shielded VM image with Secure Boot enabled. It helps ensure that\n  the system only runs authentic software by verifying the digital signature\n  of all boot components, and halting the boot process if signature verification\n  fails. [Details](https://cloud.google.com/security/shielded-cloud/shielded-vm)\n\n- `enable_vtpm` (bool) - Create a Shielded VM image with virtual trusted platform module\n  Measured Boot enabled. A vTPM is a virtualized trusted platform module,\n  which is a specialized computer chip you can use to protect objects,\n  like keys and certificates, that you use to authenticate access to your\n  system. [Details](https://cloud.google.com/security/shielded-cloud/shielded-vm)\n\n- `enable_integrity_monitoring` (bool) - Integrity monitoring helps you understand and make decisions about the\n  state of your VM instances. Note: integrity monitoring relies on having\n  vTPM enabled. [Details](https://cloud.google.com/security/shielded-cloud/shielded-vm)\n\n- `disk_attachment` ([]common.BlockDevice) - Extra disks to attach to the instance that will build the final image.\n  \n  You may reference an existing external persistent disk, or you can configure\n  a set of disks to be created before the instance is created, and will\n  be deleted upon build completion.\n  \n  Scratch (ephemeral) SSDs are always created at launch, and deleted when the\n  instance is torn-down.\n  \n  Note: local SSDs are not supported on all machine types, refer to the\n  [docs](https://cloud.google.com/compute/docs/disks/local-ssd#choose_number_local_ssds)\n  for more information on that.\n  \n  Refer to the [Extra Disk Attachments](#extra-disk-attachments) section for\n  more information on this configuration type.\n\n- `skip_create_image` (bool) - Skip creating the image. Useful for setting to `true` during a build test stage. Defaults to `false`.\n\n- `image_architecture` (string) - The architecture of the resulting image. Defaults to \"x86_64\".\n\n- `image_name` (string) - The unique name of the resulting image. Defaults to\n  `packer-{{timestamp}}`.\n\n- `image_description` (string) - The description of the resulting image.\n\n- `image_encryption_key` (\\*common.CustomerEncryptionKey) - Image encryption key to apply to the created image. Possible values:\n  * kmsKeyName -  The name of the encryption key that is stored in Google Cloud KMS.\n  * RawKey: - A 256-bit customer-supplied encryption key, encodes in RFC 4648 base64.\n  \n  examples:\n  \n   ```json\n   {\n      \"kmsKeyName\": \"projects/${project}/locations/${region}/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4\"\n   }\n   ```\n  \n   ```hcl\n    image_encryption_key {\n      kmsKeyName = \"projects/${var.project}/locations/${var.region}/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4\"\n    }\n   ```\n  \n  Refer to the [Customer Encryption Key](#customer-encryption-key) section for more information on the contents of this block.\n\n- `image_family` (string) - The name of the image family to which the resulting image belongs. You\n  can create disks by specifying an image family instead of a specific\n  image name. The image family always returns its latest image that is not\n  deprecated.\n\n- `image_labels` (map[string]string) - Key/value pair labels to apply to the created image.\n\n- `image_licenses` ([]string) - Licenses to apply to the created image.\n\n- `image_guest_os_features` ([]string) - Guest OS features to apply to the created image.\n\n- `image_project_id` (string) - The project ID to push the build image into. Defaults to project_id.\n\n- `image_storage_locations` ([]string) - Storage location, either regional or multi-regional, where snapshot\n  content is to be stored and only accepts 1 value. Always defaults to a nearby regional or multi-regional\n  location.\n  \n  multi-regional example:\n  \n   ```json\n   {\n      \"image_storage_locations\": [\"us\"]\n   }\n   ```\n  regional example:\n  \n   ```json\n   {\n      \"image_storage_locations\": [\"us-east1\"]\n   }\n   ```\n\n- `instance_name` (string) - A name to give the launched instance. Beware that this must be unique.\n  Defaults to `packer-{{uuid}}`.\n\n- `labels` (map[string]string) - Key/value pair labels to apply to the launched instance.\n\n- `machine_type` (string) - The machine type. Defaults to \"e2-standard-2\".\n\n- `metadata` (map[string]string) - Metadata applied to the launched instance.\n  All metadata configuration values are expected to be of type string.\n  Google metadata options that take a value of `TRUE` or `FALSE` should be\n  set as a string (i.e  `\"TRUE\"` `\"FALSE\"` or `\"true\"` `\"false\"`).\n\n- `metadata_files` (map[string]string) - Metadata applied to the launched instance. Values are files.\n\n- `min_cpu_platform` (string) - A Minimum CPU Platform for VM Instance. Availability and default CPU\n  platforms vary across zones, based on the hardware available in each GCP\n  zone.\n  [Details](https://cloud.google.com/compute/docs/instances/specify-min-cpu-platform)\n\n- `network` (string) - The Google Compute network id or URL to use for the launched instance.\n  Defaults to \"default\". If the value is not a URL, it will be\n  interpolated to\n  `projects/((network_project_id))/global/networks/((network))`. This value\n  is not required if a subnet is specified.\n\n- `network_project_id` (string) - The project ID for the network and subnetwork to use for launched\n  instance. Defaults to project_id.\n\n- `omit_external_ip` (bool) - If true, the instance will not have an external IP. use_internal_ip must\n  be true if this property is true.\n\n- `on_host_maintenance` (string) - Sets Host Maintenance Option. Valid choices are `MIGRATE` and\n  `TERMINATE`. Please see [GCE Instance Scheduling\n  Options](https://cloud.google.com/compute/docs/instances/setting-instance-scheduling-options),\n  as not all machine\\_types support `MIGRATE` (i.e. machines with GPUs).\n  If preemptible is true this can only be `TERMINATE`. If preemptible is\n  false, it defaults to `MIGRATE`\n\n- `preemptible` (bool) - If true, launch a preemptible instance.\n\n- `node_affinity` ([]common.NodeAffinity) - Sets a node affinity label for the launched instance (eg. for sole tenancy).\n  Please see [Provisioning VMs on\n  sole-tenant nodes](https://cloud.google.com/compute/docs/nodes/provisioning-sole-tenant-vms)\n  for more information.\n  \n  ```hcl\n    key = \"workload\"\n    operator = \"IN\"\n    values = [\"packer\"]\n  ```\n  \n  Refer to the [Node Affinity](#node-affinities) for more information on affinities.\n\n- `state_timeout` (duration string | ex: \"1h5m2s\") - The time to wait for instance state changes. Defaults to \"5m\".\n\n- `region` (string) - The region in which to launch the instance. Defaults to the region\n  hosting the specified zone.\n\n- `scopes` ([]string) - The service account scopes for launched\n  instance. Defaults to:\n  \n  ```json\n  [\n    \"https://www.googleapis.com/auth/userinfo.email\",\n    \"https://www.googleapis.com/auth/compute\",\n    \"https://www.googleapis.com/auth/devstorage.full_control\"\n  ]\n  ```\n\n- `service_account_email` (string) - The service account to be used for launched instance. Defaults to the\n  project's default service account unless disable_default_service_account\n  is true.\n\n- `source_image_project_id` ([]string) - A list of project IDs to search for the source image. Packer will search the first\n  project ID in the list first, and fall back to the next in the list, until it finds the source image.\n\n- `startup_script_file` (string) - The path to a startup script to run on the launched instance from which the image will\n  be made. When set, the contents of the startup script file will be added to the instance metadata\n  under the `\"startup_script\"` metadata property. See [Providing startup script contents directly](https://cloud.google.com/compute/docs/startupscript#providing_startup_script_contents_directly) for more details.\n  \n  When using `startup_script_file` the following rules apply:\n  - The contents of the script file will overwrite the value of the `\"startup_script\"` metadata property at runtime.\n  - The contents of the script file will be wrapped in Packer's startup script wrapper, unless `wrap_startup_script` is disabled. See `wrap_startup_script` for more details.\n  - Not supported by Windows instances. See [Startup Scripts for Windows](https://cloud.google.com/compute/docs/startupscript#providing_a_startup_script_for_windows_instances) for more details.\n\n- `windows_password_timeout` (duration string | ex: \"1h5m2s\") - The time to wait for windows password to be retrieved. Defaults to \"3m\".\n\n- `wrap_startup_script` (boolean) - For backwards compatibility this option defaults to `\"true\"` in the future it will default to `\"false\"`.\n  If \"true\", the contents of `startup_script_file` or `\"startup_script\"` in the instance metadata\n  is wrapped in a Packer specific script that tracks the execution and completion of the provided\n  startup script. The wrapper ensures that the builder will not continue until the startup script has been executed.\n  - The use of the wrapped script file requires that the user or service account\n  running the build has the compute.instance.Metadata role.\n\n- `subnetwork` (string) - The Google Compute subnetwork id or URL to use for the launched\n  instance. Only required if the network has been created with custom\n  subnetting. Note, the region of the subnetwork must match the region or\n  zone in which the VM is launched. If the value is not a URL, it will be\n  interpolated to\n  `projects/((network_project_id))/regions/((region))/subnetworks/((subnetwork))`\n\n- `tags` ([]string) - Assign network tags to apply firewall rules to VM instance.\n\n- `use_internal_ip` (bool) - If true, use the instance's internal IP instead of its external IP\n  during building.\n\n- `use_os_login` (bool) - If true, OSLogin will be used to manage SSH access to the compute instance by\n  dynamically importing a temporary SSH key to the Google account's login profile,\n  and setting the `enable-oslogin` to `TRUE` in the instance metadata.\n  Optionally, `use_os_login` can be used with an existing `ssh_username` and `ssh_private_key_file`\n  if a SSH key has already been added to the Google account's login profile - See [Adding SSH Keys](https://cloud.google.com/compute/docs/instances/managing-instance-access#add_oslogin_keys).\n  \n  SSH keys can be added to an individual user account\n  \n  ```shell-session\n  $ gcloud compute os-login ssh-keys add --key-file=/home/user/.ssh/my-key.pub\n  \n  $ gcloud compute os-login describe-profile\n  PosixAccounts:\n  - accountId: \u003cproject-id\u003e\n   gid: '34567890754'\n   homeDirectory: /home/user_example_com\n   ...\n   primary: true\n   uid: '2504818925'\n   username: user_example_com\n  sshPublicKeys:\n   000000000000000000000000000000000000000000000000000000000000000a:\n     fingerprint: 000000000000000000000000000000000000000000000000000000000000000a\n  ```\n  \n  Or SSH keys can be added to an associated service account\n  ```shell-session\n  $ gcloud auth activate-service-account --key-file=\u003cpath to service account credentials file (e.g account.json)\u003e\n  $ gcloud compute os-login ssh-keys add --key-file=/home/user/.ssh/my-key.pub\n  \n  $ gcloud compute os-login describe-profile\n  PosixAccounts:\n  - accountId: \u003cproject-id\u003e\n   gid: '34567890754'\n   homeDirectory: /home/sa_000000000000000000000\n   ...\n   primary: true\n   uid: '2504818925'\n   username: sa_000000000000000000000\n  sshPublicKeys:\n   000000000000000000000000000000000000000000000000000000000000000a:\n     fingerprint: 000000000000000000000000000000000000000000000000000000000000000a\n  ```\n\n- `wait_to_add_ssh_keys` (duration string | ex: \"1h5m2s\") - The time to wait between the creation of the instance used to create the image,\n  and the addition of SSH configuration, including SSH keys, to that instance.\n  The delay is intended to protect packer from anything in the instance boot\n  sequence that has potential to disrupt the creation of SSH configuration\n  (e.g. SSH user creation, SSH key creation) on the instance.\n  Note: All other instance metadata, including startup scripts, are still added to the instance\n  during it's creation.\n  Example value: `5m`.\n\n\u003c!-- End of code generated from the comments of the Config struct in builder/googlecompute/config.go; --\u003e\n\n\n\u003c!-- Code generated from the comments of the IAPConfig struct in builder/googlecompute/step_start_tunnel.go; DO NOT EDIT MANUALLY --\u003e\n\n- `use_iap` (bool) - Whether to use an IAP proxy.\n  Prerequisites and limitations for using IAP:\n  - You must manually enable the IAP API in the Google Cloud console.\n  - You must have the gcloud sdk installed on the computer running Packer.\n  - If you use a service account, you must add it to project level IAP permissions\n    in https://console.cloud.google.com/security/iap. To do so, click\n    \"project\" \u003e \"SSH and TCP resources\" \u003e \"All Tunnel Resources\" \u003e\n    \"Add Member\". Then add your service account and choose the role\n    \"IAP-secured Tunnel User\" and add any conditions you may care about.\n\n- `iap_localhost_port` (int) - Which port to connect the local end of the IAM localhost proxy to. If\n  left blank, Packer will choose a port for you from available ports.\n\n- `iap_hashbang` (string) - What \"hashbang\" to use to invoke script that sets up gcloud.\n  Default: \"/bin/sh\"\n\n- `iap_ext` (string) - What file extension to use for script that sets up gcloud.\n  Default: \".sh\"\n\n- `iap_tunnel_launch_wait` (int) - How long to wait, in seconds, before assuming a tunnel launch was\n  successful. Defaults to 30 seconds for SSH or 40 seconds for WinRM.\n\n\u003c!-- End of code generated from the comments of the IAPConfig struct in builder/googlecompute/step_start_tunnel.go; --\u003e\n\n\n### Startup Scripts\n\nStartup scripts can be a powerful tool for configuring the instance from which\nthe image is made. The builder will wait for a startup script to terminate. A\nstartup script can be provided via the `startup_script_file` or\n`startup-script` instance creation `metadata` field. Therefore, the build time\nwill vary depending on the duration of the startup script. If\n`startup_script_file` is set, the `startup-script` `metadata` field will be\noverwritten. In other words, `startup_script_file` takes precedence.\n\nThe builder does check for a pass/fail/error signal from the startup\nscript by tracking the `startup-script-status` metadata. Packer will check if this key\nis set to done and if it not set to done before the timeout, Packer will fail the build.\n\n### Windows\nA Windows startup script can only be provided as a metadata field option. The\nbuilder will _not_ wait for a Windows startup script to terminate. You have\nto ensure that it finishes before the instance shuts down. For a list of\nsupported startup script keys refer to [Using startup scripts on Windows](https://cloud.google.com/compute/docs/instances/startup-scripts/windows)\n\n```hcl\nmetadata = {\n  sysprep-specialize-script-cmd = \"...\"\n}\n```\n\n### Logging\n\nStartup script logs can be copied to a Google Cloud Storage (GCS) location\nspecified via the `startup-script-log-dest` instance creation `metadata` field.\nThe GCS location must be writeable by the service account of the instance that Packer created.\n\n### Communicator Configuration\n\n#### Optional:\n\n\u003c!-- Code generated from the comments of the Config struct in communicator/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `communicator` (string) - Packer currently supports three kinds of communicators:\n  \n  -   `none` - No communicator will be used. If this is set, most\n      provisioners also can't be used.\n  \n  -   `ssh` - An SSH connection will be established to the machine. This\n      is usually the default.\n  \n  -   `winrm` - A WinRM connection will be established.\n  \n  In addition to the above, some builders have custom communicators they\n  can use. For example, the Docker builder has a \"docker\" communicator\n  that uses `docker exec` and `docker cp` to execute scripts and copy\n  files.\n\n- `pause_before_connecting` (duration string | ex: \"1h5m2s\") - We recommend that you enable SSH or WinRM as the very last step in your\n  guest's bootstrap script, but sometimes you may have a race condition\n  where you need Packer to wait before attempting to connect to your\n  guest.\n  \n  If you end up in this situation, you can use the template option\n  `pause_before_connecting`. By default, there is no pause. For example if\n  you set `pause_before_connecting` to `10m` Packer will check whether it\n  can connect, as normal. But once a connection attempt is successful, it\n  will disconnect and then wait 10 minutes before connecting to the guest\n  and beginning provisioning.\n\n\u003c!-- End of code generated from the comments of the Config struct in communicator/config.go; --\u003e\n\n\n\u003c!-- Code generated from the comments of the SSH struct in communicator/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `ssh_host` (string) - The address to SSH to. This usually is automatically configured by the\n  builder.\n\n- `ssh_port` (int) - The port to connect to SSH. This defaults to `22`.\n\n- `ssh_username` (string) - The username to connect to SSH with. Required if using SSH.\n\n- `ssh_password` (string) - A plaintext password to use to authenticate with SSH.\n\n- `ssh_ciphers` ([]string) - This overrides the value of ciphers supported by default by Golang.\n  The default value is [\n    \"aes128-gcm@openssh.com\",\n    \"chacha20-poly1305@openssh.com\",\n    \"aes128-ctr\", \"aes192-ctr\", \"aes256-ctr\",\n  ]\n  \n  Valid options for ciphers include:\n  \"aes128-ctr\", \"aes192-ctr\", \"aes256-ctr\", \"aes128-gcm@openssh.com\",\n  \"chacha20-poly1305@openssh.com\",\n  \"arcfour256\", \"arcfour128\", \"arcfour\", \"aes128-cbc\", \"3des-cbc\",\n\n- `ssh_clear_authorized_keys` (bool) - If true, Packer will attempt to remove its temporary key from\n  `~/.ssh/authorized_keys` and `/root/.ssh/authorized_keys`. This is a\n  mostly cosmetic option, since Packer will delete the temporary private\n  key from the host system regardless of whether this is set to true\n  (unless the user has set the `-debug` flag). Defaults to \"false\";\n  currently only works on guests with `sed` installed.\n\n- `ssh_key_exchange_algorithms` ([]string) - If set, Packer will override the value of key exchange (kex) algorithms\n  supported by default by Golang. Acceptable values include:\n  \"curve25519-sha256@libssh.org\", \"ecdh-sha2-nistp256\",\n  \"ecdh-sha2-nistp384\", \"ecdh-sha2-nistp521\",\n  \"diffie-hellman-group14-sha1\", and \"diffie-hellman-group1-sha1\".\n\n- `ssh_certificate_file` (string) - Path to user certificate used to authenticate with SSH.\n  The `~` can be used in path and will be expanded to the\n  home directory of current user.\n\n- `ssh_pty` (bool) - If `true`, a PTY will be requested for the SSH connection. This defaults\n  to `false`.\n\n- `ssh_timeout` (duration string | ex: \"1h5m2s\") - The time to wait for SSH to become available. Packer uses this to\n  determine when the machine has booted so this is usually quite long.\n  Example value: `10m`.\n  This defaults to `5m`, unless `ssh_handshake_attempts` is set.\n\n- `ssh_disable_agent_forwarding` (bool) - If true, SSH agent forwarding will be disabled. Defaults to `false`.\n\n- `ssh_handshake_attempts` (int) - The number of handshakes to attempt with SSH once it can connect.\n  This defaults to `10`, unless a `ssh_timeout` is set.\n\n- `ssh_bastion_host` (string) - A bastion host to use for the actual SSH connection.\n\n- `ssh_bastion_port` (int) - The port of the bastion host. Defaults to `22`.\n\n- `ssh_bastion_agent_auth` (bool) - If `true`, the local SSH agent will be used to authenticate with the\n  bastion host. Defaults to `false`.\n\n- `ssh_bastion_username` (string) - The username to connect to the bastion host.\n\n- `ssh_bastion_password` (string) - The password to use to authenticate with the bastion host.\n\n- `ssh_bastion_interactive` (bool) - If `true`, the keyboard-interactive used to authenticate with bastion host.\n\n- `ssh_bastion_private_key_file` (string) - Path to a PEM encoded private key file to use to authenticate with the\n  bastion host. The `~` can be used in path and will be expanded to the\n  home directory of current user.\n\n- `ssh_bastion_certificate_file` (string) - Path to user certificate used to authenticate with bastion host.\n  The `~` can be used in path and will be expanded to the\n  home directory of current user.\n\n- `ssh_file_transfer_method` (string) - `scp` or `sftp` - How to transfer files, Secure copy (default) or SSH\n  File Transfer Protocol.\n  \n  **NOTE**: Guests using Windows with Win32-OpenSSH v9.1.0.0p1-Beta, scp\n  (the default protocol for copying data) returns a a non-zero error code since the MOTW\n  cannot be set, which cause any file transfer to fail. As a workaround you can override the transfer protocol\n  with SFTP instead `ssh_file_transfer_method = \"sftp\"`.\n\n- `ssh_proxy_host` (string) - A SOCKS proxy host to use for SSH connection\n\n- `ssh_proxy_port` (int) - A port of the SOCKS proxy. Defaults to `1080`.\n\n- `ssh_proxy_username` (string) - The optional username to authenticate with the proxy server.\n\n- `ssh_proxy_password` (string) - The optional password to use to authenticate with the proxy server.\n\n- `ssh_keep_alive_interval` (duration string | ex: \"1h5m2s\") - How often to send \"keep alive\" messages to the server. Set to a negative\n  value (`-1s`) to disable. Example value: `10s`. Defaults to `5s`.\n\n- `ssh_read_write_timeout` (duration string | ex: \"1h5m2s\") - The amount of time to wait for a remote command to end. This might be\n  useful if, for example, packer hangs on a connection after a reboot.\n  Example: `5m`. Disabled by default.\n\n- `ssh_remote_tunnels` ([]string) - \n\n- `ssh_local_tunnels` ([]string) - \n\n\u003c!-- End of code generated from the comments of the SSH struct in communicator/config.go; --\u003e\n\n\n- `ssh_private_key_file` (string) - Path to a PEM encoded private key file to use to authenticate with SSH.\n  The `~` can be used in path and will be expanded to the home directory\n  of current user.\n\n\n\n### Temporary SSH keypair\n\n\u003c!-- Code generated from the comments of the SSHTemporaryKeyPair struct in communicator/config.go; DO NOT EDIT MANUALLY --\u003e\n\nWhen no ssh credentials are specified, Packer will generate a temporary SSH\nkeypair for the instance. You can change the algorithm type and bits\nsettings.\n\n\u003c!-- End of code generated from the comments of the SSHTemporaryKeyPair struct in communicator/config.go; --\u003e\n\n\n#### Optional:\n\n\u003c!-- Code generated from the comments of the SSHTemporaryKeyPair struct in communicator/config.go; DO NOT EDIT MANUALLY --\u003e\n\n- `temporary_key_pair_type` (string) - `dsa` | `ecdsa` | `ed25519` | `rsa` ( the default )\n  \n  Specifies the type of key to create. The possible values are 'dsa',\n  'ecdsa', 'ed25519', or 'rsa'.\n  \n  NOTE: DSA is deprecated and no longer recognized as secure, please\n  consider other alternatives like RSA or ED25519.\n\n- `temporary_key_pair_bits` (int) - Specifies the number of bits in the key to create. For RSA keys, the\n  minimum size is 1024 bits and the default is 4096 bits. Generally, 3072\n  bits is considered sufficient. DSA keys must be exactly 1024 bits as\n  specified by FIPS 186-2. For ECDSA keys, bits determines the key length\n  by selecting from one of three elliptic curve sizes: 256, 384 or 521\n  bits. Attempting to use bit lengths other than these three values for\n  ECDSA keys will fail. Ed25519 keys have a fixed length and bits will be\n  ignored.\n  \n  NOTE: DSA is deprecated and no longer recognized as secure as specified\n  by FIPS 186-5, please consider other alternatives like RSA or ED25519.\n\n\u003c!-- End of code generated from the comments of the SSHTemporaryKeyPair struct in communicator/config.go; --\u003e\n\n\n### Gotchas\n\nCentOS and recent Debian images have root ssh access disabled by default. Set\n`ssh_username` to any user, which will be created by packer with sudo access.\n\nThe machine type must have a scratch disk, which means you can't use an\n`f1-micro` or `g1-small` to build images.\n\n## Extra disk attachments\n\n\u003c!-- Code generated from the comments of the BlockDevice struct in lib/common/block_device.go; DO NOT EDIT MANUALLY --\u003e\n\nBlockDevice is a block device attachement/creation to an instance when building an image.\n\n\u003c!-- End of code generated from the comments of the BlockDevice struct in lib/common/block_device.go; --\u003e\n\n\nThese can be defined using the [disk_attachment](#disk_attachment) block in the configuration.\n\nNote that this is an array, and therefore in HCL2 can be defined as multiple blocks, each\none corresponding to a disk that will be attached to the instance you are booting.\n\nExample:\n\n```hcl\nsource \"googlecompute\" \"example\" {\n  # Add whichever is necessary to build the image\n\n  disk_attachment {\n    volume_type     = \"scratch\"\n    volume_size     = 375\n  }\n\n  disk_attachment {\n    volume_type     = \"pd-standard\"\n    volume_size     = 25\n    interface_type  = \"SCSI\"\n  }\n}\n```\n\n### Required:\n\n\u003c!-- Code generated from the comments of the BlockDevice struct in lib/common/block_device.go; DO NOT EDIT MANUALLY --\u003e\n\n- `volume_size` (int) - Size of the volume to request, in gigabytes.\n  \n  The size specified must be in range of the sizes for the chosen volume type.\n\n- `volume_type` (BlockDeviceType) - The volume type is the type of storage to reserve and attach to the instance being provisioned.\n  \n  The following values are supported by this builder:\n  * scratch: local SSD data, always 375 GiB (default)\n  * pd_standard: persistent, HDD-backed disk\n  * pd_balanced: persistent, SSD-backed disk\n  * pd_ssd: persistent, SSD-backed disk, with extra performance guarantees\n  * pd_extreme: persistent, fastest SSD-backed disk, with custom IOPS\n  * hyperdisk-balanced: persistent hyperdisk volume, bootable\n  * hyperdisk-extreme: persistent hyperdisk volume, optimised for performance\n  * hyperdisk-ml: persistent, shareable, hyperdisk volume, highest throughput\n  * hyperdisk-throughput: persistent hyperdisk volume with flexible throughput\n  \n  For details on the different types, refer to: https://cloud.google.com/compute/docs/disks#disk-types\n  For more information on hyperdisk volumes, refer to: https://cloud.google.com/compute/docs/disks/hyperdisks#throughput\n\n\u003c!-- End of code generated from the comments of the BlockDevice struct in lib/common/block_device.go; --\u003e\n\n\n### Optional:\n\n\u003c!-- Code generated from the comments of the BlockDevice struct in lib/common/block_device.go; DO NOT EDIT MANUALLY --\u003e\n\n- `attachment_mode` (string) - How to attach the volume to the instance\n  \n  Can be either READ_ONLY or READ_WRITE (default).\n\n- `create_image` (bool) - If true, an image will be created for this disk, instead of the boot disk.\n  \n  This only applies to non-scratch disks, and can only be specified on one disk at a\n  time.\n\n- `device_name` (string) - The device name as exposed to the OS in the /dev/disk/by-id/google-* directory\n  \n  If unspecified, the disk will have a default name in the form\n  persistent-disk-x with 'x' being a number assigned by GCE\n  \n  This field only applies to persistent disks, local SSDs will always\n  be exposed as /dev/disk/by-id/google-local-nvme-ssd-x.\n\n- `disk_encryption_key` (CustomerEncryptionKey) - Disk encryption key to apply to the requested disk.\n  \n  Possible values:\n  * kmsKeyName -  The name of the encryption key that is stored in Google Cloud KMS.\n  * RawKey: - A 256-bit customer-supplied encryption key, encodes in RFC 4648 base64.\n  \n  Refer to the [Customer Encryption Key](#customer-encryption-key) section for more information on the contents of this block.\n\n- `disk_name` (string) - Name of the disk to create.\n  This only applies to non-scratch disks. If the disk is persistent, and\n  not specified, Packer will generate a unique name for the disk.\n  \n  The name must be 1-63 characters long and comply to the regexp\n  '[a-z]([-a-z0-9]*[a-z0-9])?'\n\n- `interface_type` (string) - The interface to use for attaching the disk.\n  Can be either NVME or SCSI. Defaults to SCSI.\n  \n  The available options depend on the type of disk, SEE: https://cloud.google.com/compute/docs/disks/persistent-disks#choose_an_interface\n\n- `iops` (int) - The requested IOPS for the disk.\n  \n  This is only available for pd_extreme disks.\n\n- `keep_device` (bool) - Keep the device in the created disks after the instance is terminated.\n  By default, the builder will remove the disks at the end of the build.\n  \n  This cannot be used with 'scratch' volumes.\n\n- `replica_zones` ([]string) - The list of extra zones to replicate the disk into\n  \n  The zone in which the instance is created will automatically be\n  added to the zones in which the disk is replicated.\n\n- `source_volume` (string) - The URI of the volume to attach\n  \n  If this is specified, it won't be deleted after the instance is shut-down.\n\n- `_` (string) - Zone is the zone in which to create the disk in.\n  \n  It is not exposed since the parent config already specifies it\n  and it will be set for the block device when preparing it.\n\n\u003c!-- End of code generated from the comments of the BlockDevice struct in lib/common/block_device.go; --\u003e\n\n\n## Customer Encryption Key\n\nSpecifying a custom key allows you to use your own encryption keys to encrypt the data\nof the image you are creating.\n\nNote: you will need to reuse the same key later on when reusing the image.\n\n\u003c!-- Code generated from the comments of the CustomerEncryptionKey struct in lib/common/client_keys.go; DO NOT EDIT MANUALLY --\u003e\n\n- `kmsKeyName` (string) - KmsKeyName: The name of the encryption key that is stored in Google\n  Cloud KMS.\n\n- `rawKey` (string) - RawKey: Specifies a 256-bit customer-supplied encryption key, encoded\n  in RFC 4648 base64 to either encrypt or decrypt this resource.\n\n\u003c!-- End of code generated from the comments of the CustomerEncryptionKey struct in lib/common/client_keys.go; --\u003e\n\n\n## Node Affinities\n\nNode affinity configuration allows you to restrict the nodes on which to run the\ninstance that Packer will build the image from.\nThis requires configuring [sole-tenant node groups](https://cloud.google.com/compute/docs/nodes/provisioning-sole-tenant-vms) first.\n\n\u003c!-- Code generated from the comments of the NodeAffinity struct in lib/common/affinities.go; DO NOT EDIT MANUALLY --\u003e\n\n- `key` (string) - Key: Corresponds to the label key of Node resource.\n\n- `operator` (string) - Operator: Defines the operation of node selection. Valid operators are IN for affinity and\n  NOT_IN for anti-affinity.\n\n- `values` ([]string) - Values: Corresponds to the label values of Node resource.\n\n\u003c!-- End of code generated from the comments of the NodeAffinity struct in lib/common/affinities.go; --\u003e\n","created_at":"2024-07-29T18:11:54.457Z","updated_at":"2024-07-29T18:11:54.457Z","name":"Google Cloud Platform","slug":"googlecompute","component":{"id":"36076511-3ced-4faf-addf-101fce0405ff","slug":"builder","name":"Builder","plural_name":"Builders","product_id":"4c2b00c6-7cc1-4e4c-b596-4ab57e319f21","created_at":"2022-11-09T22:56:30.937Z","updated_at":"2022-11-09T22:56:30.937Z"},"variable_groups":[]},"processedVariablesMarkdown":{},"anchorLinks":[{"id":"authentication","level":2,"title":"Authentication"},{"id":"configuration-reference","level":2,"title":"Configuration Reference"},{"id":"required:","level":3,"title":"Required:"},{"id":"optional:","level":3,"title":"Optional:"},{"id":"startup-scripts","level":3,"title":"Startup Scripts"},{"id":"windows","level":3,"title":"Windows"},{"id":"logging","level":3,"title":"Logging"},{"id":"communicator-configuration","level":3,"title":"Communicator Configuration"},{"id":"optional:","level":4,"title":"Optional:"},{"id":"temporary-ssh-keypair","level":3,"title":"Temporary SSH keypair"},{"id":"optional:","level":4,"title":"Optional:"},{"id":"gotchas","level":3,"title":"Gotchas"},{"id":"extra-disk-attachments","level":2,"title":"Extra disk attachments"},{"id":"required:","level":3,"title":"Required:"},{"id":"optional:","level":3,"title":"Optional:"},{"id":"customer-encryption-key","level":2,"title":"Customer Encryption Key"},{"id":"node-affinities","level":2,"title":"Node Affinities"}],"serializedREADME":{"compiledSource":"const layoutProps={};const MDXLayout=\"wrapper\";function MDXContent({components,...props}){return mdx(MDXLayout,{...layoutProps,...props,components:components,mdxType:\"MDXLayout\"},mdx(\"p\",{\"className\":\"g-type-long-body\"},`Type: `,mdx(\"inlineCode\",{parentName:\"p\"},`googlecompute`),`\nArtifact BuilderId: `,mdx(\"inlineCode\",{parentName:\"p\"},`packer.googlecompute`)),mdx(\"p\",{\"className\":\"g-type-long-body\"},`The `,mdx(\"inlineCode\",{parentName:\"p\"},`googlecompute`),` Packer builder is able to create\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://developers.google.com/compute/docs/images\"},`images`),` for use with\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/products/compute-engine\"},`Google Compute Engine`),` (GCE)\nbased on existing images.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`It is possible to build images from scratch, but not with the `,mdx(\"inlineCode\",{parentName:\"p\"},`googlecompute`),`\nPacker builder. The process is recommended only for advanced users, please see\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/compute/docs/tutorials/building-images\"},`Building GCE Images from Scratch`),`\nand the `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/integrations/hashicorp/googlecompute/latest/components/post-processor/googlecompute-import\"},`Google Compute Import\nPost-Processor`),` for more\ninformation.`),mdx(\"h2\",{\"id\":\"user-content-authentication\",\"data-text-content\":\"Authentication\",\"className\":\"g-type-display-3\"},`Authentication`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`To authenticate with GCE, this builder supports everything the plugin does.\nTo get more information on this, refer to the plugin's description page, under\nthe `,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/integrations/hashicorp/googlecompute#authentication\"},`authentication`),` section.`),mdx(\"h2\",{\"id\":\"user-content-configuration-reference\",\"data-text-content\":\"Configuration Reference\",\"className\":\"g-type-display-3\"},`Configuration Reference`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Configuration options are organized below into two categories: required and\noptional. Within each category, the available options are alphabetized and\ndescribed.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`In addition to the options listed here, a\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"/packer/docs/templates/legacy_json_templates/communicator\"},`communicator`),` can be configured for this\nbuilder.`),mdx(\"h3\",{\"id\":\"user-content-required:\",\"data-text-content\":\"Required\",\"className\":\"g-type-display-4\"},`Required:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`project_id`),` (string) - The project ID that will be used to launch instances and store images.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`source_image`),` (string) - The source image to use to create the new image from. You can also\nspecify source_image_family instead. If both source_image and\nsource_image_family are specified, source_image takes precedence.\nExample: \"debian-8-jessie-v20161027\"`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`source_image_family`),` (string) - The source image family to use to create the new image from. The image\nfamily always returns its latest image that is not deprecated. Example:\n\"debian-8\".`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`zone`),` (string) - The zone in which to launch the instance used to create the image.\nExample: \"us-central1-a\"`))),mdx(\"h3\",{\"id\":\"user-content-optional:\",\"data-text-content\":\"Optional\",\"className\":\"g-type-display-4\"},`Optional:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`accelerator_type`),` (string) - Full or partial URL of the guest accelerator type. GPU accelerators can\nonly be used with `,mdx(\"inlineCode\",{parentName:\"p\"},`\"on_host_maintenance\": \"TERMINATE\"`),` option set.\nExample:\n`,mdx(\"inlineCode\",{parentName:\"p\"},`\"projects/project_id/zones/europe-west1-b/acceleratorTypes/nvidia-tesla-k80\"`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`accelerator_count`),` (int64) - Number of guest accelerator cards to add to the launched instance.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`address`),` (string) - The name of a pre-allocated static external IP address. Note, must be\nthe name and not the actual IP address.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`disable_default_service_account`),` (bool) - If true, the default service account will not be used if\nservice_account_email is not specified. Set this value to true and omit\nservice_account_email to provision a VM with no service account.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`disk_name`),` (string) - The name of the disk, if unset the instance name will be used.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`disk_size`),` (int64) - The size of the disk in GB. This defaults to 20, which is 20GB.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`disk_type`),` (string) - Type of disk used to back your instance, like pd-ssd or pd-standard.\nDefaults to pd-standard.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`disk_encryption_key`),` (`,`*`,`common.CustomerEncryptionKey) - Disk encryption key to apply to the created boot disk. Possible values:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`kmsKeyName -  The name of the encryption key that is stored in Google Cloud KMS.`),mdx(\"li\",{parentName:\"ul\"},`RawKey: - A 256-bit customer-supplied encryption key, encodes in RFC 4648 base64.`)),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`examples:`),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`   \"kmsKeyName\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"projects/\\${project}/locations/\\${region}/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},` disk_encryption_key`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`   kmsKeyName `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"projects/`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`\\${`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`var`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`.`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`project`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`}`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`/locations/`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`\\${`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`var`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`.`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`region`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`}`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` }`)),`\n`)),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Refer to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"#customer-encryption-key\"},`Customer Encryption Key`),` section for more information on the contents of this block.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`enable_nested_virtualization`),` (bool) - Create a instance with enabling nested virtualization.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`enable_secure_boot`),` (bool) - Create a Shielded VM image with Secure Boot enabled. It helps ensure that\nthe system only runs authentic software by verifying the digital signature\nof all boot components, and halting the boot process if signature verification\nfails. `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/security/shielded-cloud/shielded-vm\"},`Details`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`enable_vtpm`),` (bool) - Create a Shielded VM image with virtual trusted platform module\nMeasured Boot enabled. A vTPM is a virtualized trusted platform module,\nwhich is a specialized computer chip you can use to protect objects,\nlike keys and certificates, that you use to authenticate access to your\nsystem. `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/security/shielded-cloud/shielded-vm\"},`Details`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`enable_integrity_monitoring`),` (bool) - Integrity monitoring helps you understand and make decisions about the\nstate of your VM instances. Note: integrity monitoring relies on having\nvTPM enabled. `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/security/shielded-cloud/shielded-vm\"},`Details`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`disk_attachment`),` ([]common.BlockDevice) - Extra disks to attach to the instance that will build the final image.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`You may reference an existing external persistent disk, or you can configure\na set of disks to be created before the instance is created, and will\nbe deleted upon build completion.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Scratch (ephemeral) SSDs are always created at launch, and deleted when the\ninstance is torn-down.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Note: local SSDs are not supported on all machine types, refer to the\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/compute/docs/disks/local-ssd#choose_number_local_ssds\"},`docs`),`\nfor more information on that.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Refer to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"#extra-disk-attachments\"},`Extra Disk Attachments`),` section for\nmore information on this configuration type.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`skip_create_image`),` (bool) - Skip creating the image. Useful for setting to `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),` during a build test stage. Defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`image_architecture`),` (string) - The architecture of the resulting image. Defaults to \"x86_64\".`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`image_name`),` (string) - The unique name of the resulting image. Defaults to\n`,mdx(\"inlineCode\",{parentName:\"p\"},`packer-{{timestamp}}`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`image_description`),` (string) - The description of the resulting image.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`image_encryption_key`),` (`,`*`,`common.CustomerEncryptionKey) - Image encryption key to apply to the created image. Possible values:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`kmsKeyName -  The name of the encryption key that is stored in Google Cloud KMS.`),mdx(\"li\",{parentName:\"ul\"},`RawKey: - A 256-bit customer-supplied encryption key, encodes in RFC 4648 base64.`)),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`examples:`),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`   \"kmsKeyName\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"projects/\\${project}/locations/\\${region}/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},` image_encryption_key`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`   kmsKeyName `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"projects/`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`\\${`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`var`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`.`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`project`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`}`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`/locations/`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`\\${`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`var`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`.`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`region`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`}`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`/keyRings/computeEngine/cryptoKeys/computeEngine/cryptoKeyVersions/4\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` }`)),`\n`)),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Refer to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"#customer-encryption-key\"},`Customer Encryption Key`),` section for more information on the contents of this block.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`image_family`),` (string) - The name of the image family to which the resulting image belongs. You\ncan create disks by specifying an image family instead of a specific\nimage name. The image family always returns its latest image that is not\ndeprecated.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`image_labels`),` (map`,`[string]`,`string) - Key/value pair labels to apply to the created image.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`image_licenses`),` ([]string) - Licenses to apply to the created image.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`image_guest_os_features`),` ([]string) - Guest OS features to apply to the created image.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`image_project_id`),` (string) - The project ID to push the build image into. Defaults to project_id.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`image_storage_locations`),` ([]string) - Storage location, either regional or multi-regional, where snapshot\ncontent is to be stored and only accepts 1 value. Always defaults to a nearby regional or multi-regional\nlocation.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`multi-regional example:`),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`   \"image_storage_locations\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"us\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`regional example:`),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`{`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`   \"image_storage_locations\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`:`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"us-east1\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`instance_name`),` (string) - A name to give the launched instance. Beware that this must be unique.\nDefaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`packer-{{uuid}}`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`labels`),` (map`,`[string]`,`string) - Key/value pair labels to apply to the launched instance.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`machine_type`),` (string) - The machine type. Defaults to \"e2-standard-2\".`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`metadata`),` (map`,`[string]`,`string) - Metadata applied to the launched instance.\nAll metadata configuration values are expected to be of type string.\nGoogle metadata options that take a value of `,mdx(\"inlineCode\",{parentName:\"p\"},`TRUE`),` or `,mdx(\"inlineCode\",{parentName:\"p\"},`FALSE`),` should be\nset as a string (i.e  `,mdx(\"inlineCode\",{parentName:\"p\"},`\"TRUE\"`),` `,mdx(\"inlineCode\",{parentName:\"p\"},`\"FALSE\"`),` or `,mdx(\"inlineCode\",{parentName:\"p\"},`\"true\"`),` `,mdx(\"inlineCode\",{parentName:\"p\"},`\"false\"`),`).`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`metadata_files`),` (map`,`[string]`,`string) - Metadata applied to the launched instance. Values are files.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`min_cpu_platform`),` (string) - A Minimum CPU Platform for VM Instance. Availability and default CPU\nplatforms vary across zones, based on the hardware available in each GCP\nzone.\n`,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/compute/docs/instances/specify-min-cpu-platform\"},`Details`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`network`),` (string) - The Google Compute network id or URL to use for the launched instance.\nDefaults to \"default\". If the value is not a URL, it will be\ninterpolated to\n`,mdx(\"inlineCode\",{parentName:\"p\"},`projects/((network_project_id))/global/networks/((network))`),`. This value\nis not required if a subnet is specified.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`network_project_id`),` (string) - The project ID for the network and subnetwork to use for launched\ninstance. Defaults to project_id.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`omit_external_ip`),` (bool) - If true, the instance will not have an external IP. use_internal_ip must\nbe true if this property is true.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`on_host_maintenance`),` (string) - Sets Host Maintenance Option. Valid choices are `,mdx(\"inlineCode\",{parentName:\"p\"},`MIGRATE`),` and\n`,mdx(\"inlineCode\",{parentName:\"p\"},`TERMINATE`),`. Please see `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/compute/docs/instances/setting-instance-scheduling-options\"},`GCE Instance Scheduling\nOptions`),`,\nas not all machine`,`_`,`types support `,mdx(\"inlineCode\",{parentName:\"p\"},`MIGRATE`),` (i.e. machines with GPUs).\nIf preemptible is true this can only be `,mdx(\"inlineCode\",{parentName:\"p\"},`TERMINATE`),`. If preemptible is\nfalse, it defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`MIGRATE`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`preemptible`),` (bool) - If true, launch a preemptible instance.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`node_affinity`),` ([]common.NodeAffinity) - Sets a node affinity label for the launched instance (eg. for sole tenancy).\nPlease see `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/compute/docs/nodes/provisioning-sole-tenant-vms\"},`Provisioning VMs on\nsole-tenant nodes`),`\nfor more information.`),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  key `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"workload\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  operator `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"IN\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  values `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` [`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`\"packer\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`)),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Refer to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"#node-affinities\"},`Node Affinity`),` for more information on affinities.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`state_timeout`),` (duration string | ex: \"1h5m2s\") - The time to wait for instance state changes. Defaults to \"5m\".`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`region`),` (string) - The region in which to launch the instance. Defaults to the region\nhosting the specified zone.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`scopes`),` ([]string) - The service account scopes for launched\ninstance. Defaults to:`),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`[`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`  \"https://www.googleapis.com/auth/userinfo.email\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`  \"https://www.googleapis.com/auth/compute\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-punctuation)\"}},`,`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},`  \"https://www.googleapis.com/auth/devstorage.full_control\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`]`)),`\n`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`service_account_email`),` (string) - The service account to be used for launched instance. Defaults to the\nproject's default service account unless disable_default_service_account\nis true.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`source_image_project_id`),` ([]string) - A list of project IDs to search for the source image. Packer will search the first\nproject ID in the list first, and fall back to the next in the list, until it finds the source image.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`startup_script_file`),` (string) - The path to a startup script to run on the launched instance from which the image will\nbe made. When set, the contents of the startup script file will be added to the instance metadata\nunder the `,mdx(\"inlineCode\",{parentName:\"p\"},`\"startup_script\"`),` metadata property. See `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/compute/docs/startupscript#providing_startup_script_contents_directly\"},`Providing startup script contents directly`),` for more details.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`When using `,mdx(\"inlineCode\",{parentName:\"p\"},`startup_script_file`),` the following rules apply:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`The contents of the script file will overwrite the value of the `,mdx(\"inlineCode\",{parentName:\"li\"},`\"startup_script\"`),` metadata property at runtime.`),mdx(\"li\",{parentName:\"ul\"},`The contents of the script file will be wrapped in Packer's startup script wrapper, unless `,mdx(\"inlineCode\",{parentName:\"li\"},`wrap_startup_script`),` is disabled. See `,mdx(\"inlineCode\",{parentName:\"li\"},`wrap_startup_script`),` for more details.`),mdx(\"li\",{parentName:\"ul\"},`Not supported by Windows instances. See `,mdx(\"a\",{parentName:\"li\",\"href\":\"https://cloud.google.com/compute/docs/startupscript#providing_a_startup_script_for_windows_instances\"},`Startup Scripts for Windows`),` for more details.`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`windows_password_timeout`),` (duration string | ex: \"1h5m2s\") - The time to wait for windows password to be retrieved. Defaults to \"3m\".`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`wrap_startup_script`),` (boolean) - For backwards compatibility this option defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`\"true\"`),` in the future it will default to `,mdx(\"inlineCode\",{parentName:\"p\"},`\"false\"`),`.\nIf \"true\", the contents of `,mdx(\"inlineCode\",{parentName:\"p\"},`startup_script_file`),` or `,mdx(\"inlineCode\",{parentName:\"p\"},`\"startup_script\"`),` in the instance metadata\nis wrapped in a Packer specific script that tracks the execution and completion of the provided\nstartup script. The wrapper ensures that the builder will not continue until the startup script has been executed.`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`The use of the wrapped script file requires that the user or service account\nrunning the build has the compute.instance.Metadata role.`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`subnetwork`),` (string) - The Google Compute subnetwork id or URL to use for the launched\ninstance. Only required if the network has been created with custom\nsubnetting. Note, the region of the subnetwork must match the region or\nzone in which the VM is launched. If the value is not a URL, it will be\ninterpolated to\n`,mdx(\"inlineCode\",{parentName:\"p\"},`projects/((network_project_id))/regions/((region))/subnetworks/((subnetwork))`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`tags`),` ([]string) - Assign network tags to apply firewall rules to VM instance.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`use_internal_ip`),` (bool) - If true, use the instance's internal IP instead of its external IP\nduring building.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`use_os_login`),` (bool) - If true, OSLogin will be used to manage SSH access to the compute instance by\ndynamically importing a temporary SSH key to the Google account's login profile,\nand setting the `,mdx(\"inlineCode\",{parentName:\"p\"},`enable-oslogin`),` to `,mdx(\"inlineCode\",{parentName:\"p\"},`TRUE`),` in the instance metadata.\nOptionally, `,mdx(\"inlineCode\",{parentName:\"p\"},`use_os_login`),` can be used with an existing `,mdx(\"inlineCode\",{parentName:\"p\"},`ssh_username`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`ssh_private_key_file`),`\nif a SSH key has already been added to the Google account's login profile - See `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/compute/docs/instances/managing-instance-access#add_oslogin_keys\"},`Adding SSH Keys`),`.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`SSH keys can be added to an individual user account`),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-cyan)\"}},`$`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` gcloud compute os-login ssh-keys add --key-file=/home/user/.ssh/my-key.pub`)),`\n`,`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-cyan)\"}},`$`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` gcloud compute os-login describe-profile`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`PosixAccounts:`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`- accountId: \u003cproject-id\u003e`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` gid: '34567890754'`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` homeDirectory: /home/user_example_com`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` ...`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` primary: true`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` uid: '2504818925'`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` username: user_example_com`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`sshPublicKeys:`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` 000000000000000000000000000000000000000000000000000000000000000a:`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`   fingerprint: 000000000000000000000000000000000000000000000000000000000000000a`)),`\n`)),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Or SSH keys can be added to an associated service account`),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-cyan)\"}},`$`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` gcloud auth activate-service-account --key-file=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`\u003c`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`path to service account credentials file (`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`e.g`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` account.json`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`)`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`\u003e`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-cyan)\"}},`$`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` gcloud compute os-login ssh-keys add --key-file=/home/user/.ssh/my-key.pub`)),`\n`,`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-cyan)\"}},`$`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` gcloud compute os-login describe-profile`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`PosixAccounts:`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`- accountId: \u003cproject-id\u003e`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` gid: '34567890754'`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` homeDirectory: /home/sa_000000000000000000000`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` ...`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` primary: true`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` uid: '2504818925'`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` username: sa_000000000000000000000`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`sshPublicKeys:`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` 000000000000000000000000000000000000000000000000000000000000000a:`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`   fingerprint: 000000000000000000000000000000000000000000000000000000000000000a`)),`\n`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`wait_to_add_ssh_keys`),` (duration string | ex: \"1h5m2s\") - The time to wait between the creation of the instance used to create the image,\nand the addition of SSH configuration, including SSH keys, to that instance.\nThe delay is intended to protect packer from anything in the instance boot\nsequence that has potential to disrupt the creation of SSH configuration\n(e.g. SSH user creation, SSH key creation) on the instance.\nNote: All other instance metadata, including startup scripts, are still added to the instance\nduring it's creation.\nExample value: `,mdx(\"inlineCode\",{parentName:\"p\"},`5m`),`.`))),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`use_iap`),` (bool) - Whether to use an IAP proxy.\nPrerequisites and limitations for using IAP:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`You must manually enable the IAP API in the Google Cloud console.`),mdx(\"li\",{parentName:\"ul\"},`You must have the gcloud sdk installed on the computer running Packer.`),mdx(\"li\",{parentName:\"ul\"},`If you use a service account, you must add it to project level IAP permissions\nin `,mdx(\"a\",{parentName:\"li\",\"href\":\"https://console.cloud.google.com/security/iap\"},`https://console.cloud.google.com/security/iap`),`. To do so, click\n\"project\" \u003e \"SSH and TCP resources\" \u003e \"All Tunnel Resources\" \u003e\n\"Add Member\". Then add your service account and choose the role\n\"IAP-secured Tunnel User\" and add any conditions you may care about.`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`iap_localhost_port`),` (int) - Which port to connect the local end of the IAM localhost proxy to. If\nleft blank, Packer will choose a port for you from available ports.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`iap_hashbang`),` (string) - What \"hashbang\" to use to invoke script that sets up gcloud.\nDefault: \"/bin/sh\"`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`iap_ext`),` (string) - What file extension to use for script that sets up gcloud.\nDefault: \".sh\"`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`iap_tunnel_launch_wait`),` (int) - How long to wait, in seconds, before assuming a tunnel launch was\nsuccessful. Defaults to 30 seconds for SSH or 40 seconds for WinRM.`))),mdx(\"h3\",{\"id\":\"user-content-startup-scripts\",\"data-text-content\":\"Startup Scripts\",\"className\":\"g-type-display-4\"},`Startup Scripts`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Startup scripts can be a powerful tool for configuring the instance from which\nthe image is made. The builder will wait for a startup script to terminate. A\nstartup script can be provided via the `,mdx(\"inlineCode\",{parentName:\"p\"},`startup_script_file`),` or\n`,mdx(\"inlineCode\",{parentName:\"p\"},`startup-script`),` instance creation `,mdx(\"inlineCode\",{parentName:\"p\"},`metadata`),` field. Therefore, the build time\nwill vary depending on the duration of the startup script. If\n`,mdx(\"inlineCode\",{parentName:\"p\"},`startup_script_file`),` is set, the `,mdx(\"inlineCode\",{parentName:\"p\"},`startup-script`),` `,mdx(\"inlineCode\",{parentName:\"p\"},`metadata`),` field will be\noverwritten. In other words, `,mdx(\"inlineCode\",{parentName:\"p\"},`startup_script_file`),` takes precedence.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`The builder does check for a pass/fail/error signal from the startup\nscript by tracking the `,mdx(\"inlineCode\",{parentName:\"p\"},`startup-script-status`),` metadata. Packer will check if this key\nis set to done and if it not set to done before the timeout, Packer will fail the build.`),mdx(\"h3\",{\"id\":\"user-content-windows\",\"data-text-content\":\"Windows\",\"className\":\"g-type-display-4\"},`Windows`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`A Windows startup script can only be provided as a metadata field option. The\nbuilder will `,mdx(\"em\",{parentName:\"p\"},`not`),` wait for a Windows startup script to terminate. You have\nto ensure that it finishes before the instance shuts down. For a list of\nsupported startup script keys refer to `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/compute/docs/instances/startup-scripts/windows\"},`Using startup scripts on Windows`)),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`metadata `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  sysprep-specialize-script-cmd `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"...\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"h3\",{\"id\":\"user-content-logging\",\"data-text-content\":\"Logging\",\"className\":\"g-type-display-4\"},`Logging`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Startup script logs can be copied to a Google Cloud Storage (GCS) location\nspecified via the `,mdx(\"inlineCode\",{parentName:\"p\"},`startup-script-log-dest`),` instance creation `,mdx(\"inlineCode\",{parentName:\"p\"},`metadata`),` field.\nThe GCS location must be writeable by the service account of the instance that Packer created.`),mdx(\"h3\",{\"id\":\"user-content-communicator-configuration\",\"data-text-content\":\"Communicator Configuration\",\"className\":\"g-type-display-4\"},`Communicator Configuration`),mdx(\"h4\",{\"id\":\"user-content-optional:\",\"data-text-content\":\"Optional\",\"className\":\"g-type-display-5\"},`Optional:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`communicator`),` (string) - Packer currently supports three kinds of communicators:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`none`),` - No communicator will be used. If this is set, most\nprovisioners also can't be used.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh`),` - An SSH connection will be established to the machine. This\nis usually the default.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`winrm`),` - A WinRM connection will be established.`))),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`In addition to the above, some builders have custom communicators they\ncan use. For example, the Docker builder has a \"docker\" communicator\nthat uses `,mdx(\"inlineCode\",{parentName:\"p\"},`docker exec`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`docker cp`),` to execute scripts and copy\nfiles.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`pause_before_connecting`),` (duration string | ex: \"1h5m2s\") - We recommend that you enable SSH or WinRM as the very last step in your\nguest's bootstrap script, but sometimes you may have a race condition\nwhere you need Packer to wait before attempting to connect to your\nguest.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`If you end up in this situation, you can use the template option\n`,mdx(\"inlineCode\",{parentName:\"p\"},`pause_before_connecting`),`. By default, there is no pause. For example if\nyou set `,mdx(\"inlineCode\",{parentName:\"p\"},`pause_before_connecting`),` to `,mdx(\"inlineCode\",{parentName:\"p\"},`10m`),` Packer will check whether it\ncan connect, as normal. But once a connection attempt is successful, it\nwill disconnect and then wait 10 minutes before connecting to the guest\nand beginning provisioning.`))),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_host`),` (string) - The address to SSH to. This usually is automatically configured by the\nbuilder.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_port`),` (int) - The port to connect to SSH. This defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`22`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_username`),` (string) - The username to connect to SSH with. Required if using SSH.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_password`),` (string) - A plaintext password to use to authenticate with SSH.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_ciphers`),` ([]string) - This overrides the value of ciphers supported by default by Golang.\nThe default value is `,`[\n\"aes128-gcm@openssh.com\",\n\"chacha20-poly1305@openssh.com\",\n\"aes128-ctr\", \"aes192-ctr\", \"aes256-ctr\",\n]`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Valid options for ciphers include:\n\"aes128-ctr\", \"aes192-ctr\", \"aes256-ctr\", \"`,mdx(\"a\",{parentName:\"p\",\"href\":\"mailto:aes128-gcm@openssh.com\"},`aes128-gcm@openssh.com`),`\",\n\"`,mdx(\"a\",{parentName:\"p\",\"href\":\"mailto:chacha20-poly1305@openssh.com\"},`chacha20-poly1305@openssh.com`),`\",\n\"arcfour256\", \"arcfour128\", \"arcfour\", \"aes128-cbc\", \"3des-cbc\",`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_clear_authorized_keys`),` (bool) - If true, Packer will attempt to remove its temporary key from\n`,mdx(\"inlineCode\",{parentName:\"p\"},`~/.ssh/authorized_keys`),` and `,mdx(\"inlineCode\",{parentName:\"p\"},`/root/.ssh/authorized_keys`),`. This is a\nmostly cosmetic option, since Packer will delete the temporary private\nkey from the host system regardless of whether this is set to true\n(unless the user has set the `,mdx(\"inlineCode\",{parentName:\"p\"},`-debug`),` flag). Defaults to \"false\";\ncurrently only works on guests with `,mdx(\"inlineCode\",{parentName:\"p\"},`sed`),` installed.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_key_exchange_algorithms`),` ([]string) - If set, Packer will override the value of key exchange (kex) algorithms\nsupported by default by Golang. Acceptable values include:\n\"`,mdx(\"a\",{parentName:\"p\",\"href\":\"mailto:curve25519-sha256@libssh.org\"},`curve25519-sha256@libssh.org`),`\", \"ecdh-sha2-nistp256\",\n\"ecdh-sha2-nistp384\", \"ecdh-sha2-nistp521\",\n\"diffie-hellman-group14-sha1\", and \"diffie-hellman-group1-sha1\".`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_certificate_file`),` (string) - Path to user certificate used to authenticate with SSH.\nThe `,mdx(\"inlineCode\",{parentName:\"p\"},`~`),` can be used in path and will be expanded to the\nhome directory of current user.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_pty`),` (bool) - If `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),`, a PTY will be requested for the SSH connection. This defaults\nto `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_timeout`),` (duration string | ex: \"1h5m2s\") - The time to wait for SSH to become available. Packer uses this to\ndetermine when the machine has booted so this is usually quite long.\nExample value: `,mdx(\"inlineCode\",{parentName:\"p\"},`10m`),`.\nThis defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`5m`),`, unless `,mdx(\"inlineCode\",{parentName:\"p\"},`ssh_handshake_attempts`),` is set.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_disable_agent_forwarding`),` (bool) - If true, SSH agent forwarding will be disabled. Defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_handshake_attempts`),` (int) - The number of handshakes to attempt with SSH once it can connect.\nThis defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`10`),`, unless a `,mdx(\"inlineCode\",{parentName:\"p\"},`ssh_timeout`),` is set.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_bastion_host`),` (string) - A bastion host to use for the actual SSH connection.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_bastion_port`),` (int) - The port of the bastion host. Defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`22`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_bastion_agent_auth`),` (bool) - If `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),`, the local SSH agent will be used to authenticate with the\nbastion host. Defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`false`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_bastion_username`),` (string) - The username to connect to the bastion host.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_bastion_password`),` (string) - The password to use to authenticate with the bastion host.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_bastion_interactive`),` (bool) - If `,mdx(\"inlineCode\",{parentName:\"p\"},`true`),`, the keyboard-interactive used to authenticate with bastion host.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_bastion_private_key_file`),` (string) - Path to a PEM encoded private key file to use to authenticate with the\nbastion host. The `,mdx(\"inlineCode\",{parentName:\"p\"},`~`),` can be used in path and will be expanded to the\nhome directory of current user.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_bastion_certificate_file`),` (string) - Path to user certificate used to authenticate with bastion host.\nThe `,mdx(\"inlineCode\",{parentName:\"p\"},`~`),` can be used in path and will be expanded to the\nhome directory of current user.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_file_transfer_method`),` (string) - `,mdx(\"inlineCode\",{parentName:\"p\"},`scp`),` or `,mdx(\"inlineCode\",{parentName:\"p\"},`sftp`),` - How to transfer files, Secure copy (default) or SSH\nFile Transfer Protocol.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"strong\",{parentName:\"p\"},`NOTE`),`: Guests using Windows with Win32-OpenSSH v9.1.0.0p1-Beta, scp\n(the default protocol for copying data) returns a a non-zero error code since the MOTW\ncannot be set, which cause any file transfer to fail. As a workaround you can override the transfer protocol\nwith SFTP instead `,mdx(\"inlineCode\",{parentName:\"p\"},`ssh_file_transfer_method = \"sftp\"`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_proxy_host`),` (string) - A SOCKS proxy host to use for SSH connection`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_proxy_port`),` (int) - A port of the SOCKS proxy. Defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`1080`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_proxy_username`),` (string) - The optional username to authenticate with the proxy server.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_proxy_password`),` (string) - The optional password to use to authenticate with the proxy server.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_keep_alive_interval`),` (duration string | ex: \"1h5m2s\") - How often to send \"keep alive\" messages to the server. Set to a negative\nvalue (`,mdx(\"inlineCode\",{parentName:\"p\"},`-1s`),`) to disable. Example value: `,mdx(\"inlineCode\",{parentName:\"p\"},`10s`),`. Defaults to `,mdx(\"inlineCode\",{parentName:\"p\"},`5s`),`.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_read_write_timeout`),` (duration string | ex: \"1h5m2s\") - The amount of time to wait for a remote command to end. This might be\nuseful if, for example, packer hangs on a connection after a reboot.\nExample: `,mdx(\"inlineCode\",{parentName:\"p\"},`5m`),`. Disabled by default.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_remote_tunnels`),` ([]string) - `)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`ssh_local_tunnels`),` ([]string) - `))),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"inlineCode\",{parentName:\"li\"},`ssh_private_key_file`),` (string) - Path to a PEM encoded private key file to use to authenticate with SSH.\nThe `,mdx(\"inlineCode\",{parentName:\"li\"},`~`),` can be used in path and will be expanded to the home directory\nof current user.`)),mdx(\"h3\",{\"id\":\"user-content-temporary-ssh-keypair\",\"data-text-content\":\"Temporary SSH keypair\",\"className\":\"g-type-display-4\"},`Temporary SSH keypair`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`When no ssh credentials are specified, Packer will generate a temporary SSH\nkeypair for the instance. You can change the algorithm type and bits\nsettings.`),mdx(\"h4\",{\"id\":\"user-content-optional:\",\"data-text-content\":\"Optional\",\"className\":\"g-type-display-5\"},`Optional:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`temporary_key_pair_type`),` (string) - `,mdx(\"inlineCode\",{parentName:\"p\"},`dsa`),` | `,mdx(\"inlineCode\",{parentName:\"p\"},`ecdsa`),` | `,mdx(\"inlineCode\",{parentName:\"p\"},`ed25519`),` | `,mdx(\"inlineCode\",{parentName:\"p\"},`rsa`),` ( the default )`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Specifies the type of key to create. The possible values are 'dsa',\n'ecdsa', 'ed25519', or 'rsa'.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`NOTE: DSA is deprecated and no longer recognized as secure, please\nconsider other alternatives like RSA or ED25519.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`temporary_key_pair_bits`),` (int) - Specifies the number of bits in the key to create. For RSA keys, the\nminimum size is 1024 bits and the default is 4096 bits. Generally, 3072\nbits is considered sufficient. DSA keys must be exactly 1024 bits as\nspecified by FIPS 186-2. For ECDSA keys, bits determines the key length\nby selecting from one of three elliptic curve sizes: 256, 384 or 521\nbits. Attempting to use bit lengths other than these three values for\nECDSA keys will fail. Ed25519 keys have a fixed length and bits will be\nignored.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`NOTE: DSA is deprecated and no longer recognized as secure as specified\nby FIPS 186-5, please consider other alternatives like RSA or ED25519.`))),mdx(\"h3\",{\"id\":\"user-content-gotchas\",\"data-text-content\":\"Gotchas\",\"className\":\"g-type-display-4\"},`Gotchas`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`CentOS and recent Debian images have root ssh access disabled by default. Set\n`,mdx(\"inlineCode\",{parentName:\"p\"},`ssh_username`),` to any user, which will be created by packer with sudo access.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`The machine type must have a scratch disk, which means you can't use an\n`,mdx(\"inlineCode\",{parentName:\"p\"},`f1-micro`),` or `,mdx(\"inlineCode\",{parentName:\"p\"},`g1-small`),` to build images.`),mdx(\"h2\",{\"id\":\"user-content-extra-disk-attachments\",\"data-text-content\":\"Extra disk attachments\",\"className\":\"g-type-display-3\"},`Extra disk attachments`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`BlockDevice is a block device attachement/creation to an instance when building an image.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`These can be defined using the `,mdx(\"a\",{parentName:\"p\",\"href\":\"#disk_attachment\"},`disk_attachment`),` block in the configuration.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Note that this is an array, and therefore in HCL2 can be defined as multiple blocks, each\none corresponding to a disk that will be attached to the instance you are booting.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Example:`),mdx(\"pre\",null,mdx(\"code\",{parentName:\"pre\"},mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`source`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"googlecompute\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` \"example\"`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-comment)\"}},`  # Add whichever is necessary to build the image`)),`\n`,`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`  disk_attachment`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    volume_type     `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"scratch\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    volume_size     `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` 375`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  }`)),`\n`,`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-function)\"}},`  disk_attachment`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},` {`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    volume_type     `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"pd-standard\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    volume_size     `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-constant)\"}},` 25`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`    interface_type  `),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-keyword)\"}},`=`),mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-string)\"}},` \"SCSI\"`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`  }`)),`\n`,mdx(\"span\",{parentName:\"code\"},mdx(\"span\",{parentName:\"span\",\"style\":{\"color\":\"var(--hds-code-block-color-token)\"}},`}`)),`\n`)),mdx(\"h3\",{\"id\":\"user-content-required:\",\"data-text-content\":\"Required\",\"className\":\"g-type-display-4\"},`Required:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`volume_size`),` (int) - Size of the volume to request, in gigabytes.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`The size specified must be in range of the sizes for the chosen volume type.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`volume_type`),` (BlockDeviceType) - The volume type is the type of storage to reserve and attach to the instance being provisioned.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`The following values are supported by this builder:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`scratch: local SSD data, always 375 GiB (default)`),mdx(\"li\",{parentName:\"ul\"},`pd_standard: persistent, HDD-backed disk`),mdx(\"li\",{parentName:\"ul\"},`pd_balanced: persistent, SSD-backed disk`),mdx(\"li\",{parentName:\"ul\"},`pd_ssd: persistent, SSD-backed disk, with extra performance guarantees`),mdx(\"li\",{parentName:\"ul\"},`pd_extreme: persistent, fastest SSD-backed disk, with custom IOPS`),mdx(\"li\",{parentName:\"ul\"},`hyperdisk-balanced: persistent hyperdisk volume, bootable`),mdx(\"li\",{parentName:\"ul\"},`hyperdisk-extreme: persistent hyperdisk volume, optimised for performance`),mdx(\"li\",{parentName:\"ul\"},`hyperdisk-ml: persistent, shareable, hyperdisk volume, highest throughput`),mdx(\"li\",{parentName:\"ul\"},`hyperdisk-throughput: persistent hyperdisk volume with flexible throughput`)),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`For details on the different types, refer to: `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/compute/docs/disks#disk-types\"},`https://cloud.google.com/compute/docs/disks#disk-types`),`\nFor more information on hyperdisk volumes, refer to: `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/compute/docs/disks/hyperdisks#throughput\"},`https://cloud.google.com/compute/docs/disks/hyperdisks#throughput`)))),mdx(\"h3\",{\"id\":\"user-content-optional:\",\"data-text-content\":\"Optional\",\"className\":\"g-type-display-4\"},`Optional:`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`attachment_mode`),` (string) - How to attach the volume to the instance`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Can be either READ_ONLY or READ_WRITE (default).`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`create_image`),` (bool) - If true, an image will be created for this disk, instead of the boot disk.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`This only applies to non-scratch disks, and can only be specified on one disk at a\ntime.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`device_name`),` (string) - The device name as exposed to the OS in the /dev/disk/by-id/google-* directory`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`If unspecified, the disk will have a default name in the form\npersistent-disk-x with 'x' being a number assigned by GCE`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`This field only applies to persistent disks, local SSDs will always\nbe exposed as /dev/disk/by-id/google-local-nvme-ssd-x.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`disk_encryption_key`),` (CustomerEncryptionKey) - Disk encryption key to apply to the requested disk.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Possible values:`),mdx(\"ul\",{parentName:\"li\"},mdx(\"li\",{parentName:\"ul\"},`kmsKeyName -  The name of the encryption key that is stored in Google Cloud KMS.`),mdx(\"li\",{parentName:\"ul\"},`RawKey: - A 256-bit customer-supplied encryption key, encodes in RFC 4648 base64.`)),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`Refer to the `,mdx(\"a\",{parentName:\"p\",\"href\":\"#customer-encryption-key\"},`Customer Encryption Key`),` section for more information on the contents of this block.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`disk_name`),` (string) - Name of the disk to create.\nThis only applies to non-scratch disks. If the disk is persistent, and\nnot specified, Packer will generate a unique name for the disk.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`The name must be 1-63 characters long and comply to the regexp\n'`,mdx(\"a\",{parentName:\"p\",\"href\":\"%5B-a-z0-9%5D*%5Ba-z0-9%5D\"},`a-z`),`?'`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`interface_type`),` (string) - The interface to use for attaching the disk.\nCan be either NVME or SCSI. Defaults to SCSI.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`The available options depend on the type of disk, SEE: `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/compute/docs/disks/persistent-disks#choose_an_interface\"},`https://cloud.google.com/compute/docs/disks/persistent-disks#choose_an_interface`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`iops`),` (int) - The requested IOPS for the disk.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`This is only available for pd_extreme disks.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`keep_device`),` (bool) - Keep the device in the created disks after the instance is terminated.\nBy default, the builder will remove the disks at the end of the build.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`This cannot be used with 'scratch' volumes.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`replica_zones`),` ([]string) - The list of extra zones to replicate the disk into`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`The zone in which the instance is created will automatically be\nadded to the zones in which the disk is replicated.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`source_volume`),` (string) - The URI of the volume to attach`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`If this is specified, it won't be deleted after the instance is shut-down.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`_`),` (string) - Zone is the zone in which to create the disk in.`),mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},`It is not exposed since the parent config already specifies it\nand it will be set for the block device when preparing it.`))),mdx(\"h2\",{\"id\":\"user-content-customer-encryption-key\",\"data-text-content\":\"Customer Encryption Key\",\"className\":\"g-type-display-3\"},`Customer Encryption Key`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Specifying a custom key allows you to use your own encryption keys to encrypt the data\nof the image you are creating.`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Note: you will need to reuse the same key later on when reusing the image.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`kmsKeyName`),` (string) - KmsKeyName: The name of the encryption key that is stored in Google\nCloud KMS.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`rawKey`),` (string) - RawKey: Specifies a 256-bit customer-supplied encryption key, encoded\nin RFC 4648 base64 to either encrypt or decrypt this resource.`))),mdx(\"h2\",{\"id\":\"user-content-node-affinities\",\"data-text-content\":\"Node Affinities\",\"className\":\"g-type-display-3\"},`Node Affinities`),mdx(\"p\",{\"className\":\"g-type-long-body\"},`Node affinity configuration allows you to restrict the nodes on which to run the\ninstance that Packer will build the image from.\nThis requires configuring `,mdx(\"a\",{parentName:\"p\",\"href\":\"https://cloud.google.com/compute/docs/nodes/provisioning-sole-tenant-vms\"},`sole-tenant node groups`),` first.`),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`key`),` (string) - Key: Corresponds to the label key of Node resource.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`operator`),` (string) - Operator: Defines the operation of node selection. Valid operators are IN for affinity and\nNOT_IN for anti-affinity.`)),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\",\"className\":\"g-type-long-body\"},mdx(\"inlineCode\",{parentName:\"p\"},`values`),` ([]string) - Values: Corresponds to the label values of Node resource.`))))};MDXContent.isMDXComponent=true;","scope":{}},"breadcrumbLinks":[{"title":"Developer","url":"/"},{"title":"Packer","url":"/packer"},{"title":"Integrations","url":"/packer/integrations"},{"title":"Google Cloud Platform","url":"/packer/integrations/hashicorp/googlecompute","isCurrentPage":false},{"title":"v1.1.5","url":"/packer/integrations/hashicorp/googlecompute/v1.1.5","isCurrentPage":false},{"title":"Components"},{"title":"Builder"},{"title":"Google Cloud Platform","url":"/packer/integrations/hashicorp/googlecompute/latest/components/builder/googlecompute","isCurrentPage":true}]},"__N_SSG":true},"page":"/[productSlug]/integrations/[organizationSlug]/[integrationSlug]/[integrationVersion]/components/[componentType]/[componentSlug]","query":{"productSlug":"packer","organizationSlug":"hashicorp","integrationSlug":"googlecompute","integrationVersion":"latest","componentType":"builder","componentSlug":"googlecompute"},"buildId":"QskBVl78yH6cCW74yoB6E","isFallback":false,"gsp":true,"scriptLoader":[]}</script><script nomodule="">window.MSInputMethodContext && document.documentMode && document.write('<script src="/ie-warning.js"><\x2fscript>');</script></body></html>